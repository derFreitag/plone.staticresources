!function(){function e(){}var t="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||this||{},n=t._,r=Array.prototype,a=Object.prototype,c="undefined"!=typeof Symbol?Symbol.prototype:null,o=r.push,l=r.slice,f=a.toString,i=a.hasOwnProperty,u=Array.isArray,s=Object.keys,p=Object.create,d=function(t){return t instanceof d?t:this instanceof d?void(this._wrapped=t):new d(t)};"undefined"==typeof exports||exports.nodeType?t._=d:(exports="undefined"!=typeof module&&!module.nodeType&&module.exports?module.exports=d:exports)._=d,d.VERSION="1.9.1";function h(o,i,t){if(void 0===i)return o;switch(null==t?3:t){case 1:return function(t){return o.call(i,t)};case 3:return function(t,e,n){return o.call(i,t,e,n)};case 4:return function(t,e,n,r){return o.call(i,t,e,n,r)}}return function(){return o.apply(i,arguments)}}function y(t,e,n){return d.iteratee!==g?d.iteratee(t,e):null==t?d.identity:d.isFunction(t)?h(t,e,n):d.isObject(t)&&!d.isArray(t)?d.matcher(t):d.property(t)}var g;d.iteratee=g=function(t,e){return y(t,e,1/0)};function v(o,i){return i=null==i?o.length-1:+i,function(){for(var t=Math.max(arguments.length-i,0),e=Array(t),n=0;n<t;n++)e[n]=arguments[n+i];switch(i){case 0:return o.call(this,e);case 1:return o.call(this,arguments[0],e);case 2:return o.call(this,arguments[0],arguments[1],e)}for(var r=Array(i+1),n=0;n<i;n++)r[n]=arguments[n];return r[i]=e,o.apply(this,r)}}function m(t){return d.isObject(t)?p?p(t):(e.prototype=t,t=new e,e.prototype=null,t):{}}function w(e){return function(t){return null==t?void 0:t[e]}}function b(t,e){return null!=t&&i.call(t,e)}function x(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}function j(t){return"number"==typeof(t=E(t))&&0<=t&&t<=A}var A=Math.pow(2,53)-1,E=w("length");d.each=d.forEach=function(t,e,n){if(e=h(e,n),j(t))for(o=0,i=t.length;o<i;o++)e(t[o],o,t);else for(var r=d.keys(t),o=0,i=r.length;o<i;o++)e(t[r[o]],r[o],t);return t},d.map=d.collect=function(t,e,n){e=y(e,n);for(var r=!j(t)&&d.keys(t),o=(r||t).length,i=Array(o),a=0;a<o;a++){var u=r?r[a]:a;i[a]=e(t[u],u,t)}return i};var _=function(l){return function(t,e,n,r){var o=3<=arguments.length;return function(t,e,n,r){var o=!j(t)&&d.keys(t),i=(o||t).length,a=0<l?0:i-1;for(r||(n=t[o?o[a]:a],a+=l);0<=a&&a<i;a+=l){var u=o?o[a]:a;n=e(n,t[u],u,t)}return n}(t,h(e,r,4),n,o)}};d.reduce=d.foldl=d.inject=_(1),d.reduceRight=d.foldr=_(-1),d.find=d.detect=function(t,e,n){n=(j(t)?d.findIndex:d.findKey)(t,e,n);if(void 0!==n&&-1!==n)return t[n]},d.filter=d.select=function(t,r,e){var o=[];return r=y(r,e),d.each(t,function(t,e,n){r(t,e,n)&&o.push(t)}),o},d.reject=function(t,e,n){return d.filter(t,d.negate(y(e)),n)},d.every=d.all=function(t,e,n){e=y(e,n);for(var r=!j(t)&&d.keys(t),o=(r||t).length,i=0;i<o;i++){var a=r?r[i]:i;if(!e(t[a],a,t))return!1}return!0},d.some=d.any=function(t,e,n){e=y(e,n);for(var r=!j(t)&&d.keys(t),o=(r||t).length,i=0;i<o;i++){var a=r?r[i]:i;if(e(t[a],a,t))return!0}return!1},d.contains=d.includes=d.include=function(t,e,n,r){return j(t)||(t=d.values(t)),0<=d.indexOf(t,e,n="number"!=typeof n||r?0:n)},d.invoke=v(function(t,n,r){var o,i;return d.isFunction(n)?i=n:d.isArray(n)&&(o=n.slice(0,-1),n=n[n.length-1]),d.map(t,function(t){var e=i;if(!e){if(null==(t=o&&o.length?x(t,o):t))return;e=t[n]}return null==e?e:e.apply(t,r)})}),d.pluck=function(t,e){return d.map(t,d.property(e))},d.where=function(t,e){return d.filter(t,d.matcher(e))},d.findWhere=function(t,e){return d.find(t,d.matcher(e))},d.max=function(t,r,e){var n,o,i=-1/0,a=-1/0;if(null==r||"number"==typeof r&&"object"!=typeof t[0]&&null!=t)for(var u=0,l=(t=j(t)?t:d.values(t)).length;u<l;u++)null!=(n=t[u])&&i<n&&(i=n);else r=y(r,e),d.each(t,function(t,e,n){o=r(t,e,n),(a<o||o===-1/0&&i===-1/0)&&(i=t,a=o)});return i},d.min=function(t,r,e){var n,o,i=1/0,a=1/0;if(null==r||"number"==typeof r&&"object"!=typeof t[0]&&null!=t)for(var u=0,l=(t=j(t)?t:d.values(t)).length;u<l;u++)null!=(n=t[u])&&n<i&&(i=n);else r=y(r,e),d.each(t,function(t,e,n){((o=r(t,e,n))<a||o===1/0&&i===1/0)&&(i=t,a=o)});return i},d.shuffle=function(t){return d.sample(t,1/0)},d.sample=function(t,e,n){if(null==e||n)return(t=!j(t)?d.values(t):t)[d.random(t.length-1)];var r=j(t)?d.clone(t):d.values(t),t=E(r);e=Math.max(Math.min(e,t),0);for(var o=t-1,i=0;i<e;i++){var a=d.random(i,o),u=r[i];r[i]=r[a],r[a]=u}return r.slice(0,e)},d.sortBy=function(t,r,e){var o=0;return r=y(r,e),d.pluck(d.map(t,function(t,e,n){return{value:t,index:o++,criteria:r(t,e,n)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")};var O=function(i,e){return function(n,r,t){var o=e?[[],[]]:{};return r=y(r,t),d.each(n,function(t,e){e=r(t,e,n);i(o,t,e)}),o}};d.groupBy=O(function(t,e,n){b(t,n)?t[n].push(e):t[n]=[e]}),d.indexBy=O(function(t,e,n){t[n]=e}),d.countBy=O(function(t,e,n){b(t,n)?t[n]++:t[n]=1});var k=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;d.toArray=function(t){return t?d.isArray(t)?l.call(t):d.isString(t)?t.match(k):j(t)?d.map(t,d.identity):d.values(t):[]},d.size=function(t){return null==t?0:(j(t)?t:d.keys(t)).length},d.partition=O(function(t,e,n){t[n?0:1].push(e)},!0),d.first=d.head=d.take=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[0]:d.initial(t,t.length-e)},d.initial=function(t,e,n){return l.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))},d.last=function(t,e,n){return null==t||t.length<1?null==e?void 0:[]:null==e||n?t[t.length-1]:d.rest(t,Math.max(0,t.length-e))},d.rest=d.tail=d.drop=function(t,e,n){return l.call(t,null==e||n?1:e)},d.compact=function(t){return d.filter(t,Boolean)};var T=function(t,e,n,r){for(var o=(r=r||[]).length,i=0,a=E(t);i<a;i++){var u=t[i];if(j(u)&&(d.isArray(u)||d.isArguments(u)))if(e)for(var l=0,s=u.length;l<s;)r[o++]=u[l++];else T(u,e,n,r),o=r.length;else n||(r[o++]=u)}return r};d.flatten=function(t,e){return T(t,e,!1)},d.without=v(function(t,e){return d.difference(t,e)}),d.uniq=d.unique=function(t,e,n,r){d.isBoolean(e)||(r=n,n=e,e=!1),null!=n&&(n=y(n,r));for(var o=[],i=[],a=0,u=E(t);a<u;a++){var l=t[a],s=n?n(l,a,t):l;e&&!n?(a&&i===s||o.push(l),i=s):n?d.contains(i,s)||(i.push(s),o.push(l)):d.contains(o,l)||o.push(l)}return o},d.union=v(function(t){return d.uniq(T(t,!0,!0))}),d.intersection=function(t){for(var e=[],n=arguments.length,r=0,o=E(t);r<o;r++){var i=t[r];if(!d.contains(e,i)){for(var a=1;a<n&&d.contains(arguments[a],i);a++);a===n&&e.push(i)}}return e},d.difference=v(function(t,e){return e=T(e,!0,!0),d.filter(t,function(t){return!d.contains(e,t)})}),d.unzip=function(t){for(var e=t&&d.max(t,E).length||0,n=Array(e),r=0;r<e;r++)n[r]=d.pluck(t,r);return n},d.zip=v(d.unzip),d.object=function(t,e){for(var n={},r=0,o=E(t);r<o;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n};_=function(i){return function(t,e,n){e=y(e,n);for(var r=E(t),o=0<i?0:r-1;0<=o&&o<r;o+=i)if(e(t[o],o,t))return o;return-1}};d.findIndex=_(1),d.findLastIndex=_(-1),d.sortedIndex=function(t,e,n,r){for(var o=(n=y(n,r,1))(e),i=0,a=E(t);i<a;){var u=Math.floor((i+a)/2);n(t[u])<o?i=u+1:a=u}return i};O=function(i,a,u){return function(t,e,n){var r=0,o=E(t);if("number"==typeof n)0<i?r=0<=n?n:Math.max(n+o,r):o=0<=n?Math.min(n+1,o):n+o+1;else if(u&&n&&o)return t[n=u(t,e)]===e?n:-1;if(e!=e)return 0<=(n=a(l.call(t,r,o),d.isNaN))?n+r:-1;for(n=0<i?r:o-1;0<=n&&n<o;n+=i)if(t[n]===e)return n;return-1}};d.indexOf=O(1,d.findIndex,d.sortedIndex),d.lastIndexOf=O(-1,d.findLastIndex),d.range=function(t,e,n){null==e&&(e=t||0,t=0),n=n||(e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),o=Array(r),i=0;i<r;i++,t+=n)o[i]=t;return o},d.chunk=function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,o=t.length;r<o;)n.push(l.call(t,r,r+=e));return n};function S(t,e,n,r,o){return r instanceof e?(n=m(t.prototype),o=t.apply(n,o),d.isObject(o)?o:n):t.apply(n,o)}d.bind=v(function(e,n,r){if(!d.isFunction(e))throw new TypeError("Bind must be called on a function");var o=v(function(t){return S(e,o,n,this,r.concat(t))});return o}),d.partial=v(function(o,i){var a=d.partial.placeholder,u=function(){for(var t=0,e=i.length,n=Array(e),r=0;r<e;r++)n[r]=i[r]===a?arguments[t++]:i[r];for(;t<arguments.length;)n.push(arguments[t++]);return S(o,u,this,this,n)};return u}),(d.partial.placeholder=d).bindAll=v(function(t,e){var n=(e=T(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=d.bind(t[r],t)}}),d.memoize=function(r,o){var i=function(t){var e=i.cache,n=""+(o?o.apply(this,arguments):t);return b(e,n)||(e[n]=r.apply(this,arguments)),e[n]};return i.cache={},i},d.delay=v(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),d.defer=d.partial(d.delay,d,1),d.throttle=function(n,r,o){var i,a,u,l,s=0;o=o||{};function c(){s=!1===o.leading?0:d.now(),i=null,l=n.apply(a,u),i||(a=u=null)}function t(){var t=d.now();s||!1!==o.leading||(s=t);var e=r-(t-s);return a=this,u=arguments,e<=0||r<e?(i&&(clearTimeout(i),i=null),s=t,l=n.apply(a,u),i||(a=u=null)):i||!1===o.trailing||(i=setTimeout(c,e)),l}return t.cancel=function(){clearTimeout(i),s=0,i=a=u=null},t},d.debounce=function(n,r,o){function i(t,e){a=null,e&&(u=n.apply(t,e))}var a,u,t=v(function(t){var e;return a&&clearTimeout(a),o?(e=!a,a=setTimeout(i,r),e&&(u=n.apply(this,t))):a=d.delay(i,r,this,t),u});return t.cancel=function(){clearTimeout(a),a=null},t},d.wrap=function(t,e){return d.partial(e,t)},d.negate=function(t){return function(){return!t.apply(this,arguments)}},d.compose=function(){var n=arguments,r=n.length-1;return function(){for(var t=r,e=n[r].apply(this,arguments);t--;)e=n[t].call(this,e);return e}},d.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},d.before=function(t,e){var n;return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}},d.once=d.partial(d.before,2),d.restArguments=v;function I(t,e){var n=M.length,r=t.constructor,o=d.isFunction(r)&&r.prototype||a,i="constructor";for(b(t,i)&&!d.contains(e,i)&&e.push(i);n--;)(i=M[n])in t&&t[i]!==o[i]&&!d.contains(e,i)&&e.push(i)}var F=!{toString:null}.propertyIsEnumerable("toString"),M=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];d.keys=function(t){if(!d.isObject(t))return[];if(s)return s(t);var e,n=[];for(e in t)b(t,e)&&n.push(e);return F&&I(t,n),n},d.allKeys=function(t){if(!d.isObject(t))return[];var e,n=[];for(e in t)n.push(e);return F&&I(t,n),n},d.values=function(t){for(var e=d.keys(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=t[e[o]];return r},d.mapObject=function(t,e,n){e=y(e,n);for(var r=d.keys(t),o=r.length,i={},a=0;a<o;a++){var u=r[a];i[u]=e(t[u],u,t)}return i},d.pairs=function(t){for(var e=d.keys(t),n=e.length,r=Array(n),o=0;o<n;o++)r[o]=[e[o],t[e[o]]];return r},d.invert=function(t){for(var e={},n=d.keys(t),r=0,o=n.length;r<o;r++)e[t[n[r]]]=n[r];return e},d.functions=d.methods=function(t){var e,n=[];for(e in t)d.isFunction(t[e])&&n.push(e);return n.sort()};_=function(l,s){return function(t){var e=arguments.length;if(s&&(t=Object(t)),e<2||null==t)return t;for(var n=1;n<e;n++)for(var r=arguments[n],o=l(r),i=o.length,a=0;a<i;a++){var u=o[a];s&&void 0!==t[u]||(t[u]=r[u])}return t}};d.extend=_(d.allKeys),d.extendOwn=d.assign=_(d.keys),d.findKey=function(t,e,n){e=y(e,n);for(var r,o=d.keys(t),i=0,a=o.length;i<a;i++)if(e(t[r=o[i]],r,t))return r};function N(t,e,n){return e in n}var L,P;d.pick=v(function(t,e){var n={},r=e[0];if(null==t)return n;d.isFunction(r)?(1<e.length&&(r=h(r,e[1])),e=d.allKeys(t)):(r=N,e=T(e,!1,!1),t=Object(t));for(var o=0,i=e.length;o<i;o++){var a=e[o],u=t[a];r(u,a,t)&&(n[a]=u)}return n}),d.omit=v(function(t,n){var e,r=n[0];return d.isFunction(r)?(r=d.negate(r),1<n.length&&(e=n[1])):(n=d.map(T(n,!1,!1),String),r=function(t,e){return!d.contains(n,e)}),d.pick(t,r,e)}),d.defaults=_(d.allKeys,!0),d.create=function(t,e){t=m(t);return e&&d.extendOwn(t,e),t},d.clone=function(t){return d.isObject(t)?d.isArray(t)?t.slice():d.extend({},t):t},d.tap=function(t,e){return e(t),t},d.isMatch=function(t,e){var n=d.keys(e),r=n.length;if(null==t)return!r;for(var o=Object(t),i=0;i<r;i++){var a=n[i];if(e[a]!==o[a]||!(a in o))return!1}return!0},L=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var o=typeof t;return("function"==o||"object"==o||"object"==typeof e)&&P(t,e,n,r)},P=function(t,e,n,r){t instanceof d&&(t=t._wrapped),e instanceof d&&(e=e._wrapped);var o=f.call(t);if(o!==f.call(e))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return c.valueOf.call(t)===c.valueOf.call(e)}var i="[object Array]"===o;if(!i){if("object"!=typeof t||"object"!=typeof e)return!1;var a=t.constructor,o=e.constructor;if(a!==o&&!(d.isFunction(a)&&a instanceof a&&d.isFunction(o)&&o instanceof o)&&"constructor"in t&&"constructor"in e)return!1}r=r||[];for(var u=(n=n||[]).length;u--;)if(n[u]===t)return r[u]===e;if(n.push(t),r.push(e),i){if((u=t.length)!==e.length)return!1;for(;u--;)if(!L(t[u],e[u],n,r))return!1}else{var l,s=d.keys(t),u=s.length;if(d.keys(e).length!==u)return!1;for(;u--;)if(l=s[u],!b(e,l)||!L(t[l],e[l],n,r))return!1}return n.pop(),r.pop(),!0},d.isEqual=function(t,e){return L(t,e)},d.isEmpty=function(t){return null==t||(j(t)&&(d.isArray(t)||d.isString(t)||d.isArguments(t))?0===t.length:0===d.keys(t).length)},d.isElement=function(t){return!(!t||1!==t.nodeType)},d.isArray=u||function(t){return"[object Array]"===f.call(t)},d.isObject=function(t){var e=typeof t;return"function"==e||"object"==e&&!!t},d.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){d["is"+e]=function(t){return f.call(t)==="[object "+e+"]"}}),d.isArguments(arguments)||(d.isArguments=function(t){return b(t,"callee")});O=t.document&&t.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof O&&(d.isFunction=function(t){return"function"==typeof t||!1}),d.isFinite=function(t){return!d.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},d.isNaN=function(t){return d.isNumber(t)&&isNaN(t)},d.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===f.call(t)},d.isNull=function(t){return null===t},d.isUndefined=function(t){return void 0===t},d.has=function(t,e){if(!d.isArray(e))return b(t,e);for(var n=e.length,r=0;r<n;r++){var o=e[r];if(null==t||!i.call(t,o))return!1;t=t[o]}return!!n},d.noConflict=function(){return t._=n,this},d.identity=function(t){return t},d.constant=function(t){return function(){return t}},d.noop=function(){},d.property=function(e){return d.isArray(e)?function(t){return x(t,e)}:w(e)},d.propertyOf=function(e){return null==e?function(){}:function(t){return d.isArray(t)?x(e,t):e[t]}},d.matcher=d.matches=function(e){return e=d.extendOwn({},e),function(t){return d.isMatch(t,e)}},d.times=function(t,e,n){var r=Array(Math.max(0,t));e=h(e,n,1);for(var o=0;o<t;o++)r[o]=e(o);return r},d.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},d.now=Date.now||function(){return(new Date).getTime()};_={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=d.invert(_),O=function(e){function n(t){return e[t]}var t="(?:"+d.keys(e).join("|")+")",r=RegExp(t),o=RegExp(t,"g");return function(t){return r.test(t=null==t?"":""+t)?t.replace(o,n):t}};d.escape=O(_),d.unescape=O(u),d.result=function(t,e,n){var r=(e=!d.isArray(e)?[e]:e).length;if(!r)return d.isFunction(n)?n.call(t):n;for(var o=0;o<r;o++){var i=null==t?void 0:t[e[o]];void 0===i&&(i=n,o=r),t=d.isFunction(i)?i.call(t):i}return t};var R=0;d.uniqueId=function(t){var e=++R+"";return t?t+e:e},d.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};function C(t){return"\\"+B[t]}var q=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},W=/\\|'|\r|\n|\u2028|\u2029/g;d.template=function(i,t,e){t=d.defaults({},t=!t&&e?e:t,d.templateSettings);var n,e=RegExp([(t.escape||q).source,(t.interpolate||q).source,(t.evaluate||q).source].join("|")+"|$","g"),a=0,u="__p+='";i.replace(e,function(t,e,n,r,o){return u+=i.slice(a,o).replace(W,C),a=o+t.length,e?u+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":n?u+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(u+="';\n"+r+"\n__p+='"),t}),u+="';\n",u="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+(u=!t.variable?"with(obj||{}){\n"+u+"}\n":u)+"return __p;\n";try{n=new Function(t.variable||"obj","_",u)}catch(t){throw t.source=u,t}e=function(t){return n.call(this,t,d)},t=t.variable||"obj";return e.source="function("+t+"){\n"+u+"}",e},d.chain=function(t){t=d(t);return t._chain=!0,t};function D(t,e){return t._chain?d(e).chain():e}d.mixin=function(n){return d.each(d.functions(n),function(t){var e=d[t]=n[t];d.prototype[t]=function(){var t=[this._wrapped];return o.apply(t,arguments),D(this,e.apply(d,t))}}),d},d.mixin(d),d.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=r[e];d.prototype[e]=function(){var t=this._wrapped;return n.apply(t,arguments),"shift"!==e&&"splice"!==e||0!==t.length||delete t[0],D(this,t)}}),d.each(["concat","join","slice"],function(t){var e=r[t];d.prototype[t]=function(){return D(this,e.apply(this._wrapped,arguments))}}),d.prototype.value=function(){return this._wrapped},d.prototype.valueOf=d.prototype.toJSON=d.prototype.value,d.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],function(){return d})}(),function(){var n;Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function e(){}function n(){return o.apply(this instanceof e&&t?this:t,r.concat(Array.prototype.slice.call(arguments)))}var r=Array.prototype.slice.call(arguments,1),o=this;return e.prototype=this.prototype,n.prototype=new e,n});var r={DEBUG:10,INFO:20,WARN:30,ERROR:40,FATAL:50};function t(){}function e(){}function i(t,e){this._loggers={},this.name=t||"",this._parent=e||null,e||(this._enabled=!0,this._level=r.WARN)}function o(t){n=t}t.prototype={output:function(t,e,n){void 0!==window.console&&void 0!==console.log&&(t&&n.unshift(t+":"),n=n.join(" "),console.info,e<=r.DEBUG?(n="[DEBUG] "+n,console.log(n)):e<=r.INFO?console.info(n):e<=r.WARN?console.warn(n):console.error(n))}},e.prototype={output:function(t,e,n){t&&n.unshift(t+":"),e<=r.DEBUG?(n.unshift("[DEBUG]"),console.log.apply(console,n)):(e<=r.INFO?console.info:e<=r.WARN?console.warn:console.error).apply(console,n)}},i.prototype={getLogger:function(t){for(var e=t.split("."),n=this,r=this.name?[this.name]:[];e.length;){var o=e.shift();r.push(o),o in n._loggers||(n._loggers[o]=new i(r.join("."),n)),n=n._loggers[o]}return n},_getFlag:function(t){var e=this;for(t="_"+t;null!==e;){if(void 0!==e[t])return e[t];e=e._parent}return null},setEnabled:function(t){this._enabled=!!t},isEnabled:function(){this._getFlag("enabled")},setLevel:function(t){"number"==typeof t?this._level=t:"string"==typeof t&&(t=t.toUpperCase())in r&&(this._level=r[t])},getLevel:function(){return this._getFlag("level")},log:function(t,e){!e.length||!this._getFlag("enabled")||t<this._getFlag("level")||(e=Array.prototype.slice.call(e),n.output(this.name,t,e))},debug:function(){this.log(r.DEBUG,arguments)},info:function(){this.log(r.INFO,arguments)},warn:function(){this.log(r.WARN,arguments)},error:function(){this.log(r.ERROR,arguments)},fatal:function(){this.log(r.FATAL,arguments)}},window.console&&window.console.log&&"function"==typeof window.console.log.apply?o(new e):o(new t);for(var a,u=new i,l=/loglevel(|-[^=]+)=([^&]+)/g;null!==(a=l.exec(window.location.search));)(""===a[1]?u:u.getLogger(a[1].slice(1))).setLevel(a[2].toUpperCase());var s={Level:r,getLogger:u.getLogger.bind(u),setEnabled:u.setEnabled.bind(u),isEnabled:u.isEnabled.bind(u),setLevel:u.setLevel.bind(u),getLevel:u.getLevel.bind(u),debug:u.debug.bind(u),info:u.info.bind(u),warn:u.warn.bind(u),error:u.error.bind(u),fatal:u.fatal.bind(u),getWriter:function(){return n},setWriter:o};"function"==typeof define?define("logging",[],function(){return s}):window.logging=s}(),define("pat-logger",["logging"],function(t){return t.getLogger("patterns")}),function(t){"function"==typeof define&&define.amd?define("jquery.browser",["jquery"],t):"object"==typeof module&&"object"==typeof module.exports?module.exports=t(require("jquery")):t(window.jQuery)}(function(t){"use strict";function e(t){t=(t=void 0===t?window.navigator.userAgent:t).toLowerCase();var e=/(edge)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(iemobile)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||0<=t.indexOf("trident")&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(t)||[],n=/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(silk)/.exec(t)||/(android)/.exec(t)||/(win)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||/(playbook)/.exec(t)||/(bb)/.exec(t)||/(blackberry)/.exec(t)||[],t={},n={browser:e[5]||e[3]||e[1]||"",version:e[2]||e[4]||"0",versionNumber:e[4]||e[2]||"0",platform:n[0]||""};return n.browser&&(t[n.browser]=!0,t.version=n.version,t.versionNumber=parseInt(n.versionNumber,10)),n.platform&&(t[n.platform]=!0),(t.android||t.bb||t.blackberry||t.ipad||t.iphone||t.ipod||t.kindle||t.playbook||t.silk||t["windows phone"])&&(t.mobile=!0),(t.cros||t.mac||t.linux||t.win)&&(t.desktop=!0),(t.chrome||t.opr||t.safari)&&(t.webkit=!0),(t.rv||t.iemobile)&&(n.browser="msie",t.msie=!0),t.edge&&(delete t.edge,n.browser="msedge",t.msedge=!0),t.safari&&t.blackberry&&(t[n.browser="blackberry"]=!0),t.safari&&t.playbook&&(t[n.browser="playbook"]=!0),t.bb&&(t[n.browser="blackberry"]=!0),t.opr&&(n.browser="opera",t.opera=!0),t.safari&&t.android&&(t[n.browser="android"]=!0),t.safari&&t.kindle&&(n.browser="kindle",t.kindle=!0),t.safari&&t.silk&&(n.browser="silk",t.silk=!0),t.name=n.browser,t.platform=n.platform,t}return window.jQBrowser=e(window.navigator.userAgent),window.jQBrowser.uaMatch=e,t&&(t.browser=window.jQBrowser),window.jQBrowser}),define("pat-utils",["jquery","underscore","jquery.browser"],function(i,a,e){i.fn.safeClone=function(){var t=this.clone();return void 0!==e.msie&&t.findInclusive(":input[placeholder]").each(function(t,e){e=i(e);e.attr("placeholder")===e.val()&&e.val("")}),t},Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,r;if(null===this)throw new TypeError(" this is null or not defined");var o,i=Object(this),a=i.length>>>0;if("function"!=typeof t)throw new TypeError(t+" is not a function");for(1<arguments.length&&(n=e),r=0;r<a;)r in i&&(o=i[r],t.call(n,o,r,i)),r++});function u(t){var e=typeof t;return"function"==e||"object"==e&&!!t}var l={none:{hide:"hide",show:"show"},fade:{hide:"fadeOut",show:"fadeIn"},slide:{hide:"slideUp",show:"slideDown"}};return isElementInViewport=function(t,e,n){if(t===[])return!1;var r=(t=t instanceof i?t[0]:t).getBoundingClientRect(),t=[r.top,r.bottom,r.left,r.right];return!a.every(t,function(t){if(0===t)return!0})&&(e?r.top<=0+(n=void 0===n?0:n)&&r.bottom>=0+n:0<=r.top&&0<=r.left&&r.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&r.right<=(window.innerWidth||document.documentElement.clientWidth))},{jqueryPlugin:function(n){return function(t,e){return 0===this.length?this:("object"==typeof t&&(e=t,t=void 0),("function"==typeof n?function(e,n,r){return this.each(function(){var t=i(this),t=e.init(t,r);if(n)return void 0===t[n]?(i.error("Method "+n+" does not exist on jQuery."+e.name),!1):"_"===n.charAt(0)?(i.error("Method "+n+" is private on jQuery."+e.name),!1):void t[n].apply(t,[r])}),this}:function(t,e,n){var r=this;if(e){if(t[e])return t[e].apply(r,[r].concat([n]));i.error("Method "+e+" does not exist on jQuery."+t.name)}else t.init.apply(r,[r].concat([n]));return r}).call(this,n,t,e))}},debounce:function(n,r){var o;return function(){var t=this,e=arguments;clearTimeout(o),o=setTimeout(function(){o=null,n.apply(t,e)},r)}},escapeRegExp:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isObject:u,extend:function(t){if(!u(t))return t;for(var e,n,r=1,o=arguments.length;r<o;r++)for(n in e=arguments[r])hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},rebaseURL:function(t,e){return t=new URL(t,window.location).href,-1!==e.indexOf("://")||"/"===e[0]||0===e.indexOf("data:")?e:t.slice(0,t.lastIndexOf("/")+1)+e},findLabel:function(t){for(var e,n=t.parentNode;n&&11!==n.nodeType;n=n.parentNode)if("LABEL"===n.tagName)return n;return(e=(e=t.id?i('label[for="'+t.id+'"]'):e)&&0===e.length&&t.form?i('label[for="'+t.name+'"]',t.form):e)&&e.length?e[0]:null},elementInViewport:function(t){var e=t.getBoundingClientRect(),n=document.documentElement,t=window.innerWidth||n.clientWidth,n=window.innerHeight||n.clientHeight;return!(e.right<0||e.bottom<0||e.left>t||e.top>n)},removeWildcardClass:function(t,e){var o;-1===e.indexOf("*")?t.removeClass(e):(o=(o=e.replace(/[\-\[\]{}()+?.,\\\^$|#\s]/g,"\\$&")).replace(/[*]/g,".*"),o=new RegExp("^"+o+"$"),t.filter("[class]").each(function(){for(var t=i(this),e=t.attr("class").split(/\s+/),n=[],r=0;r<e.length;r++)o.test(e[r])||n.push(e[r]);n.length?t.attr("class",n.join(" ")):t.removeAttr("class")}))},hideOrShow:function(t,e,n,r){var o,i="css"===n.transition||"none"===n.transition?null:n.effect.duration;function a(){t.removeClass("in-progress").addClass(e?"visible":"hidden").trigger("pat-update",{pattern:r,transition:"complete"})}t.removeClass("visible hidden in-progress"),i?(o=l[n.transition],t.addClass("in-progress").trigger("pat-update",{pattern:r,transition:"start"}),t[e?o.show:o.hide]({duration:i,easing:n.effect.easing,complete:a})):("css"!==n.transition&&t[e?"show":"hide"](),a())},addURLQueryParameter:function(t,e,n){var r=new RegExp("(\\?|\\&)"+e+"=.*?(?=(&|$))"),o=(i=t.toString().split("#"))[0],t=i[1],i=o,i=r.test(o)?o.replace(r,"$1"+e+"="+n):/\?.+$/.test(o)?o+"&"+e+"="+n:o+"?"+e+"="+n;return t&&(i+="#"+t),i},removeDuplicateObjects:function(t){return a.reduce(t,function(t,e){var n=!1;return a.each(t,function(t){n=a.keys(t).length===a.keys(e).length&&!a.chain(t).omit(function(t,e){return this[e]===t}.bind(e)).keys().value().length}),n||t.push(e),t},[])},mergeStack:function(t,r){for(var o=[],e=0;e<r;e++)o.push({});return a.each(t,function(t){for(var e=t.length-1,n=0;n<r;n++)o[n]=i.extend(o[n]||{},t[e<n?e:n])}),o},isElementInViewport:isElementInViewport,hasValue:function(t){return"INPUT"===t.tagName?"checkbox"===t.type||"radio"===t.type?t.checked:""!==t.value:"SELECT"===t.tagName?-1!==t.selectedIndex:"TEXTAREA"===t.tagName&&""!==t.value},parseTime:function(t){if(!(t=/^(\d+(?:\.\d+)?)\s*(\w*)/.exec(t)))throw new Error("Invalid time");var e=parseFloat(t[1]);switch(t[2]){case"s":return Math.round(1e3*e);case"m":return Math.round(1e3*e*60);case"ms":default:return Math.round(e)}},findRelatives:function(t){var e=i(t),n=i(t),r=i();return n=(n=n.add(e.closest("label"))).add(e.closest("fieldset")),(r=t.id?i("label[for='"+t.id+"']"):r).length||(r=(e=!(e=e.closest("form")).length?i(document.body):e).find("label[for='"+t.name+"']")),n=n.add(r)},getCSSValue:function(t,e,n){return e=window.getComputedStyle(t).getPropertyValue(e),e=n?parseFloat(e)||0:e}}}),define("pat-compat",[],function(){var o,i,a,u;Array.prototype.every||(Array.prototype.every=function(t){"use strict";if(null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var r=arguments[1],o=0;o<n;o++)if(o in e&&!t.call(r,e[o],o,e))return!1;return!0}),Array.prototype.filter||(Array.prototype.filter=function(t){"use strict";if(null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var r,o=[],i=arguments[1],a=0;a<n;a++)a in e&&(r=e[a],t.call(i,r,a,e)&&o.push(r));return o}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){var n,r;if(null===this)throw new TypeError(" this is null or not defined");var o,i=Object(this),a=i.length>>>0;if("[object Function]"!=={}.toString.call(t))throw new TypeError(t+" is not a function");for(e&&(n=e),r=0;r<a;)r in i&&(o=i[r],t.call(n,o,r,i)),r++}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){"use strict";if(null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0==n)return-1;var r=0;if(0<arguments.length&&((r=Number(arguments[1]))!=r?r=0:0!==r&&r!==1/0&&r!==-1/0&&(r=(0<r||-1)*Math.floor(Math.abs(r)))),n<=r)return-1;for(var o=0<=r?r:Math.max(n-Math.abs(r),0);o<n;o++)if(o in e&&e[o]===t)return o;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){"use strict";if(null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0==n)return-1;var r=n;1<arguments.length&&((r=Number(arguments[1]))!=r?r=0:0!==r&&r!==1/0&&r!==-1/0&&(r=(0<r||-1)*Math.floor(Math.abs(r))));for(var o=0<=r?Math.min(r,n-1):n-Math.abs(r);0<=o;o--)if(o in e&&e[o]===t)return o;return-1}),Array.prototype.map||(Array.prototype.map=function(t,e){var n,r,o;if(null===this)throw new TypeError(" this is null or not defined");var i,a=Object(this),u=a.length>>>0;if("[object Function]"!=={}.toString.call(t))throw new TypeError(t+" is not a function");for(e&&(n=e),r=new Array(u),o=0;o<u;)o in a&&(i=a[o],i=t.call(n,i,o,a),r[o]=i),o++;return r}),Array.prototype.reduce||(Array.prototype.reduce=function(t){if(null==this)throw new TypeError("Object is null or undefined");var e,n=0,r=this.length>>0;if("function"!=typeof t)throw new TypeError("First argument is not callable");if(arguments.length<2){if(0==r)throw new TypeError("Array length is 0 and no second argument");e=this[0],n=1}else e=arguments[1];for(;n<r;)n in this&&(e=t.call(void 0,e,this[n],n,this)),++n;return e}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(t){"use strict";if(null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;if(0==n&&1===arguments.length)throw new TypeError;var r,o=n-1;if(2<=arguments.length)r=arguments[1];else for(;;){if(o in this){r=this[o--];break}if(--o<0)throw new TypeError}for(;0<=o;)o in e&&(r=t.call(void 0,r,e[o],o,e)),o--;return r}),Array.prototype.some||(Array.prototype.some=function(t){"use strict";if(null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var r=arguments[1],o=0;o<n;o++)if(o in e&&t.call(r,e[o],o,e))return!0;return!1}),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");function e(){}function n(){return o.apply(this instanceof e&&t?this:t,r.concat(Array.prototype.slice.call(arguments)))}var r=Array.prototype.slice.call(arguments,1),o=this;return e.prototype=this.prototype,n.prototype=new e,n}),Object.keys||(Object.keys=(o=Object.prototype.hasOwnProperty,i=!{toString:null}.propertyIsEnumerable("toString"),u=(a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(t){if("object"!=typeof t&&"function"!=typeof t||null===t)throw new TypeError("Object.keys called on non-object");var e,n=[];for(e in t)o.call(t,e)&&n.push(e);if(i)for(var r=0;r<u;r++)o.call(t,a[r])&&n.push(a[r]);return n}))}),define("pat-jquery-ext",["jquery"],function(l){var r={init:function(e){var n={time:3,initialTime:8,exceptionAreas:[]};return this.each(function(){var t=l(this);t.data("timeout")||(e&&l.extend(n,e),t.data("timeout",{lastEvent:new Date,trueTime:n.time,time:n.initialTime,untouched:!0,inExceptionArea:!1}),t.on("mouseover.timeout",r.mouseMoved),t.on("mouseenter.timeout",r.mouseMoved),l(n.exceptionAreas).each(function(){t.find(this).live("mouseover.timeout",{parent:t},r.enteredException).live("mouseleave.timeout",{parent:t},r.leftException)}),0<n.initialTime?t.timeout("startTimer"):t.addClass("timeout"))})},enteredException:function(t){var e=t.data.parent.data("timeout");e.inExceptionArea=!0,t.data.parent.data("timeout",e),t.data.parent.trigger("mouseover")},leftException:function(t){var e=t.data.parent.data("timeout");e.inExceptionArea=!1,t.data.parent.data("timeout",e)},destroy:function(){return this.each(function(){var t=l(this),e=t.data("timeout");l(window).off(".timeout"),e.timeout.remove(),t.removeData("timeout")})},mouseMoved:function(){var t=l(this),e=t.data("timeout");t.hasClass("timeout")?(t.removeClass("timeout"),t.timeout("startTimer")):e.untouched&&(e.untouched=!1,e.time=e.trueTime),e.lastEvent=new Date,t.data("timeout",e)},startTimer:function(){var n=l(this),t=n.data("timeout"),r=function(){var t,e=n.data("timeout");e&&e.lastEvent&&(e.inExceptionArea?setTimeout(r,Math.floor(1e3*e.time)):(t=new Date,0<(e=Math.floor(1e3*e.time)-(t-e.lastEvent))?setTimeout(r,100+e):n.addClass("timeout")))};setTimeout(r,Math.floor(1e3*t.time))}};l.fn.timeout=function(t){return r[t]?r[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void l.error("Method "+t+" does not exist on jQuery.timeout"):r.init.apply(this,arguments)},l.extend(l.expr[":"],{scrollable:function(t){return"scroll"===l(t).css("overflow")||"scroll"===l(t).css("overflowX")||"scroll"===l(t).css("overflowY")||(t.clientHeight<t.scrollHeight&&(-1!==l.inArray(l(t).css("overflowY"),["scroll","auto"])||-1!==l.inArray(l(t).css("overflow"),["scroll","auto"]))||t.clientWidth<t.scrollWidth&&(-1!==l.inArray(l(t).css("overflowX"),["scroll","auto"])||-1!==l.inArray(l(t).css("overflow"),["scroll","auto"])))}}),l.fn.makeVisibleInScroll=function(t){var a=null;return"string"==typeof t?a=l("#"+t):t&&(a=l(t)),this.each(function(){var t=l(this),e=a||(0<(e=t.parents(":scrollable")).length?l(e[0]):l(window)),n=t.position().top,r=t.height()+n,o=e.scrollTop(),i=e.height()+o;n<o?e.scrollTop(n):r>i-e.height()/2&&e.scrollTop(n-(e.height()-t.height())/2)})},l.fn.safeOffset=function(){var t,e=this[0],n={top:0,left:0};return e&&e.nodeType?(t=(e.ownerDocument||document).documentElement,jQuery.contains(t,e)?jQuery.fn.offset.apply(this,arguments):n):n},l.fn.setPositionAbsolute=function(i,a,u){return this.each(function(){var t=l(this),e=l(this).width(),n=i.safeOffset(),r=i.width(),o=i.height(),r=n.left+r-e+u,o=n.top+o+a;t.css({"z-index":1,position:"absolute",marginLeft:0,marginTop:0,left:r+"px",top:o+"px",width:e}),t.remove().appendTo("body").show()})},l.fn.positionAncestor=function(o){var i=0,a=0;return this.each(function(){var t=l(this).closest(o);if(t.length&&"static"!==t.css("position")){var e=l(this),n=e.safeOffset().left-parseInt(e.css("marginLeft"),10),r=e.safeOffset().top-parseInt(e.css("marginTop"),10),e=t.safeOffset().left+parseInt(t.css("borderLeftWidth"),10),t=t.safeOffset().top+parseInt(t.css("borderTopWidth"),10);return i=n-e,a=r-t,!1}}),{left:i,top:a}},String.prototype.startsWith||(String.prototype.startsWith=function(t){return null!==this.match("^"+t)}),String.prototype.endsWith||(String.prototype.endsWith=function(t){return null!==this.match(t+"$")}),l.simplePlaceholder={placeholder_class:null,hide_placeholder:function(){var t=l(this);t.val()===t.attr("placeholder")&&t.val("").removeClass(l.simplePlaceholder.placeholder_class)},show_placeholder:function(){var t=l(this);""===t.val()&&t.val(t.attr("placeholder")).addClass(l.simplePlaceholder.placeholder_class)},prevent_placeholder_submit:function(){return l(this).find(".simple-placeholder").each(function(){var t=l(this);t.val()===t.attr("placeholder")&&t.val("")}),!0}},l.fn.simplePlaceholder=function(t){var e;return void 0===document.createElement("input").placeholder&&(e={placeholder_class:"placeholding"},t&&l.extend(e,t),l.simplePlaceholder.placeholder_class=e.placeholder_class,this.each(function(){var t=l(this);t.focus(l.simplePlaceholder.hide_placeholder),t.blur(l.simplePlaceholder.show_placeholder),""===t.val()&&(t.val(t.attr("placeholder")),t.addClass(l.simplePlaceholder.placeholder_class)),t.addClass("simple-placeholder"),l(this.form).submit(l.simplePlaceholder.prevent_placeholder_submit)})),this},l.fn.findInclusive=function(t){return this.find("*").addBack().filter(t)},l.fn.slideIn=function(t,e,n){return this.animate({width:"show"},t,e,n)},l.fn.slideOut=function(t,e,n){return this.animate({width:"hide"},t,e,n)},l.expr[":"].Contains=function(t,e,n){return 0<=l(t).text().toUpperCase().indexOf(n[3].toUpperCase())},l.fn.scopedFind=function(t){return t.startsWith("#")?l(t):this.find(t)}}),define("pat-registry",["jquery","underscore","pat-logger","pat-utils","pat-compat","pat-jquery-ext"],function(o,i,a,r){for(var t,u=a.getLogger("registry"),e=/patterns-disable=([^&]+)/g,n=/patterns-dont-catch/g,l=!1,s={};null!==(t=e.exec(window.location.search));)s[t[1]]=!0,u.info("Pattern disabled via url config:",t[1]);for(;null!==(t=n.exec(window.location.search));)l=!0,u.info("I will not catch init exceptions");var c={patterns:{},initialized:!1,init:function(){o(document).ready(function(){u.info("loaded: "+Object.keys(c.patterns).sort().join(", ")),c.scan(document.body),c.initialized=!0,u.info("finished initial scan.")})},clear:function(){this.patterns={}},transformPattern:function(e,t){if(s[e])u.debug("Skipping disabled pattern:",e);else{var n=c.patterns[e];if(n.transform)try{n.transform(o(t))}catch(t){if(l)throw t;u.error("Transform error for pattern"+e,t)}}},initPattern:function(t,e,n){var r=o(e),e=c.patterns[t];if(e.init&&(plog=a.getLogger("pat."+t),r.is(e.trigger))){plog.debug("Initialising:",r);try{e.init(r,null,n),plog.debug("done.")}catch(t){if(l)throw t;plog.error("Caught error:",t)}}},orderPatterns:function(t){return i.contains(t,"validation")&&i.contains(t,"inject")&&(t.splice(t.indexOf("validation"),1),t.unshift("validation")),t},scan:function(t,n,r){var e=[];(n=this.orderPatterns(n||Object.keys(c.patterns))).forEach(i.partial(this.transformPattern,i,t)),n=i.each(n,function(t){t=c.patterns[t];t.trigger&&e.unshift(t.trigger)}),o(t).findInclusive(e.join(",")).filter(function(){return 0===o(this).parents("pre").length}).filter(":not(.cant-touch-this)").toArray().reduceRight(function(t,e){n.forEach(i.partial(this.initPattern,i,e,r))}.bind(this),null),o("body").addClass("patterns-loaded")},register:function(t,e){var n;return(e=e||t.name)?c.patterns[e]?(u.error("Already have a pattern called: "+e),!1):((c.patterns[e]=t).jquery_plugin&&(n=("pat-"+e).replace(/-([a-zA-Z])/g,function(t,e){return e.toUpperCase()}),o.fn[n]=r.jqueryPlugin(t),o.fn[n.replace(/^pat/,"pattern")]=o.fn[n]),u.debug("Registered pattern:",e,t),c.initialized&&c.scan(document.body,[e]),!0):(u.error("Pattern lacks a name:",t),!1)}};return c}),define("pat-mockup-parser",["jquery"],function(a){"use strict";return{getOptions:function t(e,n,r){r=r||{},0===e.length||a.nodeName(e[0],"body")||(r=t(e.parent(),n,r));var o,i={};return 0!==e.length&&(i=e.data("pat-"+n))&&"string"==typeof i&&(o={},a.each(i.split(";"),function(t,e){(e=e.split(":")).reverse();var n=(n=e.pop()).replace(/^\s+|\s+$/g,"");e.reverse();e=(e=e.join(":")).replace(/^\s+|\s+$/g,"");o[n]=e}),i=o),a.extend(!0,{},r,i)}}}),define("pat-base",["jquery","pat-registry","pat-mockup-parser","pat-logger"],function(o,a,u,l){"use strict";function i(t,e,n){var r=this.prototype.name,o=l.getLogger("pat."+r),i=t.data("pattern-"+r);if(void 0===i&&a.patterns[r]){try{e="mockup"===this.prototype.parser?u.getOptions(t,r,e):e,i=new a.patterns[r](t,e,n)}catch(t){o.error("Failed while initializing '"+r+"' pattern.",t)}t.data("pattern-"+r,i)}return i}function s(t,e,n){this.$el=t,this.options=o.extend(!0,{},this.defaults||{},e||{}),this.init(t,e,n),this.emit("init")}var c=l.getLogger("Patternslib Base");return s.prototype={constructor:s,on:function(t,e){this.$el.on(t+"."+this.name+".patterns",e)},emit:function(t,e){this.$el.trigger(t+"."+this.name+".patterns",e=void 0===e?[]:e)}},s.extend=function(t){var e,n=this;if(!t)throw new Error("Pattern configuration properties required when calling Base.extend");(e=t.hasOwnProperty("constructor")?t.constructor:function(){n.apply(this,arguments)}).extend=s.extend,e.init=i,e.jquery_plugin=!0,e.trigger=t.trigger;function r(){this.constructor=e}return r.prototype=n.prototype,e.prototype=new r,o.extend(!0,e.prototype,t),e.__super__=n.prototype,t.name?t.trigger?a.register(e,t.name):c.warn("The pattern '"+t.name+"' does not have a trigger attribute, it will not be registered."):c.warn("This pattern without a name attribute will not be registered!"),e},s}),window.jQuery&&define("jquery",[],function(){"use strict";return window.jQuery.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),window.jQuery}),require(["jquery","pat-registry","pat-base","pat-logger","pat-mockup-parser"],function(o,t){"use strict";window.parent!==window&&"IFRAME"!==window.frameElement.nodeName||o(document).ready(function(){o("body").addClass("pat-plone"),t.initialized||t.init()}),o(document).ready(function(){!0!=("selected"===o("#form-widgets-use_cookie_negotiation > input").value)?o("#formfield-form-widgets-authenticated_users_only").hide():o("#formfield-form-widgets-authenticated_users_only").show()}),o(document).ready(function(){function t(t){var e=o("#form-widgets-highpixeldensity_scales option:selected").attr("value"),n=o('div[data-fieldname="form.widgets.quality_2x"]'),r=o('div[data-fieldname="form.widgets.quality_3x"]');"disabled"==e?(n.fadeOut(),r.fadeOut()):"2x"==e?(n.fadeIn(),r.fadeOut()):"3x"==e&&(n.fadeIn(),r.fadeIn())}o("#ImagingSettings")&&(o('div[data-fieldname="form.widgets.quality_2x"]').hide(),o('div[data-fieldname="form.widgets.quality_3x"]').hide(),t(),o("#form-widgets-highpixeldensity_scales").change(t))})}),define("/Users/peter/workspace/buildout.coredev6/src/plone.staticresources/src/plone/staticresources/static/plone-base.js",function(){});
//# sourceMappingURL=plone-base-compiled.min.js.map