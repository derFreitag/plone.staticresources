"use strict";(self.webpackChunkplone_staticresources=self.webpackChunkplone_staticresources||[]).push([[58133],{58133:function(t,e,r){r.r(e),r.d(e,{default:function(){return Ee}});var n=r(23299),o=r.n(n),i=r(39053),a=r.n(i),s=r(10354),c=r(32218),l=r(62832),u=r(7424),h=r(54771),p=r.n(h),f=r(5749),d=r.n(f),v=d().View.extend({isUIView:!0,eventPrefix:"ui",template:null,idPrefix:"base-",appendInContainer:!0,initialize:function(t){for(var e in this.options=t,this.options)this[e]=this.options[e];this.options._t=s.Z},render:function(){return this.applyTemplate(),this.trigger("render",this),this.afterRender(),this.options.id&&this.$el.attr("id",this.idPrefix+this.options.id),this},afterRender:function(){},serializedModel:function(){return this.options},applyTemplate:function(){if(null!==this.template){var t=o().extend({_t:s.Z},this.options,this.serializedModel()),e=this.template;"string"==typeof e&&(e=a().template(e)),this.$el.html(e(t))}},propagateEvent:function(t){if(t.indexOf(":")>0){var e=t.split(":")[0];if(""!==this.eventPrefix&&(e===this.eventPrefix||e===this.eventPrefix+"."+this.id))return!0}return!1},uiEventTrigger:function(t){var e=[].slice.call(arguments,0);""!==this.eventPrefix&&(e[0]=this.eventPrefix+":"+t,d().View.prototype.trigger.apply(this,e),this.id&&(e[0]=this.eventPrefix+"."+this.id+":"+t,d().View.prototype.trigger.apply(this,e)))}}),y=v.extend({id:"",items:[],itemContainer:null,isOffsetParent:!0,idPrefix:"container-",render:function(){return this.options.id&&this.$el.attr("id",this.idPrefix+this.options.id),this.applyTemplate(),this.renderItems(),this.bindEvents(),this.isOffsetParent&&this.$el.addClass("ui-offset-parent"),this.trigger("render",this),this.afterRender(),this.$el.data("component",this),this},renderItems:function(){var t;if(null!==this.itemContainer){if(0===(t=o()(this.itemContainer,this.$el)).length)throw"Item Container element not found."}else t=this.$el;a().each(this.items,(function(e){!0===e.appendInContainer?t.append(e.render().$el):e.render()}),this)},bindEvents:function(){var t=this;a().each(this.items,(function(e){e.on("all",(function(){var e,r=[].slice,n=arguments[0],o=""!==t.id?t.id+"."+n:n;if(arguments.length>1&&(e=arguments[1]),o!==n){var i=r.call(arguments,0);i[0]=o,t.trigger.apply(t,i)}void 0!==e&&!0===e.isUIView&&!0===e.propagateEvent(n)&&t.trigger.apply(t,arguments)}))}))},get:function(t){return a().findWhere(this.items,{id:t})},add:function(t){if(void 0!==t.id&&this.get(t.id))throw"Another item with the same `id` already exists.";this.items.push(t)}}),g=y.extend({tagName:"div",className:"navbar",idPrefix:"toolbar-"}),m=y.extend({tagName:"div",className:"btn-group",idPrefix:"btngroup-",disable:function(){a().each(this.items,(function(t){t.disable()}))},enable:function(){a().each(this.items,(function(t){t.enable()}))}}),b=r(36382);function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function x(){x=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new L(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return C()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=_(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function h(){}function p(){}function f(){}var d={};s(d,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(k([])));y&&y!==e&&r.call(y,o)&&(d=y);var g=f.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==w(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function _(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function k(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=f,s(g,"constructor",f),s(f,"constructor",p),p.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function _(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function S(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){_(i,n,o,a,s,"next",t)}function s(t){_(i,n,o,a,s,"throw",t)}a(void 0)}))}}var E=v.extend({tagName:"a",className:"btn",eventPrefix:"button",context:"outline-secondary",idPrefix:"btn-",attributes:{href:"#"},extraClasses:[],tooltip:null,template:"<%= title %>",events:{click:"handleClick"},initialize:function(t){if(!t.id){var e=t.title||"";t.id=""!==e?e.toLowerCase().replace(" ","-"):this.cid}v.prototype.initialize.apply(this,[t]),this.on("render",S(x().mark((function t(){var e,r;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$el.attr("title",this.options.title||""),this.$el.attr("aria-label",this.options.title||this.options.tooltip||""),null!==this.context&&this.$el.addClass("btn-"+this.context),a().each(this.extraClasses,function(t){this.$el.addClass(t)}.bind(this)),!this.icon||"string"!=typeof this.icon){t.next=10;break}return t.next=7,l.Z.resolveIcon(this.icon);case 7:e=t.sent,(r=c.Z.create_from_string(e))&&this.$el.prepend(r);case 10:null!==this.tooltip&&(this.$el.attr("title",this.tooltip),new b.Z(this.$el),this.$el.on("hidden",(function(t){"hidden"===t.type&&t.stopPropagation()})));case 11:case"end":return t.stop()}}),t,this)}))),this)},handleClick:function(t){t.preventDefault(),this.$el.is(".disabled")||this.uiEventTrigger("click",this,t)},serializedModel:function(){return a().extend({icon:"",title:""},this.options)},disable:function(){this.$el.addClass("disabled")},enable:function(){this.$el.removeClass("disabled")}}),L=r(18742),k=r(50033),C=(r(43067),{openItem:{url:"#",title:(0,s.Z)("Open"),category:"button",icon:"plone-view",css:"",modal:!1},editItem:{url:"#",title:(0,s.Z)("Edit"),category:"button",icon:"plone-edit",css:"",modal:!1},cutItem:{method:"cutClicked",url:"#",title:(0,s.Z)("Cut"),category:"dropdown",icon:"plone-cut",css:"",modal:!1},copyItem:{method:"copyClicked",url:"#",title:(0,s.Z)("Copy"),category:"dropdown",icon:"plone-copy",css:"",modal:!1},pasteItem:{method:"pasteClicked",url:"#",title:(0,s.Z)("Paste"),category:"dropdown",icon:"plone-paste",css:"",modal:!1},"move-top":{method:"moveTopClicked",url:"#",title:(0,s.Z)("Move to top of folder"),category:"dropdown",icon:"arrow-bar-up",css:"",modal:!1},"move-bottom":{method:"moveBottomClicked",url:"#",title:(0,s.Z)("Move to bottom of folder"),category:"dropdown",icon:"arrow-bar-down",css:"",modal:!1},"set-default-page":{method:"setDefaultPageClicked",url:"#",title:(0,s.Z)("Set as default page"),category:"dropdown",icon:"check-circle",css:"",modal:!1},selectAll:{method:"selectAll",url:"#",title:(0,s.Z)("Select all contained items"),category:"dropdown",icon:"check-all",css:"",modal:!1}}),O=function(t){if(null!==t.app.menuOptions)return t.app.menuOptions;var e=t.model.attributes,r=t.app,n=!!r.options.moveUrl,o=JSON.parse(JSON.stringify(C));r.pasteAllowed()&&e.is_folderish||delete o.pasteItem,(r.inQueryMode()||!1===n)&&(delete o["move-top"],delete o["move-bottom"]),-1!==r.defaultPageTypes.indexOf(e.portal_type)&&r.setDefaultPageUrl||delete o["set-default-page"],e.is_folderish||delete o.selectAll;var i=r.options.typeToViewAction,a=i&&i[e.portal_type]||"";return o.openItem.url=e.getURL+a,o.editItem.url=e.getURL+"/edit",o},P=d().Model.extend({defaults:function(){return{is_folderish:!1,review_state:"",getURL:""}},uid:function(){return this.attributes.UID}});function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function $(){$=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function h(){}function p(){}function f(){}var d={};s(d,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==e&&r.call(y,o)&&(d=y);var g=f.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==j(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=f,s(g,"constructor",f),s(f,"constructor",p),p.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function T(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return N(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function N(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function A(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function I(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){A(i,n,o,a,s,"next",t)}function s(t){A(i,n,o,a,s,"throw",t)}a(void 0)}))}}var D,Z,U,G=d().Model.extend({initialize:function(t){this.options=t,this.app=t.app,this.model=t.model,this.selectedCollection=this.app.selectedCollection},selectAll:(U=I($().mark((function t(e){var r,n,o,i=this;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),r=1,n=0,o=function(){var t=I($().mark((function t(){var e,a,s,c,l,u,h;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.app.loading.show(),(e=new URL(i.app.collection.url)).searchParams.append("query",i.app.collection.queryParser({searchPath:i.model.attributes.path})),e.searchParams.append("batch",JSON.stringify({page:r,size:100})),e.searchParams.append("attributes",JSON.stringify(i.app.collection.queryHelper.options.attributes)),t.next=7,fetch(e,{headers:{Accept:"application/json"}});case 7:return a=t.sent,t.next=10,a.json();case 10:s=t.sent,c=i.app.collection.parse(s,n),n+=c.length,l=T(c);try{for(l.s();!(u=l.n()).done;)h=u.value,i.app.selectedCollection.add(new P(h))}catch(t){l.e(t)}finally{l.f()}if(r+=1,!(s.total>n)){t.next=21;break}return t.next=19,o();case 19:t.next=24;break;case 21:return i.app.loading.hide(),t.next=24,i.app.tableView.render();case 24:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=6,o();case 6:case"end":return t.stop()}}),t)}))),function(t){return U.apply(this,arguments)}),doAction:(Z=I($().mark((function t(e,r,n){var o,i,a,c,u;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=new URL(this.app.buttons.get(e).options.url),t.next=3,fetch(o,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"POST",body:new URLSearchParams({selection:JSON.stringify([this.model.attributes.UID]),folder:this.model.attributes.path,_authenticator:l.Z.getAuthenticator()})});case 3:return i=t.sent,t.next=6,i.json();case 6:a=t.sent,u="warning","success"===a.status?(c=(0,s.Z)("".concat(r,' "').concat(this.model.attributes.Title,'"')),this.app.collection.fetch(),this.app.updateButtons()):(c=(0,s.Z)("Error")+": ".concat(n,' "').concat(this.model.attributes.Title,'"'),u="danger"),this.app.clearStatus(),this.app.setStatus({text:c,type:a.status||u});case 11:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return Z.apply(this,arguments)}),cutClicked:function(t){t.preventDefault(),this.doAction("cut",(0,s.Z)("Cut"),(0,s.Z)("cutting"))},copyClicked:function(t){t.preventDefault(),this.doAction("copy",(0,s.Z)("Copied"),(0,s.Z)("copying"))},pasteClicked:function(t){t.preventDefault(),this.doAction("paste",(0,s.Z)("Pasted into"),(0,s.Z)("Error pasting into"))},moveTopClicked:function(t){t.preventDefault(),this.app.moveItem(this.model.attributes.id,"top")},moveBottomClicked:function(t){t.preventDefault(),this.app.moveItem(this.model.attributes.id,"bottom")},setDefaultPageClicked:(D=I($().mark((function t(e){var r,n,o;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.prev=1,r=new URL(this.app.getAjaxUrl(this.app.setDefaultPageUrl)),t.next=5,fetch(r,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},method:"POST",body:new URLSearchParams({id:this.model.attributes.id,_authenticator:l.Z.getAuthenticator()})});case 5:return n=t.sent,t.next=8,n.json();case 8:o=t.sent,this.app.ajaxSuccessResponse.apply(this.app,[o]),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),this.app.ajaxSuccessResponse.apply(this.app,[t.t0]);case 15:case"end":return t.stop()}}),t,this,[[1,12]])}))),function(t){return D.apply(this,arguments)})});function F(t){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},F(t)}function V(){V=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function h(){}function p(){}function f(){}var d={};s(d,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==e&&r.call(y,o)&&(d=y);var g=f.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==F(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=f,s(g,"constructor",f),s(f,"constructor",p),p.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function M(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function z(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){M(i,n,o,a,s,"next",t)}function s(t){M(i,n,o,a,s,"throw",t)}a(void 0)}))}}var R,q,B=v.extend({className:"btn-group actionmenu",template:a().template('<% _.each(menuOptions.button, (menuOption) => { %>\n<a class="btn btn-sm action pat-tooltip <%- menuOption.classes.join(\' \') %>"\n    href="<%- menuOption.url %>"\n    title="<%- _t(menuOption.title) %>"\n    aria-label="<%- _t(menuOption.title) %>">\n  <% if (menuOption.iconSVG) { %>\n    <%= menuOption.iconSVG %>\n  <% } else { %>\n  <%- _t(menuOption.title) %>\n  <% } %>\n</a>\n<% }); %>\n\n\n<% if (menuOptions.dropdown) { %>\n<div class="dropdown">\n  <button class="dropdown-toggle btn btn-sm"\n      type="button"\n      data-bs-toggle="dropdown"\n      aria-haspopup="true"\n      aria-expanded="false"\n      id="<%- id %>"\n      title=\'<%- _t("Actions") %>\'>\n    <%= dropdownIcon %><span class="caret"></span>\n  </button>\n  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="<%- id %>">\n    <% if (header) { %>\n      <li class="dropdown-header"><%- header %></li>\n      <li class="divider"></li>\n    <% } %>\n\n    <% _.each(menuOptions.dropdown, (menuOption) => { %>\n    <li>\n      <a class="dropdown-item action <%- menuOption.classes.join(\' \') %>"\n          href="<%- menuOption.url %>">\n        <% if (menuOption.iconSVG) { %>\n          <%= menuOption.iconSVG %>\n        <% } %>\n        <%- _t(menuOption.title) %>\n      </a>\n    </li>\n    <% }); %>\n  </ul>\n</div>\n<% } %>\n'),menuOptions:null,generate_events:function(){var t=this,e={};return a().each(this.menuOptions,(function(r,n){var o=r.method;if(!o||!t.actions[o])return!1;e["click a.".concat(n)]=t.actions[o].bind(t.actions)})),e},initialize:function(t){this.actions=new G(t),v.prototype.initialize.apply(this,[t]),this.options=t,this.selectedCollection=this.app.selectedCollection,this.menuOptions=O(this),this.events=this.generate_events(),this.delegateEvents()},menuOptionsCategorized:(q=z(V().mark((function t(){var e;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={},a().each(this.menuOptions,function(){var t=z(V().mark((function t(r,n){var o;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.idx=l.Z.generateId(),r.name=n,o=r.category||"dropdown",void 0===e[o]&&(e[o]=[]),e[o].push(r),r.classes=[r.name,r.idx],r.css&&r.classes.push(r.css),!0===r.modal&&(r.css+=" pat-plone-modal"),!r.icon){t.next=12;break}return t.next=11,l.Z.resolveIcon(r.icon);case 11:r.iconSVG=t.sent;case 12:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),t.abrupt("return",e);case 3:case"end":return t.stop()}}),t,this)}))),function(){return q.apply(this,arguments)}),render:(R=z(V().mark((function t(){var e;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.el.innerHTML="",(e=this.model.toJSON()).header=this.options.header||null,t.next=5,this.menuOptionsCategorized();case 5:return e.menuOptions=t.sent,t.t0=this,t.t1=o(),t.next=10,l.Z.resolveIcon("plone-settings");case 10:return t.t2=t.sent,t.t3=s.Z,t.t4=l.Z.generateId(),t.t5={dropdownIcon:t.t2,_t:t.t3,id:t.t4},t.t6=e,t.t7=t.t1.extend.call(t.t1,t.t5,t.t6),this.el.innerHTML=t.t0.template.call(t.t0,t.t7),this.options.className&&this.$el.addClass(this.options.className),k.Z.scan(this.$el),t.abrupt("return",this.el);case 20:case"end":return t.stop()}}),t,this)}))),function(){return R.apply(this,arguments)})});function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function J(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return H(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function K(){K=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function h(){}function p(){}function f(){}var d={};s(d,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==e&&r.call(y,o)&&(d=y);var g=f.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==Y(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=f,s(g,"constructor",f),s(f,"constructor",p),p.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function W(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var Q=d().View.extend({tagName:"tr",className:"itemRow",template:a().template('<td class="selection" data-order="<%- attributes[\'_sort\'] %>"><label for="select<%- attributes[\'_sort\'] %>InputCheckbox" class="hiddenStructure" aria-label="<%- _t(\'Select\') %>"><%- _t(\'Select\') %></label><input class="form-check-input" id="select<%- attributes[\'_sort\'] %>InputCheckbox" <% if(selected){ %> checked="checked" <% } %> type="checkbox"/></td>\n\n<td class="title">\n  <div>\n    <div>\n      <a href="<%- viewURL %>"\n          class="manage state-<%- review_state %> contenttype-<%- contenttype %>"\n          title="<%- portal_type %>">\n        <%= mimeIcon %>\n        <% if(Title){ %>\n          <%- Title %>\n        <% } else { %>\n          <em><%- id %></em>\n        <% } %>\n      </a>\n      <% if(exclude_from_nav){ %>\n        <span class="badge text-bg-secondary plone-item-exclude-from-nav"><%- _t(\'Excluded from navigation\') %></span>\n      <% } %>\n      <% if(expired){ %>\n        <span class="badge text-bg-danger plone-item-expired"><%- _t(\'Expired\') %></span>\n      <% } %>\n      <% if(ineffective){ %>\n        <span class="badge text-bg-warning plone-item-ineffective"><%- _t(\'Before publishing date\') %></span>\n      <% } %>\n      <% if(activeColumns.indexOf(\'Description\') !== -1 && _.has(availableColumns, \'Description\') && Description) { %>\n      <p class="Description">\n        <small>\n          <%- Description %>\n        </small>\n      </p>\n      <% } %>\n    </div>\n    <% if(attributes["getIcon"] && thumb_scale) { %>\n      <div class="lead-img">\n        <img class="thumb-<%- thumb_scale %>" alt="<%- _t(\'Preview image\') %> <%- Title || id %>" src="<%- getURL %>/@@images/image/<%- thumb_scale %>">\n      </div>\n    <% } %>\n  </div>\n</td>\n\n<% _.each(activeColumns, (column) => { %>\n  <% if(column !== \'Description\' && _.has(availableColumns, column)) { %>\n    <td class="<%- column %>" data-order="<%- attributes[column] %>"><%- convertColumnValue(column, attributes[column]) %></td>\n  <% } %>\n<% }); %>\n\n<td class="actionmenu-container"></td>\n'),events:{"change input":"itemSelected","click td.title a.manage":"itemClicked"},initialize:function(t){this.options=t,this.app=t.app,this.selectedCollection=this.app.selectedCollection,this.table=this.options.table,this.now=new Date,this.listenTo(this.table,"context-info:set",this.render)},expired:function(t){if(!t.attributes.ExpirationDate)return!1;var e=new Date(t.attributes.ExpirationDate);return this.now>e},ineffective:function(t){if(!t.attributes.EffectiveDate)return!1;var e=new Date(t.attributes.EffectiveDate);return this.now<e},render:function(){var t,e=(t=K().mark((function t(){var e,r,n,i,a;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=this.model.toJSON()).selected=!!this.selectedCollection.findWhere({UID:r.UID}),r.attributes=this.model.attributes,r.activeColumns=this.app.activeColumns,r.availableColumns=this.app.availableColumns,r.portal_type=r.portal_type?r.portal_type:"",r.contenttype=r.portal_type.toLowerCase().replace(/\.| /g,"-"),r._authenticator=l.Z.getAuthenticator(),r.thumb_scale=this.app.thumb_scale,t.next=11,l.Z.resolveIcon("contenttype/".concat(r.contenttype));case 11:return r.mimeIcon=t.sent,n=this.app.typeToViewAction&&this.app.typeToViewAction[r.attributes.portal_type]||"",r.viewURL=r.attributes.getURL+n,r._t=s.Z,r.convertColumnValue=this.convertColumnValue.bind(this),r.expired=this.expired(r),r.ineffective=this.ineffective(r),r.exclude_from_nav=r.exclude_from_nav||!1,this.$el.html(this.template(r)),i=this.model.attributes,this.$el.addClass(["state-".concat(i.review_state),"type-".concat(i.portal_type)]),this.$el.attr("data-path",r.path),this.$el.attr("data-UID",r.UID),this.$el.attr("data-id",r.id),this.$el.attr("data-type",r.portal_type),this.$el.attr("data-folderish",r.is_folderish),this.$el.toggleClass("folder",r.is_folderish),this.$el.toggleClass("default-page",r.id===(null===(e=this.table.contextInfo)||void 0===e?void 0:e.defaultPage)),this.$el.toggleClass("expired",r.expired),this.$el.toggleClass("ineffective",r.ineffective),this.el.model=this.model,a=new B({app:this.app,model:this.model}),t.t0=o()(".actionmenu-container",this.$el),t.next=36,a.render();case 36:return t.t1=t.sent,t.t0.append.call(t.t0,t.t1),t.abrupt("return",this);case 39:case"end":return t.stop()}}),t,this)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){W(i,n,o,a,s,"next",t)}function s(t){W(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}(),convertColumnValue:function(t,e){if(this.table.dateColumns.includes(t)){var r=new Date(e);return r instanceof Date&&"Invalid Date"===r.toString()?e:r.toLocaleString(this.app.language,this.app.dateFormat)}return e},itemClicked:function(t){var e=this.app.keyEvent;if(e&&e.ctrlKey||!this.model.attributes.is_folderish)return null;t.preventDefault(),this.app.setCurrentPath(this.model.attributes.path),this.app.collection.getFirstPage()},itemSelected:function(){var t=this.$("input")[0],e=this.app.selectedCollection;t.checked?e.add(this.model.clone()):e.removeResult(this.model);var r=this.app.keyEvent;if(r&&r.shiftKey&&this.app.last_selected&&null!==this.app.last_selected.parentNode){var n,i=o()(this.app.last_selected),a=i.index(),s=this.$el.index(),c=J(this.app.tableView.$('input[type="checkbox"]'));try{for(c.s();!(n=c.n()).done;){var l=n.value,u=(i=o()(l)).parents("tr").index();if(u>a&&u<s||u<a&&u>s){this.checked=t.checked;var h=o()(this).closest("tr.itemRow");if(h.length>0){var p=h[0].model,f=e.getByUID(p.attributes.UID);this.checked?f||e.add(p.clone()):f&&e.removeResult(f)}}}}catch(t){c.e(t)}finally{c.f()}}this.app.last_selected=this.el}}),X=r(71015);r(62027);const tt="transitionend",et=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let r=t.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),e=r&&"#"!==r?r.trim():null}return e},rt=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),nt=t=>rt(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(t):null,ot=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,it=[],at=t=>{"function"==typeof t&&t()},st=(t,e,r=!0)=>{if(!r)return void at(t);const n=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:r}=window.getComputedStyle(t);const n=Number.parseFloat(e),o=Number.parseFloat(r);return n||o?(e=e.split(",")[0],r=r.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(r))):0})(e)+5;let o=!1;const i=({target:r})=>{r===e&&(o=!0,e.removeEventListener(tt,i),at(t))};e.addEventListener(tt,i),setTimeout((()=>{o||e.dispatchEvent(new Event(tt))}),n)},ct=/[^.]*(?=\..*)\.|.*/,lt=/\..*/,ut=/::\d+$/,ht={};let pt=1;const ft={mouseenter:"mouseover",mouseleave:"mouseout"},dt=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function vt(t,e){return e&&`${e}::${pt++}`||t.uidEvent||pt++}function yt(t){const e=vt(t);return t.uidEvent=e,ht[e]=ht[e]||{},ht[e]}function gt(t,e,r=null){return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===r))}function mt(t,e,r){const n="string"==typeof e,o=n?r:e||r;let i=_t(t);return dt.has(i)||(i=t),[n,o,i]}function bt(t,e,r,n,o){if("string"!=typeof e||!t)return;let[i,a,s]=mt(e,r,n);if(e in ft){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};a=t(a)}const c=yt(t),l=c[s]||(c[s]={}),u=gt(l,a,i?r:null);if(u)return void(u.oneOff=u.oneOff&&o);const h=vt(a,e.replace(ct,"")),p=i?function(t,e,r){return function n(o){const i=t.querySelectorAll(e);for(let{target:a}=o;a&&a!==this;a=a.parentNode)for(const s of i)if(s===a)return Et(o,{delegateTarget:a}),n.oneOff&&St.off(t,o.type,e,r),r.apply(a,[o])}}(t,r,a):function(t,e){return function r(n){return Et(n,{delegateTarget:t}),r.oneOff&&St.off(t,n.type,e),e.apply(t,[n])}}(t,a);p.delegationSelector=i?r:null,p.callable=a,p.oneOff=o,p.uidEvent=h,l[h]=p,t.addEventListener(s,p,i)}function wt(t,e,r,n,o){const i=gt(e[r],n,o);i&&(t.removeEventListener(r,i,Boolean(o)),delete e[r][i.uidEvent])}function xt(t,e,r,n){const o=e[r]||{};for(const i of Object.keys(o))if(i.includes(n)){const n=o[i];wt(t,e,r,n.callable,n.delegationSelector)}}function _t(t){return t=t.replace(lt,""),ft[t]||t}const St={on(t,e,r,n){bt(t,e,r,n,!1)},one(t,e,r,n){bt(t,e,r,n,!0)},off(t,e,r,n){if("string"!=typeof e||!t)return;const[o,i,a]=mt(e,r,n),s=a!==e,c=yt(t),l=c[a]||{},u=e.startsWith(".");if(void 0===i){if(u)for(const r of Object.keys(c))xt(t,c,r,e.slice(1));for(const r of Object.keys(l)){const n=r.replace(ut,"");if(!s||e.includes(n)){const e=l[r];wt(t,c,a,e.callable,e.delegationSelector)}}}else{if(!Object.keys(l).length)return;wt(t,c,a,i,o?r:null)}},trigger(t,e,r){if("string"!=typeof e||!t)return null;const n=ot();let o=null,i=!0,a=!0,s=!1;e!==_t(e)&&n&&(o=n.Event(e,r),n(t).trigger(o),i=!o.isPropagationStopped(),a=!o.isImmediatePropagationStopped(),s=o.isDefaultPrevented());let c=new Event(e,{bubbles:i,cancelable:!0});return c=Et(c,r),s&&c.preventDefault(),a&&t.dispatchEvent(c),c.defaultPrevented&&o&&o.preventDefault(),c}};function Et(t,e){for(const[r,n]of Object.entries(e||{}))try{t[r]=n}catch{Object.defineProperty(t,r,{configurable:!0,get:()=>n})}return t}var Lt=St;const kt=new Map;var Ct={set(t,e,r){kt.has(t)||kt.set(t,new Map);const n=kt.get(t);n.has(e)||0===n.size?n.set(e,r):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`)},get:(t,e)=>kt.has(t)&&kt.get(t).get(e)||null,remove(t,e){if(!kt.has(t))return;const r=kt.get(t);r.delete(e),0===r.size&&kt.delete(t)}};function Ot(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!=typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function Pt(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}var jt={setDataAttribute(t,e,r){t.setAttribute(`data-bs-${Pt(e)}`,r)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${Pt(e)}`)},getDataAttributes(t){if(!t)return{};const e={},r=Object.keys(t.dataset).filter((t=>t.startsWith("bs")&&!t.startsWith("bsConfig")));for(const n of r){let r=n.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),e[r]=Ot(t.dataset[n])}return e},getDataAttribute:(t,e)=>Ot(t.getAttribute(`data-bs-${Pt(e)}`))};var $t=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const r=rt(e)?jt.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"==typeof r?r:{},...rt(e)?jt.getDataAttributes(e):{},..."object"==typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const n of Object.keys(e)){const o=e[n],i=t[n],a=rt(i)?"element":null==(r=i)?`${r}`:Object.prototype.toString.call(r).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(o).test(a))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${a}" but expected type "${o}".`)}var r}};var Tt=class extends $t{constructor(t,e){super(),(t=nt(t))&&(this._element=t,this._config=this._getConfig(e),Ct.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Ct.remove(this._element,this.constructor.DATA_KEY),Lt.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,r=!0){st(t,e,r)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Ct.get(nt(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.2.0"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}};class Nt extends Tt{static get NAME(){return"alert"}close(){if(Lt.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),Lt.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=Nt.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}var At,It;((t,e="hide")=>{const r=`click.dismiss${t.EVENT_KEY}`,n=t.NAME;Lt.on(document,r,`[data-bs-dismiss="${n}"]`,(function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),!(o=this)||o.nodeType!==Node.ELEMENT_NODE||o.classList.contains("disabled")||(void 0!==o.disabled?o.disabled:o.hasAttribute("disabled")&&"false"!==o.getAttribute("disabled")))return;var o;const i=(t=>{const e=et(t);return e?document.querySelector(e):null})(this)||this.closest(`.${n}`);t.getOrCreateInstance(i)[e]()}))})(Nt,"close"),At=Nt,It=()=>{const t=ot();if(t){const e=At.NAME,r=t.fn[e];t.fn[e]=At.jQueryInterface,t.fn[e].Constructor=At,t.fn[e].noConflict=()=>(t.fn[e]=r,At.jQueryInterface)}},"loading"===document.readyState?(it.length||document.addEventListener("DOMContentLoaded",(()=>{for(const t of it)t()})),it.push(It)):It();function Dt(t){return Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dt(t)}function Zt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Ut(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ut(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Ut(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Gt(){Gt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function h(){}function p(){}function f(){}var d={};s(d,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==e&&r.call(y,o)&&(d=y);var g=f.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==Dt(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=f,s(g,"constructor",f),s(f,"constructor",p),p.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Ft(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Vt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ft(Object(r),!0).forEach((function(e){Mt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ft(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Mt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zt(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function Rt(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){zt(i,n,o,a,s,"next",t)}function s(t){zt(i,n,o,a,s,"throw",t)}a(void 0)}))}}u.Z.getLogger("pat-structure/table");var qt=v.extend({tagName:"div",template:a().template('<div class="fc-breadcrumbs-container">\n  <div class="fc-breadcrumbs">\n    <a href="#" title="<%- _t(\'Root\') %>" aria-label="<%- _t(\'Root\') %>" data-path="/">\n      <%= homeIcon %> /\n    </a>\n    <% pathParts.forEach((part, idx) => {\n      if(part){\n        if(idx > 0){ %>\n          /\n        <% } %>\n        <a href="#" class="crumb" data-path="<%- part %>"><%- part %></a>\n      <% }\n    }); %>\n  </div>\n</div>\n\n<table class="pat-datatables table table-striped table-bordered"\n       data-pat-datatables="<%- datatables_options %>">\n  <thead>\n    <tr>\n      <th class="selection"><label for="selectAllInputCheckbox" class="hiddenStructure" aria-label="<%- _t(\'Select all\') %>"><%- _t(\'Select all\') %></label><input id="selectAllInputCheckbox" type="checkbox" class="select-all form-check-input" /></th>\n      <th class="title"><%- _t(\'Title\') %></th>\n      <% activeColumns.forEach((column, idx) => { %>\n        <% if(column !== \'Description\' && hasOwnProperty.call(availableColumns, column)) { %>\n          <th><%- availableColumns[column] %></th>\n        <% } %>\n      <% }); %>\n      <th class="actions"><%- _t("Actions") %></th>\n    </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n'),tableSortable:null,initialize:function(t){var e=this;v.prototype.initialize.apply(e,[t]),e.collection=e.app.collection,e.selectedCollection=e.app.selectedCollection,e.subsetIds=[],e.contextInfo=null,e.tableSortable=null,e.listenTo(e.collection,"sync",e.render),e.listenTo(e.selectedCollection,"remove",e.render),e.listenTo(e.selectedCollection,"reset",e.render),o()("body").on("context-info-loaded",(function(t,r){e.contextInfo=r,e.setContextInfo()})),e.dateColumns=["ModificationDate","EffectiveDate","CreationDate","ExpirationDate","start","end","last_comment_date"]},events:{"click .fc-breadcrumbs a":"breadcrumbClicked","change .select-all":"selectAll"},setContextInfo:function(){var t=this.contextInfo.breadcrumbs;if(t&&t.length){var e=this.$(".fc-breadcrumbs a.crumb");a().each(t,(function(t,r){e.eq(r).html(t.title)}))}this.trigger("context-info:set")},render:function(){var t=Rt(Gt().mark((function t(){var e,r,n,i,a,c=this;return Gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Vt({order:[0,"asc"],columnDefs:[{orderable:!1,targets:[0,this.app.activeColumns.length+1]}],paging:!1,searching:!1,info:!1},this.app.options.datatables_options),t.t0=this.$el,t.t1=this,t.t2=s.Z,t.next=6,l.Z.resolveIcon("house");case 6:if(t.t3=t.sent,t.t4=this.app.getCurrentPath().split("/").slice(1).filter((function(t){return t.length>0})),t.t5=this.app.activeColumns,t.t6=this.app.availableColumns,t.t7=JSON.stringify(e),t.t8={_t:t.t2,homeIcon:t.t3,pathParts:t.t4,activeColumns:t.t5,availableColumns:t.t6,datatables_options:t.t7},t.t9=t.t1.template.call(t.t1,t.t8),t.t0.html.call(t.t0,t.t9),!this.collection.length){t.next=24;break}return r=o()("tbody",this.$el),n=this.collection.length,i=0,this.collection.each(function(){var t=Rt(Gt().mark((function t(e){var o;return Gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.dateColumns.map((function(t){!e.attributes.hasOwnProperty(t)||"None"!==e.attributes[t]&&e.attributes[t]||(e.attributes[t]="")})),o=new Q({model:e,app:c.app,table:c}),t.next=4,o.render();case 4:r.append(o.el),++i===n&&c.el.dispatchEvent(new Event("table_row_rendering_finished"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),a=function(){return new Promise((function(t){return L.Z.add_event_listener(c.el,"table_row_rendering_finished","table_row_rendering_finished__listener",t,{once:!0})}))},t.next=22,a();case 22:L.Z.remove_event_listener=(this.el,"table_row_rendering_finished__listener"),k.Z.scan(this.$el);case 24:return this.$el.find("table").on("init.dt",(function(){c.app.options.moveUrl&&c.addReordering(),c.storeOrder()})).on("order.dt",(function(t,e,r){if(1===r.length){var n=r[0];if(0===n.col&&"asc"===n.dir)return c.tableSortable&&c.tableSortable.enableSort(),void c.app.clearStatus("sorting_dndreordering_disabled")}var i=t.target,a=o()('<button type="button" class="btn btn-danger btn-sm"></button>').text((0,s.Z)("Reset column sorting")).on("click",(function(){var t=o()(i).dataTable().api();t.order([0,"asc"]),t.draw()}));c.app.setStatus({text:(0,s.Z)("Notice: Drag and drop reordering is disabled when viewing the contents sorted by a column."),type:"warning"},a,!1,"sorting_dndreordering_disabled"),c.tableSortable&&c.tableSortable.disableSort(),c.$el.removeClass("order-support")})),t.abrupt("return",this);case 26:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),breadcrumbClicked:function(t){t.preventDefault();var e=o()(t.target);"A"!==e[0].tagName&&(e=e.parent("a"));var r,n="",i=Zt(o()(e.prevAll("a").get().reverse()));try{for(i.s();!(r=i.n()).done;){var a=r.value,s=o()(a).attr("data-path");n+=s,"/"!==s&&(n+="/")}}catch(t){i.e(t)}finally{i.f()}n+=e.attr("data-path"),this.app.setCurrentPath(n),this.app.collection.getPage(this.app.collection.state.firstPage)},selectAll:function(t){o()(t.target).is(":checked")?o()('input[type="checkbox"]',this.$("tbody")).prop("checked",!0).change():(this.selectedCollection.remove(this.collection.models,{silent:!0}),this.selectedCollection.trigger("remove")),this.setContextInfo()},toggleSelectAll:function(t){o()(t.target).is(":checked")||this.$(".select-all").prop("checked",!1)},addReordering:function(){var t=this;this.app.inQueryMode()?this.$el.removeClass("order-support"):(this.$el.addClass("order-support"),this.tableSortable=new X.Z(this.$("tbody"),{selector:"tr",createDragItem:function(t,e){var r=e.clone(),n=o()("<table><tbody></tbody></table>");return o()("tbody",n).append(r),n.addClass("structure-dragging").css({opacity:.85,position:"absolute"}),n.width(e.width()),n.height(e.height()),n.appendTo(document.body),n},drop:function(e,r){0!==r&&(t.app.moveItem(e.attr("data-id"),r,t.subsetIds),t.storeOrder())}}))},storeOrder:function(){var t=[];this.$("tbody tr.itemRow").each((function(){t.push(o()(this).attr("data-id"))})),this.subsetIds=t}}),Bt=r(57887),Yt=y.extend({tagName:"div",className:"popover",eventPrefix:"popover",template:'<div class="arrow"></div>\n<div class="popover-title">\n</div>\n<div class="items popover-content">\n</div>\n\n',content:null,title:null,triggerView:null,idPrefix:"popover-",triggerEvents:{"button:click":"toggle"},placement:"bottom",events:{},opened:!1,closeOnOutClick:!0,appendInContainer:!0,backdrop:void 0,$backdrop:null,useBackdrop:!0,backdropOptions:{zIndex:"1009",opacity:"0.4",className:"backdrop backdrop-popover",classActiveName:"backdrop-active",closeOnEsc:!1,closeOnClick:!0},initialize:function(t){var e=this;y.prototype.initialize.apply(this,[t]),this.bindTriggerEvents(),this.on("render",(function(){this.$el.attr("role","tooltip").attr("aria-hidden","false"),this.renderTitle(),this.renderContent()}),this),this.$el.on("keyup",(function(t){27===t.keyCode&&e.hide()}))},afterRender:function(){},getTemplateOptions:function(){return this.options},renderTitle:function(){var t=this.title;"function"==typeof t&&(t=t(this.getTemplateOptions())),this.$(".popover-title").empty().append(t)},renderContent:function(){this.$(".popover-content").empty().append(this.content(this.getTemplateOptions()))},bindTriggerEvents:function(){this.triggerView&&a().each(this.triggerEvents,(function(t,e){var r=this[t];r||o().error("Function not found."),this.stopListening(this.triggerView,e),this.listenTo(this.triggerView,e,r)}),this)},getPosition:function(){var t=this.triggerView.$el;return o().extend({},{width:t[0].offsetWidth,height:t[0].offsetHeight},t.offset())},getBodyClassName:function(){var t="popover-";return this.options.id&&(t+=this.options.id+"-"),t+="active"},show:function(){o()(".popover:visible").each((function(){var t=o()(this).data("component");t&&t.hide()})),this.position(),this.setBackdrop(),!0===this.useBackdrop&&this.backdrop.show(),this.opened=!0,this.triggerView&&this.triggerView.$el.addClass("active"),this.uiEventTrigger("show",this),this.$el.attr("aria-hidden","false"),o()("body").addClass(this.getBodyClassName())},position:function(){var t,e,r,n,o=this.getPosition(),i=this.$el;switch(e=this.placement,i.css({top:0,left:0}).addClass("active"),r=i[0].offsetWidth,n=i[0].offsetHeight,e){case"bottom-right":t={top:o.top+o.height,left:o.left+o.width-40};break;case"bottom":t={top:o.top+o.height,left:o.left+o.width/2-r/2};break;case"top":t={top:o.top-n,left:o.left+o.width/2-r/2};break;case"left":t={top:o.top+o.height/2-n/2,left:o.left-r};break;case"right":t={top:o.top+o.height/2-n/2,left:o.left+o.width}}this.applyPlacement(t,e)},applyPlacement:function(t,e){var r,n,o,i,a=this.$el,s=this.$el,c=s[0].offsetWidth,l=s[0].offsetHeight;a.removeClass(e),a.offset(t).addClass(e).addClass("active"),r=s[0].offsetWidth,n=s[0].offsetHeight,"top"===e&&n!==l&&(t.top=t.top+l-n,i=!0),"bottom"===e||"top"===e?(o=0,t.left<0&&(o=-2*t.left,t.left=0,a.removeClass(e),a.offset(t).addClass(e),r=s[0].offsetWidth,n=s[0].offsetHeight),this.positionArrow(o-c+r,r,"left")):"bottom-right"!==e&&this.positionArrow(n-l,n,"top"),i&&a.offset(t)},positionArrow:function(t,e,r){this.$(".arrow").css(r,t?50*(1-t/e)+"%":"")},hide:function(){this.opened=!1,this.$el.removeClass("active"),this.triggerView&&(this.triggerView.$el.removeClass("active"),this.triggerView.$el.attr("aria-hidden","true")),this.uiEventTrigger("hide",this),this.$el.attr("aria-hidden","true"),o()("body").removeClass(this.getBodyClassName())},toggle:function(t,e){this.opened?this.hide():this.show()},setBackdrop:function(){if(!0===this.useBackdrop&&void 0===this.backdrop){var t=this;this.$backdrop=this.$el.closest(".ui-backdrop-element"),0===this.$backdrop.length&&(this.$backdrop=o()("body")),this.backdrop=new Bt.Z(this.$backdrop,this.backdropOptions),this.backdrop.$el.on("hidden.backdrop.patterns",(function(e){"backdrop.patterns"===e.namespace&&(e.stopPropagation(),!0===t.opened&&t.hide())})),this.on("popover:hide",(function(){this.backdrop.hide()}),this)}}});function Jt(t){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jt(t)}function Ht(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Kt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Kt(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function Kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Wt(){Wt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function h(){}function p(){}function f(){}var d={};s(d,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==e&&r.call(y,o)&&(d=y);var g=f.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==Jt(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=f,s(g,"constructor",f),s(f,"constructor",p),p.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Qt(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var Xt=Yt.extend({className:"popover selected-items",title:a().template('<input type="text" class="filter" placeholder="<%- _t("Filter") %>" /><a href="#" class=" remove-all"><%= removeIcon %> <%- _t("remove all") %></a>'),content:a().template("<% collection.each(function(item) { %><%= item_template($.extend({'removeIcon': removeIcon}, item.toJSON())) %><% }); %>"),events:{"click a.remove":"itemRemoved","keyup input.filter":"filterSelected","click .remove-all":"removeAll"},initialize:function(t){var e=this;Yt.prototype.initialize.apply(this,[t]);var r=0;this.listenTo(this.collection,"reset all add remove",(function(){clearTimeout(r),r=setTimeout((function(){e.render()}),50)})),this.options.item_template=a().template('<span class="selected-item">\n  <a href="#" data-uid="<%- UID %>" title="remove" class="remove">\n    <%= removeIcon %>\n  </a>\n  <%- Title %>\n</span>\n')},render:function(){var t,e=(t=Wt().mark((function t(){return Wt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.Z.resolveIcon("x-circle");case 2:return this.options.removeIcon=t.sent,Yt.prototype.render.call(this),0===this.collection.length&&this.$el.removeClass("active"),t.abrupt("return",this);case 6:case"end":return t.stop()}}),t,this)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){Qt(i,n,o,a,s,"next",t)}function s(t){Qt(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}(),itemRemoved:function(t){t.preventDefault();var e=o()(t.currentTarget).data("uid");this.collection.removeByUID(e),0!==this.collection.length&&this.show()},filterSelected:function(t){var e,r=o()(t.target).val().toLowerCase(),n=Ht(o()(".selected-item",this.$el));try{for(n.s();!(e=n.n()).done;){var i=e.value,a=o()(i);-1===a.text().toLowerCase().indexOf(r)?a.hide():a.show()}}catch(t){n.e(t)}finally{n.f()}},removeAll:function(t){t.preventDefault(),this.collection.reset(),this.hide()}});function te(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ee(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ee(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function ee(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var re=Yt.extend({events:{"click button.applyBtn":"applyButtonClicked","click button.closeBtn":"toggle"},submitText:(0,s.Z)("Apply"),initialize:function(t){this.app=t.app,this.className="popover "+t.id,this.title=t.form.title||t.title,this.submitText=t.form.submitText||(0,s.Z)("Apply"),this.submitContext=t.form.submitContext||"primary",this.data={},this.options=t,this.setContent(t.form.template),Yt.prototype.initialize.apply(this,[t])},setContent:function(t){var e="<form>"+t+"</form>";e+='<button class="btn btn-block btn-'+this.submitContext+' applyBtn">'+this.submitText+" </button>",this.options.form.closeText&&(e+='<button class="btn btn-block btn-default closeBtn">'+this.options.form.closeText+" </button>"),this.content=a().template(e)},getTemplateOptions:function(){var t,e=[],r=te(this.app.selectedCollection.models);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n.toJSON())}}catch(t){r.e(t)}finally{r.f()}return o().extend({},!0,this.options,{items:e,data:this.data})},applyButtonClicked:function(){var t,e={},r=te(this.$el.find("form").serializeArray());try{for(r.s();!(t=r.n()).done;){var n=t.value;n.name in e?e[n.name]+=","+n.value:e[n.name]=n.value}}catch(t){r.e(t)}finally{r.f()}this.app.buttonClickEvent(this.triggerView,e),this.hide()},afterRender:function(){var t=this;if(this.options.form.dataUrl){this.$(".popover-content").html((0,s.Z)("Loading...")),this.app.loading.show();var e=this.app.getAjaxUrl(this.options.form.dataUrl);o().ajax({url:e,dataType:"json",type:"POST",cache:!1,data:{selection:JSON.stringify(this.app.getSelectedUids()),transitions:!0,render:"yes"}}).done((function(e){t.data=e.data||e,t.renderContent(),k.Z.scan(t.$el)})).fail((function(){var e=t.content;t.setContent("<p>"+(0,s.Z)("Error loading popover from server.")+"</p>",!1),t.renderContent(),t.content=e})).always((function(){t.app.loading.hide(),t.position()}))}else k.Z.scan(this.$el),this.position()},toggle:function(t,e){Yt.prototype.toggle.apply(this,[t,e]),this.opened&&(this.$el.replaceWith(this.render().el),this.position())}}),ne=Yt.extend({className:"popover rearrange",title:a().template('<%- _t("Rearrange items in this folder") %>'),content:a().template('<div class="form-group"><label><%- _t("What to rearrange on") %></label><select name="rearrange_on" class="form-select"><% _.each(rearrangeProperties, function(title, property) { %><option value="<%- property %>"><%- title %></option><% }); %></select><p class="help-block"><b><%- _t("This permanently changes the order of items in this folder. This operation may take a long time depending on the size of the folder.") %></b></p></div><div class="form-check"><input class="form-check-input" type="checkbox" name="reversed" /><label class="form-check-label"><%- _t("Reverse") %></label></div><button class="btn btn-block btn-primary btn-sm"><%- _t("Rearrange") %></button>'),events:{"click button":"rearrangeButtonClicked"},initialize:function(t){this.app=t.app,Yt.prototype.initialize.apply(this,[t]),this.options.rearrangeProperties=this.app.options.rearrange.properties},render:function(){return Yt.prototype.render.call(this),this.$rearrangeOn=this.$('[name="rearrange_on"]'),this.$reversed=this.$('[name="reversed"]'),this},rearrangeButtonClicked:function(){if("/"!==this.app.collection.getCurrentPath()||window.confirm((0,s.Z)("Sorting the content on the base of the site could affect your navigation order. Are you certain you want to do this?"))){var t={rearrange_on:this.$rearrangeOn.val(),reversed:!1};this.$reversed[0].checked&&(t.reversed=!0),this.app.buttonClickEvent(this.triggerView,t),this.hide()}}}),oe=E.extend({collection:null,template:'<span class="glyphicon glyphicon-list"></span>\n<%- title %>\n<span class="label<% if (length > 0) { %> label-success<% } else { %> label-default<% } %>">\n  <%- length %>\n</span>\n',initialize:function(t){var e=this;E.prototype.initialize.apply(this,[t]),this.timeout=0,null!==this.collection&&this.collection.on("add remove reset",(function(){clearTimeout(e.timeout),e.timeout=setTimeout((function(){e.render(),0===e.collection.length&&e.$el.removeClass("active")}),50)}),this)},serializedModel:function(){var t={icon:"",title:this.options.title,length:0};return null!==this.collection&&(t.length=this.collection.length),t}});u.Z.getLogger("pat-structure/table").setLevel("DEBUG");var ie=d().View.extend({events:{"click a.servernext":"nextResultPage","click a.serverprevious":"previousResultPage","click a.serverlast":"gotoLast","click a.page":"gotoPage","click a.serverfirst":"gotoFirst","click a.serverpage":"gotoPage","click .serverhowmany a":"changeCount"},tagName:"aside",template:a().template('  <ul class="pagination pagination-sm pagination-centered">\n    <li class="page-item <% if (currentPage === 1) { %>disabled<% } %>">\n      <a href="#" class="page-link serverfirst">\n        &laquo;\n      </a>\n    </li>\n    <li class="page-item <% if (currentPage === 1) { %>disabled<% } %>">\n      <a href="#" class="page-link serverprevious">\n        &lt;\n      </a>\n    </li>\n    <% _.each(pages, (p) => { %>\n    <li class="page-item <% if (currentPage == p) { %>active<% } else if ( p == \'...\' ) { %>disabled<% }%>">\n      <a href="#" class="page-link page"><%- p %></a>\n    </li>\n    <% }); %>\n    <li class="page-item <% if (currentPage === totalPages) { %>disabled<% } %>">\n      <a href="#" class="page-link servernext">\n        &gt;\n      </a>\n    </li>\n    <li class="page-item <% if (currentPage === totalPages) { %>disabled<% } %>">\n      <a href="#" class="page-link serverlast">\n        &raquo;\n      </a>\n    </li>\n  </ul>\n\n  <div class="pagination-info"><%- _t("Show:") %></div>\n\n  <ul class="pagination pagination-sm">\n    <li class="page-item serverhowmany serverhowmany15 <% if(pageSize == 15){ %>disabled<% } %>">\n      <a href="#" class="page-link">15</a>\n    </li>\n    <li class="page-item serverhowmany serverhowmany30 <% if(pageSize == 30){ %>disabled<% } %>">\n      <a href="#" class="page-link">30</a>\n    </li>\n    <li class="page-item serverhowmany serverhowmany50 <% if(pageSize == 50){ %>disabled<% } %>">\n      <a href="#" class="page-link">50</a>\n    </li>\n    <li class="page-item serverhowmany serverhowmany250 <% if(pageSize == 250){ %>disabled<% } %>">\n      <a href="#" class="page-link">250</a>\n    </li>\n  </ul>\n\n  <div class="pagination-info">\n    <%- _t("Page:") %> <span class="current"><%- currentPage %></span>\n    <%- _t("of") %>\n    <span class="total"><%- totalPages %></span>\n          <%- _t("shown") %>\n  </div>\n'),maxPages:7,initialize:function(t){this.options=t,this.app=this.options.app,this.collection=this.app.collection,this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"sync",this.render)},render:function(){var t=this.collection.state;t.pages=this.getPages(t);var e=this.template(o().extend({_t:s.Z},t));return this.$el.html(e),this},getPages:function(t){var e=t.totalPages;if(!e)return[];var r=1,n=e;e>this.maxPages&&(r=Math.max(1,Math.floor(t.currentPage-this.maxPages/2)),(n=Math.min(r+this.maxPages,e))-r<this.maxPages&&(r-=Math.floor(this.maxPages/2)));for(var o=[],i=r;i<=n;i+=1)o.push(i);return o[0]>1&&(o[0]>2&&(o=["..."].concat(o)),o=[1].concat(o)),o[o.length-1]<e-1&&(o[o.length-2]<e-2&&o.push("..."),o.push(e)),o},nextResultPage:function(t){t.preventDefault(),this.app.clearStatus(),this.collection.getNextPage()},previousResultPage:function(t){t.preventDefault(),this.app.clearStatus(),this.collection.getPreviousPage()},gotoFirst:function(t){t.preventDefault(),this.app.clearStatus(),this.collection.getPage(this.collection.state.firstPage)},gotoLast:function(t){t.preventDefault(),this.app.clearStatus(),this.collection.getPage(this.collection.state.totalPages)},gotoPage:function(t){t.preventDefault(),this.app.clearStatus();var e=parseInt(o()(t.target).text());this.collection.getPage(e)},changeCount:function(t){t.preventDefault(),this.app.clearStatus();var e=parseInt(o()(t.target).text());this.collection.setPageSize(e,{first:!0}),this.app.setCookieSetting("pageSize",e)}});function ae(t){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(t)}function se(){se=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function h(){}function p(){}function f(){}var d={};s(d,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==e&&r.call(y,o)&&(d=y);var g=f.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==ae(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=f,s(g,"constructor",f),s(f,"constructor",p),p.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function ce(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function le(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ue(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ue(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function ue(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var he=Yt.extend({className:"popover attribute-columns",title:a().template('<%- _t("Columns") %>'),content:a().template('<label><%- _t("Select columns to show, drag and drop to reorder") %></label><ul></ul><button class="btn btn-block btn-primary btn-sm"><%- _t("Save") %></button>'),itemTemplate:a().template('<li><label><input type="checkbox" value="<%- id %>"/><%- title %></label></li>'),events:{"click button":"applyButtonClicked"},initialize:function(t){this.app=t.app,Yt.prototype.initialize.apply(this,[t])},afterRender:function(){var t=this;this.$container=this.$("ul");var e,r=le(this.app.activeColumns);try{for(r.s();!(e=r.n()).done;){var n=e.value,i=o()(this.itemTemplate({title:this.app.availableColumns[n],id:n}));i.find("input")[0].checked=!0,this.$container.append(i)}}catch(t){r.e(t)}finally{r.f()}var s,c=le(a().keys(a().omit(this.app.availableColumns,this.app.activeColumns)).sort((function(e,r){var n=t.app.availableColumns[e],o=t.app.availableColumns[r];return n<o?-1:n==o?0:1})));try{for(c.s();!(s=c.n()).done;){var l=s.value,u=o()(this.itemTemplate({title:this.app.availableColumns[l],id:l}));this.$container.append(u)}}catch(t){c.e(t)}finally{c.f()}return new X.Z(this.$container,{selector:"li"}),this},applyButtonClicked:function(){var t,e=this;return(t=se().mark((function t(){var r,n,i;return se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.hide(),e.app.activeColumns=[],r=le(e.$("input:checked"));try{for(r.s();!(n=r.n()).done;)i=n.value,e.app.activeColumns.push(o()(i).val())}catch(t){r.e(t)}finally{r.f()}return e.app.setCookieSetting(e.app.activeColumnsCookie,e.app.activeColumns),t.next=7,e.app.tableView.render();case 7:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){ce(i,n,o,a,s,"next",t)}function s(t){ce(i,n,o,a,s,"throw",t)}a(void 0)}))})()}}),pe=r(73918),fe=v.extend({tagName:"div",className:"navbar-search form-search ui-offset-parent",template:a().template('<div class="input-group"><input id="textFilterInput" type="text" class="form-control search-query" aria-label="<%- _t("Search") %>" placeholder="<%- _t("Search") %>"></div>'),popoverContent:a().template('<input class="pat-querystring" />'),events:{"keyup .search-query":"filter"},term:null,timeoutId:null,keyupDelay:300,statusKeyFilter:"textfilter_status_message_filter",statusKeySorting:"textfilter_status_message_sorting",initialize:function(t){v.prototype.initialize.apply(this,[t]),this.app=this.options.app},setFilterStatusMessage:function(){var t=this,e=o()('<button type="button" class="btn btn-primary btn-sm"></button>').text((0,s.Z)("Clear")).on("click",(function(){return t.clearFilter()})),r=(0,s.Z)("This listing has filters applied. Not all items are shown.");this.app.setStatus({text:r,type:"success"},e,!0,this.statusKeyFilter);var n=(0,s.Z)("Drag and drop reordering is disabled while filters are applied.");this.app.setStatus({text:n,type:"warning"},null,!0,this.statusKeySorting)},clearFilterStatusMessage:function(){this.term||this.app.additionalCriterias.length||(this.app.clearStatus(this.statusKeyFilter),this.app.clearStatus(this.statusKeySorting))},setTerm:function(t,e){var r=this.$el[0].querySelector(".search-query");if(this.term=encodeURIComponent(t),e&&(r.value=t),this.app.collection.currentPage=1,this.app.collection.fetch(),t)r.classList.add("has-filter"),this.setFilterStatusMessage();else{var n=!1;try{var o=this.$queryString.val();o&&JSON.parse(o).length>0&&(n=!0)}finally{n||(r.classList.remove("has-filter"),this.clearFilterStatusMessage())}}},setQuery:function(t,e){var r=null,n=null;try{"string"==typeof t?(n=JSON.parse(t),r=t):(r=JSON.stringify(t),n=t)}catch(t){n=[],r="[]"}e&&this.$queryString.val(r),this.app.additionalCriterias=n,this.app.collection.currentPage=1,this.app.collection.fetch(),n.length?(this.button.$el[0].classList.add("has-filter"),this.setFilterStatusMessage()):this.term||(this.button.$el[0].classList.remove("has-filter"),this.clearFilterStatusMessage())},clearTerm:function(){this.setTerm("",!0)},clearFilter:function(){this.setTerm("",!0),this.setQuery([],!0)},render:function(){var t=this;return this.$el.html(this.template({_t:s.Z})),this.button=new E({title:(0,s.Z)("Filter"),icon:"filter",extraClasses:["btn-queryfilter"]}),this.popover=new Yt({triggerView:this.button,id:"structure-query",title:a().template((0,s.Z)("Filter")),content:this.popoverContent,placement:"left"}),this.$el.find(".input-group").append(this.button.render().el),this.$el.append(this.popover.render().el),this.popover.$el.addClass("query"),this.$queryString=this.popover.$("input.pat-querystring"),this.queryString=new pe.Z(this.$queryString,{indexOptionsUrl:this.app.options.indexOptionsUrl,showPreviews:!1}),this.queryString.$el.on("change",(function(){t.timeoutId&&clearTimeout(t.timeoutId),t.timeoutId=setTimeout((function(){t.setQuery(t.$queryString.val(),!1)}),t.keyupDelay)})),this.queryString.$el.on("initialized",(function(){t.queryString.$sortOn.on("change",(function(){t.app.sort_on=t.queryString.$sortOn.val(),t.app.collection.currentPage=1,t.app.collection.fetch()})),t.queryString.$sortOrder.change((function(){t.queryString.$sortOrder[0].checked?t.app.sort_order="reverse":t.app.sort_order="ascending",t.app.collection.currentPage=1,t.app.collection.fetch()}))})),this},filter:function(t){var e=this;this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((function(){var r=o()(t.currentTarget);e.setTerm(r.val(),!1)}),this.keyupDelay)}}),de=r(37103),ve=Yt.extend({className:"popover upload",title:a().template('<%- _t("Upload files") %>'),content:a().template('<input type="text" name="upload" style="display:none" /><div class="uploadify-me"></div>'),initialize:function(t){var e=this;this.app=t.app,Yt.prototype.initialize.apply(this,[t]),this.currentPathData=null,o()("body").on("context-info-loaded",(function(t,r){e.currentPathData=r}))},render:function(){var t=this;Yt.prototype.render.call(this);var e=this.app.options.upload;return e.success=function(){t.app.collection.fetch()},e.currentPath=this.app.getCurrentPath(),e.allowPathSelection=!1,this.upload=new de.default(this.$(".uploadify-me").addClass("pat-upload"),e),this},toggle:function(t,e){if(Yt.prototype.toggle.apply(this,[t,e]),this.opened){var r=this.app.getCurrentPath();this.currentPathData&&r!==this.upload.currentPath&&this.upload.setPath(r)}}}),ye=d().Collection.extend({model:P,removeResult:function(t){return this.removeByUID(t.uid())},removeByUID:function(t){var e=this.getByUID(t);return e&&this.remove(e),e},getByUID:function(t){return this.findWhere({UID:t})}}),ge=(r(88816),d().PageableCollection.extend({model:P,mode:"server",initialize:function(t,e){this.options=e,this.view=e.view,this.url=e.url,this.queryHelper=l.Z.QueryHelper(o().extend(!0,{},this.view.options,{attributes:this.view.options.queryHelperAttributes})),this.queryParser=function(t){var e,r,n,i,a;void 0===t&&(t={});var s=(null===(e=this.view)||void 0===e||null===(r=e.toolbar)||void 0===r||null===(n=r.get)||void 0===n||null===(i=n.call(r,"filter"))||void 0===i?void 0:i.term)||null,c=(null===(a=this.view)||void 0===a?void 0:a.sort_on)||"getObjPositionInParent",l=this.view.sort_order;return JSON.stringify({criteria:this.queryHelper.getCriterias(s,o().extend({},t,{additionalCriterias:this.view.additionalCriterias})),sort_on:c,sort_order:l})},"#/"===window.location.hash.substring(0,2)&&(this.queryHelper.currentPath=window.location.hash.substring(1)),d().PageableCollection.prototype.initialize.apply(this,[t,e])},getCurrentPath:function(){return this.queryHelper.getCurrentPath()},setCurrentPath:function(t){this.queryHelper.currentPath=t},queryParams:{query:function(){return this.queryParser()},batch:function(){return this.queryHelper.options.batchSize=this.state.pageSize,JSON.stringify(this.queryHelper.getBatch(this.state.currentPage))},attributes:function(){return JSON.stringify(this.queryHelper.options.attributes)}},parseState:function(t,e,r,n){this.state.totalRecords=t.total,this.state.totalPages=Math.ceil(t.total/r.pageSize)},parseRecords:function(t,e){var r=t.results;return r.forEach((function(t,e){t._sort=e})),r}}));function me(t){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(t)}function be(){be=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return L()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),i}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function h(){}function p(){}function f(){}var d={};s(d,o,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==e&&r.call(y,o)&&(d=y);var g=f.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(o,i,a,s){var c=l(t[o],t,i);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==me(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var o;this._invoke=function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=f,s(g,"constructor",f),s(f,"constructor",p),p.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,i,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new b(c(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),s(g,a,"Generator"),s(g,o,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(s&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function we(t,e,r,n,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function xe(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return _e(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _e(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function _e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Se=u.Z.getLogger("pat-structure/app"),Ee=v.extend({tagName:"div",statusTemplate:a().template('<div class="alert alert-<%- type %> status fc-status">\n  <strong class="fc-status-label"><%- label %></strong>\n  <span class="fc-status-text">\n    <% if(text){ %>\n    <%- text %>\n    <% } else { %>\n    &nbsp;<% // &nbsp; to get correct height for empty alerts %>\n    <% } %>\n  </span>\n</div>\n'),statusMessages:[],sort_on:"getObjPositionInParent",sort_order:"ascending",additionalCriterias:[],cookieSettingPrefix:"_fc_",buttons:null,textfilter:null,forms:[],pasteAllowed:function(){return!!p().get("__cp")},initialize:function(t){var e=this;v.prototype.initialize.apply(this,[t]),this.loading=new l.Z.Loading,this.loading.show(),o()(document).on("click",(function(t){var e=o()(t.target);if(e.is(":visible")&&"hidden"!==e.css("visibility")&&"0"!==e.css("opacity")&&!e.is("a")&&!e.parent().is("a")){var r=o()(".popover:visible");if(r.length>0&&!o().contains(r[0],e[0])){var n=r.data("component");n&&n.hide()}}})),this.collection=new ge([],{view:this,url:this.options.collectionUrl}),this.activeColumns=this.getCookieSetting(this.activeColumnsCookie,this.activeColumns),this.selectedCollection=new ye,this.pagingView=new ie({app:this}),this.tableView=new qt({app:this}),this.collection.state.pageSize=this.getCookieSetting("pageSize",15),this.collection.fetch(),this.setupButtons(),this.wellView=new Xt({collection:this.selectedCollection,triggerView:this.toolbar.get("selected-items"),app:this,id:"selected-items"}),this.toolbar.get("selected-items").disable(),this.buttons.disable();var r=0;this.selectedCollection.on("add remove reset",(function(){clearTimeout(r),r=setTimeout((function(){e.updateButtons()}),100)}),this),this.collection.on("sync",(function(){if(e.contextInfoUrl&&o().ajax({url:e.getAjaxUrl(e.contextInfoUrl),dataType:"json",success:function(t){o()("body").trigger("context-info-loaded",[t])},error:function(t){404===t.status&&Se.info("context info url not found")}}),e.doNotPushState)e.doNotPushState=!1;else{e.loading.show(),e.updateButtons();var t,r=e.getCurrentPath();if("/"===r&&(r=""),e.options.pushStateUrl)t=e.options.pushStateUrl.replace("/{path}","{path}").replace("{path}",r),window.history.pushState(null,null,t);else e.options.urlStructure&&(t=e.options.urlStructure.base+r+e.options.urlStructure.appended,window.history.pushState(null,null,t));e.options.traverseView&&(r=""),o()("body").trigger("structure-url-changed",[r]),e.loading.hide()}})),(this.options.pushStateUrl||this.options.urlStructure)&&l.Z.featureSupport.history()&&(o()(window).bind("popstate",(function(){var t,r,n=l.Z.getWindow().location.href;if(-1!==n.indexOf("?")&&(n=n.split("?")[0]),-1!==n.indexOf("#")&&(n=n.split("#")[0]),e.options.pushStateUrl){var i=e.options.pushStateUrl.split("{path}");t=i[0],r=i[1]}else t=e.options.urlStructure.base,r=e.options.urlStructure.appended;var a=n.substring(t.length);a.substring(a.length-r.length)===r&&(a=a.substring(0,a.length-r.length)),a||(a="/"),e.setCurrentPath(a),o()("body").trigger("structure-url-changed",[a]),e.doNotPushState=!0,e.collection.getPage(e.collection.state.firstPage)})),o()(document).bind("keyup keydown",(function(t){e.keyEvent=t}))),this.togglePasteBtn()},updateButtons:function(){this.selectedCollection.length?(this.toolbar.get("selected-items").enable(),this.buttons.enable()):(this.toolbar.get("selected-items").disable(),this.buttons.disable()),this.togglePasteBtn()},togglePasteBtn:function(){a().find(this.buttons.items,(function(t){return"paste"===t.id}))&&(this.pasteAllowed()?this.buttons.get("paste").enable():this.buttons.get("paste").disable())},inQueryMode:function(){return!(!this.toolbar||!this.toolbar.get("filter").term)||(this.additionalCriterias.length>0||(!(!this.sort_on||"getObjPositionInParent"===this.sort_on)||"ascending"!==this.sort_order))},getSelectedUids:function(t){void 0===t&&(t=this.selectedCollection);var e=[];return t.each((function(t){e.push(t.uid())})),e},getCurrentPath:function(){return this.collection.getCurrentPath()},setCurrentPath:function(t){this.collection.setCurrentPath(t),this.clearStatus()},getAjaxUrl:function(t){return t.replace("{path}",this.getCurrentPath())},buttonClickEvent:function(t){var e=this,r=null,n=null;if(t.url){if(this.loading.show(),arguments.length>1){var i=arguments[1];i.preventDefault||(r=i)}if(arguments.length>2){var a=arguments[2];"function"==typeof a&&(n=a)}null===r&&(r={}),void 0===r.selection&&(r.selection=JSON.stringify(this.getSelectedUids())),r._authenticator=l.Z.getAuthenticator(),void 0===r.folder&&(r.folder=this.getCurrentPath());var s=this.getAjaxUrl(t.url);o().ajax({url:s,type:"POST",data:r,success:function(t){e.ajaxSuccessResponse.apply(e,[t,n]),e.loading.hide()},error:function(t){e.ajaxErrorResponse.apply(e,[t,s]),e.loading.hide()}},this)}},ajaxSuccessResponse:function(t,e){this.clearStatus(),this.selectedCollection.reset(),"success"===t.status&&this.collection.reset(),t.msg&&this.setStatus({text:t.msg,type:t.status||"warning"}),null!=e&&e(t),this.collection.fetch()},ajaxErrorResponse:function(t,e){404===t.status?window.alert((0,s.Z)("operation url ${url} is not valid",{url:e})):window.alert((0,s.Z)("there was an error performing the action"))},setupButtons:function(){var t=this,e=[],r=new E({id:"structure-columns",tooltip:(0,s.Z)("Configure displayed columns"),icon:"plone-three-dots"});if(this.columnsView=new he({app:this,triggerView:r,id:"structure-columns",placement:"bottom-right"}),e.push(r),e.push(new oe({title:(0,s.Z)("Selected"),id:"selected-items",tooltip:(0,s.Z)("Manage selection"),collection:this.selectedCollection,icon:"plone-selection"})),this.options.rearrange){var n=new E({id:"structure-rearrange",title:(0,s.Z)("Rearrange"),icon:"plone-rearrange",tooltip:(0,s.Z)("Rearrange folder contents"),url:this.options.rearrange.url});this.rearrangeView=new ne({triggerView:n,app:this,id:"structure-rearrange"}),e.push(n)}if(this.options.upload&&l.Z.featureSupport.dragAndDrop()&&l.Z.featureSupport.fileApi()){var o=new E({id:"upload",title:(0,s.Z)("Upload"),tooltip:(0,s.Z)("Upload files"),icon:"upload"});this.uploadView=new ve({triggerView:o,app:this,id:"upload"}),e.push(o)}var i,a=[],c=xe(this.options.buttons);try{for(c.s();!(i=c.n()).done;){var u=i.value;try{!function(){var e=new E(u);if(a.push(e),e.form){u.triggerView=e,u.app=t;var r=new re(u);t.forms.push(r.el)}else e.on("button:click",(function(){return t.buttonClickEvent(e)}),t)}()}catch(t){Se.error("Error initializing button ".concat(u.title||u.id," ").concat(t))}}}catch(t){c.e(t)}finally{c.f()}this.buttons=new m({items:a,id:"mainbuttons",app:this}),e.push(this.buttons),this.textfilter=new fe({id:"filter",app:this}),e.push(this.textfilter),this.toolbar=new g({items:e})},moveItem:function(t,e,r){var n=this;o().ajax({url:this.getAjaxUrl(this.options.moveUrl),type:"POST",data:{delta:e,id:t,_authenticator:l.Z.getAuthenticator(),subsetIds:JSON.stringify(r)},dataType:"json",success:function(t){n.clearStatus(),t.msg?n.setStatus({text:t.msg}):"success"!==t.status&&n.setStatus({text:(0,s.Z)("Error moving item"),type:"danger"}),n.collection.fetch()},error:function(){n.clearStatus(),n.setStatus({text:(0,s.Z)("Error moving item"),type:"danger"})}})},clearStatus:function(t){var e=this.$el[0].querySelector(".fc-status-container"),r=[];t?((r=this.statusMessages.filter((function(e){return e.key===t}))).forEach((function(t){try{e.removeChild(t.el)}catch(t){}})),this.statusMessages=this.statusMessages.filter((function(e){return e.key!==t}))):(this.statusMessages.forEach(function(t){if(!t.fixed)try{e.removeChild(t.el),r.push(t)}catch(t){}}.bind(this)),this.statusMessages=this.statusMessages.filter((function(t){return-1===r.indexOf(t)})))},setStatus:function(t,e,r,n){if(!(n&&this.statusMessages.filter((function(t){return t.key===n})).length>0)){var i=c.Z.create_from_string(this.statusTemplate({label:t.label||"",text:t.text,type:t.type||"warning"})).lastChild;return e&&(e=o()(e)[0],i.appendChild(e)),t={el:i,fixed:r,key:n},this.$el[0].querySelector(".fc-status-container").appendChild(t.el),this.statusMessages.push(t),t}},render:function(){var t,e=(t=be().mark((function t(){var e,r,n,i,a;return be().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$el.append(this.toolbar.render().el),!this.wellView){t.next=7;break}return t.t0=this.$el.find("#btn-"+this.wellView.id),t.next=5,this.wellView.render();case 5:t.t1=t.sent.el,t.t0.after.call(t.t0,t.t1);case 7:e=xe(this.forms);try{for(e.s();!(r=e.n()).done;)n=r.value,i=o()(n).attr("id"),(a=this.$el.find("#btn-"+i)).closest(".btn-group").length?a.closest(".btn-group").after(n):this.$el.find("#btn-"+i).after(n)}catch(t){e.e(t)}finally{e.f()}return this.$el.append(c.Z.create_from_string('<div class="fc-status-container"></div>')),this.columnsView&&this.$el.find("#btn-"+this.columnsView.id).after(this.columnsView.render().el),this.rearrangeView&&this.$el.find("#btn-"+this.rearrangeView.id).after(this.rearrangeView.render().el),this.uploadView&&this.$el.find("#btn-"+this.uploadView.id).after(this.uploadView.render().el),this.$el.append(this.tableView.el),this.$el.append(this.pagingView.el),null!==this.options.backdropSelector?o()(this.options.backdropSelector).addClass("ui-backdrop-element"):this.$el.addClass("ui-backdrop-element"),t.abrupt("return",this);case 17:case"end":return t.stop()}}),t,this)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){we(i,n,o,a,s,"next",t)}function s(t){we(i,n,o,a,s,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}(),getCookieSetting:function(t,e){var r;void 0===e&&(e=null);try{r=p().get(this.cookieSettingPrefix+t),r=JSON.parse(r).value}catch(t){return e}return null==r?e:r},setCookieSetting:function(t,e){p().set(this.cookieSettingPrefix+t,JSON.stringify({value:e}))}})}}]);
//# sourceMappingURL=58133.bd1eca9ee2bfc926e040.min.js.map