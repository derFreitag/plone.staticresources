"use strict";(self.webpackChunkplone_staticresources=self.webpackChunkplone_staticresources||[]).push([[58133],{58133:function(t,e,r){r.r(e),r.d(e,{default:function(){return _e}});var n=r(99269),i=r.n(n),o=r(48771),a=r.n(o),s=r(10354),c=r(54593),l=r(62832),u=r(89867),h=r(54771),p=r.n(h),f=r(5749),d=r.n(f),v=d().View.extend({isUIView:!0,eventPrefix:"ui",template:null,idPrefix:"base-",appendInContainer:!0,initialize:function(t){for(var e in this.options=t,this.options)this[e]=this.options[e];this.options._t=s.Z},render:function(){return this.applyTemplate(),this.trigger("render",this),this.afterRender(),this.options.id&&this.$el.attr("id",this.idPrefix+this.options.id),this},afterRender:function(){},serializedModel:function(){return this.options},applyTemplate:function(){if(null!==this.template){var t=i().extend({_t:s.Z},this.options,this.serializedModel()),e=this.template;"string"==typeof e&&(e=a().template(e)),this.$el.html(e(t))}},propagateEvent:function(t){if(t.indexOf(":")>0){var e=t.split(":")[0];if(""!==this.eventPrefix&&(e===this.eventPrefix||e===this.eventPrefix+"."+this.id))return!0}return!1},uiEventTrigger:function(t){var e=[].slice.call(arguments,0);""!==this.eventPrefix&&(e[0]=this.eventPrefix+":"+t,d().View.prototype.trigger.apply(this,e),this.id&&(e[0]=this.eventPrefix+"."+this.id+":"+t,d().View.prototype.trigger.apply(this,e)))}}),y=v.extend({id:"",items:[],itemContainer:null,isOffsetParent:!0,idPrefix:"container-",render:function(){return this.options.id&&this.$el.attr("id",this.idPrefix+this.options.id),this.applyTemplate(),this.renderItems(),this.bindEvents(),this.isOffsetParent&&this.$el.addClass("ui-offset-parent"),this.trigger("render",this),this.afterRender(),this.$el.data("component",this),this},renderItems:function(){var t;if(null!==this.itemContainer){if(0===(t=i()(this.itemContainer,this.$el)).length)throw"Item Container element not found."}else t=this.$el;a().each(this.items,(function(e){!0===e.appendInContainer?t.append(e.render().$el):e.render()}),this)},bindEvents:function(){var t=this;a().each(this.items,(function(e){e.on("all",(function(){var e,r=[].slice,n=arguments[0],i=""!==t.id?t.id+"."+n:n;if(arguments.length>1&&(e=arguments[1]),i!==n){var o=r.call(arguments,0);o[0]=i,t.trigger.apply(t,o)}void 0!==e&&!0===e.isUIView&&!0===e.propagateEvent(n)&&t.trigger.apply(t,arguments)}))}))},get:function(t){return a().findWhere(this.items,{id:t})},add:function(t){if(void 0!==t.id&&this.get(t.id))throw"Another item with the same `id` already exists.";this.items.push(t)}}),g=y.extend({tagName:"div",className:"navbar",idPrefix:"toolbar-"}),m=y.extend({tagName:"div",className:"btn-group",idPrefix:"btngroup-",disable:function(){a().each(this.items,(function(t){t.disable()}))},enable:function(){a().each(this.items,(function(t){t.enable()}))}}),b=r(3853);function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function x(){x=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),a=new L(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return C()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=S(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function h(){}function p(){}function f(){}var d={};s(d,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(k([])));y&&y!==e&&r.call(y,i)&&(d=y);var g=f.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(i,o,a,s){var c=l(t[i],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==w(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function S(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function k(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:C}}function C(){return{value:void 0,done:!0}}return p.prototype=f,s(g,"constructor",f),s(f,"constructor",p),p.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),s(g,a,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=k,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),E(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;E(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:k(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function S(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function _(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){S(o,n,i,a,s,"next",t)}function s(t){S(o,n,i,a,s,"throw",t)}a(void 0)}))}}var E=v.extend({tagName:"a",className:"btn",eventPrefix:"button",context:"outline-secondary",idPrefix:"btn-",attributes:{href:"#"},extraClasses:[],tooltip:null,template:"<%= title %>",events:{click:"handleClick"},initialize:function(t){if(!t.id){var e=t.title||"";t.id=""!==e?e.toLowerCase().replace(" ","-"):this.cid}v.prototype.initialize.apply(this,[t]),this.on("render",_(x().mark((function t(){var e,r;return x().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$el.attr("title",this.options.title||""),this.$el.attr("aria-label",this.options.title||this.options.tooltip||""),null!==this.context&&this.$el.addClass("btn-"+this.context),a().each(this.extraClasses,function(t){this.$el.addClass(t)}.bind(this)),!this.icon||"string"!=typeof this.icon){t.next=10;break}return t.next=7,l.Z.resolveIcon(this.icon);case 7:e=t.sent,(r=c.Z.create_from_string(e))&&this.$el.prepend(r);case 10:null!==this.tooltip&&(this.$el.attr("title",this.tooltip),new b.Z(this.$el),this.$el.on("hidden",(function(t){"hidden"===t.type&&t.stopPropagation()})));case 11:case"end":return t.stop()}}),t,this)}))),this)},handleClick:function(t){t.preventDefault(),this.$el.is(".disabled")||this.uiEventTrigger("click",this,t)},serializedModel:function(){return a().extend({icon:"",title:""},this.options)},disable:function(){this.$el.addClass("disabled")},enable:function(){this.$el.removeClass("disabled")}}),L=r(52896),k=r(87657),C=(r(43067),{openItem:{url:"#",title:(0,s.Z)("Open"),category:"button",icon:"plone-view",css:"",modal:!1},editItem:{url:"#",title:(0,s.Z)("Edit"),category:"button",icon:"plone-edit",css:"",modal:!1},cutItem:{method:"cutClicked",url:"#",title:(0,s.Z)("Cut"),category:"dropdown",icon:"plone-cut",css:"",modal:!1},copyItem:{method:"copyClicked",url:"#",title:(0,s.Z)("Copy"),category:"dropdown",icon:"plone-copy",css:"",modal:!1},pasteItem:{method:"pasteClicked",url:"#",title:(0,s.Z)("Paste"),category:"dropdown",icon:"plone-paste",css:"",modal:!1},"move-top":{method:"moveTopClicked",url:"#",title:(0,s.Z)("Move to top of folder"),category:"dropdown",icon:"arrow-bar-up",css:"",modal:!1},"move-bottom":{method:"moveBottomClicked",url:"#",title:(0,s.Z)("Move to bottom of folder"),category:"dropdown",icon:"arrow-bar-down",css:"",modal:!1},"set-default-page":{method:"setDefaultPageClicked",url:"#",title:(0,s.Z)("Set as default page"),category:"dropdown",icon:"check-circle",css:"",modal:!1},selectAll:{method:"selectAll",url:"#",title:(0,s.Z)("Select all contained items"),category:"dropdown",icon:"check-all",css:"",modal:!1}}),O=function(t){if(null!==t.app.menuOptions)return t.app.menuOptions;var e=t.model.attributes,r=t.app,n=!!r.options.moveUrl,i=JSON.parse(JSON.stringify(C));r.pasteAllowed()&&e.is_folderish||delete i.pasteItem,(r.inQueryMode()||!1===n)&&(delete i["move-top"],delete i["move-bottom"]),-1!==r.defaultPageTypes.indexOf(e.portal_type)&&r.setDefaultPageUrl||delete i["set-default-page"],e.is_folderish||delete i.selectAll;var o=r.options.typeToViewAction,a=o&&o[e.portal_type]||"";return i.openItem.url=e.getURL+a,i.editItem.url=e.getURL+"/edit",i},P=d().Model.extend({defaults:function(){return{is_folderish:!1,review_state:"",getURL:""}},uid:function(){return this.attributes.UID}});function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function $(){$=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),a=new _(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return L()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function h(){}function p(){}function f(){}var d={};s(d,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==e&&r.call(y,i)&&(d=y);var g=f.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(i,o,a,s){var c=l(t[i],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==j(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=f,s(g,"constructor",f),s(f,"constructor",p),p.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),s(g,a,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function N(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return T(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function T(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function A(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function I(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){A(o,n,i,a,s,"next",t)}function s(t){A(o,n,i,a,s,"throw",t)}a(void 0)}))}}var D,Z,G,U=d().Model.extend({initialize:function(t){this.options=t,this.app=t.app,this.model=t.model,this.selectedCollection=this.app.selectedCollection},selectAll:(G=I($().mark((function t(e){var r,n,i,o=this;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),r=1,n=0,i=function(){var t=I($().mark((function t(){var e,a,s,c,l,u,h;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.app.loading.show(),(e=new URL(o.app.collection.url)).searchParams.append("query",o.app.collection.queryParser({searchPath:o.model.attributes.path})),e.searchParams.append("batch",JSON.stringify({page:r,size:100})),e.searchParams.append("attributes",JSON.stringify(o.app.collection.queryHelper.options.attributes)),t.next=7,fetch(e,{headers:{Accept:"application/json"}});case 7:return a=t.sent,t.next=10,a.json();case 10:s=t.sent,c=o.app.collection.parse(s,n),n+=c.length,l=N(c);try{for(l.s();!(u=l.n()).done;)h=u.value,o.app.selectedCollection.add(new P(h))}catch(t){l.e(t)}finally{l.f()}if(r+=1,!(s.total>n)){t.next=21;break}return t.next=19,i();case 19:t.next=24;break;case 21:return o.app.loading.hide(),t.next=24,o.app.tableView.render();case 24:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),t.next=6,i();case 6:case"end":return t.stop()}}),t)}))),function(t){return G.apply(this,arguments)}),doAction:(Z=I($().mark((function t(e,r,n){var i,o,a,c;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=new URL(this.app.buttons.get(e).options.url),t.next=3,fetch(i,{headers:{Accept:"application/json"},method:"POST",body:JSON.stringify({selection:JSON.stringify([this.model.attributes.UID]),folder:this.model.attributes.path,_authenticator:l.Z.getAuthenticator()})});case 3:return o=t.sent,t.next=6,o.json();case 6:"success"===(a=t.sent).status?(c=(0,s.Z)("".concat(r,' "').concat(this.model.attributes.Title,'"')),this.app.collection.fetch(),this.app.updateButtons()):c=(0,s.Z)("Error ".concat(n,' "').concat(this.model.attributes.Title,'"')),this.app.clearStatus(),this.app.setStatus({text:c,type:a.status||"warning"});case 10:case"end":return t.stop()}}),t,this)}))),function(t,e,r){return Z.apply(this,arguments)}),cutClicked:function(t){t.preventDefault(),this.doAction("cut",(0,s.Z)("Cut"),(0,s.Z)("cutting"))},copyClicked:function(t){t.preventDefault(),this.doAction("copy",(0,s.Z)("Copied"),(0,s.Z)("copying"))},pasteClicked:function(t){t.preventDefault(),this.doAction("paste",(0,s.Z)("Pasted into"),(0,s.Z)("Error pasting into"))},moveTopClicked:function(t){t.preventDefault(),this.app.moveItem(this.model.attributes.id,"top")},moveBottomClicked:function(t){t.preventDefault(),this.app.moveItem(this.model.attributes.id,"bottom")},setDefaultPageClicked:(D=I($().mark((function t(e){var r,n,o;return $().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.prev=1,r=new URL(this.app.getAjaxUrl(this.app.setDefaultPageUrl)),t.next=5,fetch(r,{method:"POST",body:JSON.stringify({id:this.model.attributes.id,_authenticator:i()('[name="_authenticator"]').val()})});case 5:return n=t.sent,t.next=8,n.json();case 8:o=t.sent,this.app.ajaxSuccessResponse.apply(this.app,[o]),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),this.app.ajaxSuccessResponse.apply(this.app,[t.t0]);case 15:case"end":return t.stop()}}),t,this,[[1,12]])}))),function(t){return D.apply(this,arguments)})});function V(t){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},V(t)}function F(){F=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),a=new _(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return L()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function h(){}function p(){}function f(){}var d={};s(d,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==e&&r.call(y,i)&&(d=y);var g=f.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(i,o,a,s){var c=l(t[i],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==V(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=f,s(g,"constructor",f),s(f,"constructor",p),p.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),s(g,a,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function M(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function z(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){M(o,n,i,a,s,"next",t)}function s(t){M(o,n,i,a,s,"throw",t)}a(void 0)}))}}var R,q,B=v.extend({className:"btn-group actionmenu",template:a().template('<% _.each(menuOptions.button, (menuOption) => { %>\n<a class="btn btn-sm action pat-tooltip <%- menuOption.classes.join(\' \') %>"\n    href="<%- menuOption.url %>"\n    title="<%- _t(menuOption.title) %>"\n    aria-label="<%- _t(menuOption.title) %>">\n  <% if (menuOption.iconSVG) { %>\n    <%= menuOption.iconSVG %>\n  <% } else { %>\n  <%- _t(menuOption.title) %>\n  <% } %>\n</a>\n<% }); %>\n\n\n<% if (menuOptions.dropdown) { %>\n<div class="dropdown">\n  <button class="dropdown-toggle btn btn-sm"\n      type="button"\n      data-bs-toggle="dropdown"\n      aria-haspopup="true"\n      aria-expanded="false"\n      id="<%- id %>"\n      title=\'<%- _t("Actions") %>\'>\n    <%= dropdownIcon %><span class="caret"></span>\n  </button>\n  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="<%- id %>">\n    <% if (header) { %>\n      <li class="dropdown-header"><%- header %></li>\n      <li class="divider"></li>\n    <% } %>\n\n    <% _.each(menuOptions.dropdown, (menuOption) => { %>\n    <li>\n      <a class="dropdown-item action <%- menuOption.classes.join(\' \') %>"\n          href="<%- menuOption.url %>">\n        <% if (menuOption.iconSVG) { %>\n          <%= menuOption.iconSVG %>\n        <% } %>\n        <%- _t(menuOption.title) %>\n      </a>\n    </li>\n    <% }); %>\n  </ul>\n</div>\n<% } %>\n'),menuOptions:null,generate_events:function(){var t=this,e={};return a().each(this.menuOptions,(function(r,n){var i=r.method;if(!i||!t.actions[i])return!1;e["click a.".concat(n)]=t.actions[i].bind(t.actions)})),e},initialize:function(t){this.actions=new U(t),v.prototype.initialize.apply(this,[t]),this.options=t,this.selectedCollection=this.app.selectedCollection,this.menuOptions=O(this),this.events=this.generate_events(),this.delegateEvents()},menuOptionsCategorized:(q=z(F().mark((function t(){var e;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e={},a().each(this.menuOptions,function(){var t=z(F().mark((function t(r,n){var i;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r.idx=l.Z.generateId(),r.name=n,i=r.category||"dropdown",void 0===e[i]&&(e[i]=[]),e[i].push(r),r.classes=[r.name,r.idx],r.css&&r.classes.push(r.css),!0===r.modal&&(r.css+=" pat-plone-modal"),!r.icon){t.next=12;break}return t.next=11,l.Z.resolveIcon(r.icon);case 11:r.iconSVG=t.sent;case 12:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()),t.abrupt("return",e);case 3:case"end":return t.stop()}}),t,this)}))),function(){return q.apply(this,arguments)}),render:(R=z(F().mark((function t(){var e;return F().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.el.innerHTML="",(e=this.model.toJSON()).header=this.options.header||null,t.next=5,this.menuOptionsCategorized();case 5:return e.menuOptions=t.sent,t.t0=this,t.t1=i(),t.next=10,l.Z.resolveIcon("plone-settings");case 10:return t.t2=t.sent,t.t3=s.Z,t.t4=l.Z.generateId(),t.t5={dropdownIcon:t.t2,_t:t.t3,id:t.t4},t.t6=e,t.t7=t.t1.extend.call(t.t1,t.t5,t.t6),this.el.innerHTML=t.t0.template.call(t.t0,t.t7),this.options.className&&this.$el.addClass(this.options.className),k.Z.scan(this.$el),t.abrupt("return",this.el);case 20:case"end":return t.stop()}}),t,this)}))),function(){return R.apply(this,arguments)})});function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function J(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return H(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function K(){K=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),a=new _(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return L()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function h(){}function p(){}function f(){}var d={};s(d,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==e&&r.call(y,i)&&(d=y);var g=f.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(i,o,a,s){var c=l(t[i],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==Y(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=f,s(g,"constructor",f),s(f,"constructor",p),p.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),s(g,a,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function W(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}var Q=d().View.extend({tagName:"tr",className:"itemRow",template:a().template('<td class="selection" data-order="<%- attributes[\'_sort\'] %>"><label for="select<%- attributes[\'_sort\'] %>InputCheckbox" class="hiddenStructure" aria-label="<%- _t(\'Select\') %>"><%- _t(\'Select\') %></label><input class="form-check-input" id="select<%- attributes[\'_sort\'] %>InputCheckbox" <% if(selected){ %> checked="checked" <% } %> type="checkbox"/></td>\n\n<td class="title">\n  <div>\n    <div>\n      <a href="<%- viewURL %>"\n          class="manage state-<%- review_state %> contenttype-<%- contenttype %>"\n          title="<%- portal_type %>">\n        <%= mimeIcon %>\n        <% if(Title){ %>\n          <%- Title %>\n        <% } else { %>\n          <em><%- id %></em>\n        <% } %>\n      </a>\n      <% if(expired){ %>\n        <span class="badge plone-item-expired"><%- _t(\'Expired\') %></span>\n      <% } %>\n      <% if(ineffective){ %>\n        <span class="badge plone-item-ineffective"><%- _t(\'Before publishing date\') %></span>\n      <% } %>\n      <% if(activeColumns.indexOf(\'Description\') !== -1 && _.has(availableColumns, \'Description\') && Description) { %>\n      <p class="Description">\n        <small>\n          <%- Description %>\n        </small>\n      </p>\n      <% } %>\n    </div>\n    <% if(attributes["getIcon"] && thumb_scale) { %>\n      <div class="lead-img">\n        <img class="thumb-<%- thumb_scale %>" alt="<%- _t(\'Preview image\') %> <%- Title || id %>" src="<%- getURL %>/@@images/image/<%- thumb_scale %>">\n      </div>\n    <% } %>\n  </div>\n</td>\n\n<% _.each(activeColumns, (column) => { %>\n  <% if(column !== \'Description\' && _.has(availableColumns, column)) { %>\n    <td class="<%- column %>" data-order="<%- attributes[column] %>"><%- convertColumnValue(column, attributes[column]) %></td>\n  <% } %>\n<% }); %>\n\n<td class="actionmenu-container"></td>\n'),events:{"change input":"itemSelected","click td.title a.manage":"itemClicked"},initialize:function(t){this.options=t,this.app=t.app,this.selectedCollection=this.app.selectedCollection,this.table=this.options.table,this.now=new Date,this.listenTo(this.table,"context-info:set",this.render)},expired:function(t){if(!t.attributes.ExpirationDate)return!1;var e=new Date(t.attributes.ExpirationDate);return this.now>e},ineffective:function(t){if(!t.attributes.EffectiveDate)return!1;var e=new Date(t.attributes.EffectiveDate);return this.now<e},render:function(){var t,e=(t=K().mark((function t(){var e,r,n,o,a;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=this.model.toJSON()).selected=!!this.selectedCollection.findWhere({UID:r.UID}),r.attributes=this.model.attributes,r.activeColumns=this.app.activeColumns,r.availableColumns=this.app.availableColumns,r.portal_type=r.portal_type?r.portal_type:"",r.contenttype=r.portal_type.toLowerCase().replace(/\.| /g,"-"),r._authenticator=l.Z.getAuthenticator(),r.thumb_scale=this.app.thumb_scale,t.next=11,l.Z.resolveIcon("contenttype/".concat(r.contenttype));case 11:return r.mimeIcon=t.sent,n=this.app.typeToViewAction&&this.app.typeToViewAction[r.attributes.portal_type]||"",r.viewURL=r.attributes.getURL+n,r._t=s.Z,r.convertColumnValue=this.convertColumnValue.bind(this),r.expired=this.expired(r),r.ineffective=this.ineffective(r),this.$el.html(this.template(r)),o=this.model.attributes,this.$el.addClass(["state-".concat(o.review_state),"type-".concat(o.portal_type)]),this.$el.attr("data-path",r.path),this.$el.attr("data-UID",r.UID),this.$el.attr("data-id",r.id),this.$el.attr("data-type",r.portal_type),this.$el.attr("data-folderish",r.is_folderish),this.$el.toggleClass("folder",r.is_folderish),this.$el.toggleClass("default-page",r.id===(null===(e=this.table.contextInfo)||void 0===e?void 0:e.defaultPage)),this.$el.toggleClass("expired",r.expired),this.$el.toggleClass("ineffective",r.ineffective),this.el.model=this.model,a=new B({app:this.app,model:this.model}),t.t0=i()(".actionmenu-container",this.$el),t.next=35,a.render();case 35:return t.t1=t.sent,t.t0.append.call(t.t0,t.t1),t.abrupt("return",this);case 38:case"end":return t.stop()}}),t,this)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){W(o,n,i,a,s,"next",t)}function s(t){W(o,n,i,a,s,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}(),convertColumnValue:function(t,e){if(this.table.dateColumns.includes(t)){var r=new Date(e);return r instanceof Date&&"Invalid Date"===r.toString()?e:r.toLocaleString(this.app.language,this.app.dateFormat)}return e},itemClicked:function(t){var e=this.app.keyEvent;if(e&&e.ctrlKey||!this.model.attributes.is_folderish)return null;t.preventDefault(),this.app.setCurrentPath(this.model.attributes.path),this.app.collection.getFirstPage()},itemSelected:function(){var t=this.$("input")[0],e=this.app.selectedCollection;t.checked?e.add(this.model.clone()):e.removeResult(this.model);var r=this.app.keyEvent;if(r&&r.shiftKey&&this.app.last_selected&&null!==this.app.last_selected.parentNode){var n,o=i()(this.app.last_selected),a=o.index(),s=this.$el.index(),c=J(this.app.tableView.$('input[type="checkbox"]'));try{for(c.s();!(n=c.n()).done;){var l=n.value,u=(o=i()(l)).parents("tr").index();if(u>a&&u<s||u<a&&u>s){this.checked=t.checked;var h=i()(this).closest("tr.itemRow");if(h.length>0){var p=h[0].model,f=e.getByUID(p.attributes.UID);this.checked?f||e.add(p.clone()):f&&e.removeResult(f)}}}}catch(t){c.e(t)}finally{c.f()}}this.app.last_selected=this.el}}),X=r(71015);r(62027);const tt="transitionend",et=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let r=t.getAttribute("href");if(!r||!r.includes("#")&&!r.startsWith("."))return null;r.includes("#")&&!r.startsWith("#")&&(r=`#${r.split("#")[1]}`),e=r&&"#"!==r?r.trim():null}return e},rt=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),nt=t=>rt(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(t):null,it=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,ot=[],at=t=>{"function"==typeof t&&t()},st=(t,e,r=!0)=>{if(!r)return void at(t);const n=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:r}=window.getComputedStyle(t);const n=Number.parseFloat(e),i=Number.parseFloat(r);return n||i?(e=e.split(",")[0],r=r.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(r))):0})(e)+5;let i=!1;const o=({target:r})=>{r===e&&(i=!0,e.removeEventListener(tt,o),at(t))};e.addEventListener(tt,o),setTimeout((()=>{i||e.dispatchEvent(new Event(tt))}),n)},ct=/[^.]*(?=\..*)\.|.*/,lt=/\..*/,ut=/::\d+$/,ht={};let pt=1;const ft={mouseenter:"mouseover",mouseleave:"mouseout"},dt=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function vt(t,e){return e&&`${e}::${pt++}`||t.uidEvent||pt++}function yt(t){const e=vt(t);return t.uidEvent=e,ht[e]=ht[e]||{},ht[e]}function gt(t,e,r=null){return Object.values(t).find((t=>t.originalHandler===e&&t.delegationSelector===r))}function mt(t,e,r){const n="string"==typeof e,i=n?r:e;let o=St(t);return dt.has(o)||(o=t),[n,i,o]}function bt(t,e,r,n,i){if("string"!=typeof e||!t)return;if(r||(r=n,n=null),e in ft){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};n?n=t(n):r=t(r)}const[o,a,s]=mt(e,r,n),c=yt(t),l=c[s]||(c[s]={}),u=gt(l,a,o?r:null);if(u)return void(u.oneOff=u.oneOff&&i);const h=vt(a,e.replace(ct,"")),p=o?function(t,e,r){return function n(i){const o=t.querySelectorAll(e);for(let{target:a}=i;a&&a!==this;a=a.parentNode)for(const s of o)if(s===a)return i.delegateTarget=a,n.oneOff&&_t.off(t,i.type,e,r),r.apply(a,[i])}}(t,r,n):function(t,e){return function r(n){return n.delegateTarget=t,r.oneOff&&_t.off(t,n.type,e),e.apply(t,[n])}}(t,r);p.delegationSelector=o?r:null,p.originalHandler=a,p.oneOff=i,p.uidEvent=h,l[h]=p,t.addEventListener(s,p,o)}function wt(t,e,r,n,i){const o=gt(e[r],n,i);o&&(t.removeEventListener(r,o,Boolean(i)),delete e[r][o.uidEvent])}function xt(t,e,r,n){const i=e[r]||{};for(const o of Object.keys(i))if(o.includes(n)){const n=i[o];wt(t,e,r,n.originalHandler,n.delegationSelector)}}function St(t){return t=t.replace(lt,""),ft[t]||t}const _t={on(t,e,r,n){bt(t,e,r,n,!1)},one(t,e,r,n){bt(t,e,r,n,!0)},off(t,e,r,n){if("string"!=typeof e||!t)return;const[i,o,a]=mt(e,r,n),s=a!==e,c=yt(t),l=e.startsWith(".");if(void 0!==o){if(!c||!c[a])return;return void wt(t,c,a,o,i?r:null)}if(l)for(const r of Object.keys(c))xt(t,c,r,e.slice(1));const u=c[a]||{};for(const r of Object.keys(u)){const n=r.replace(ut,"");if(!s||e.includes(n)){const e=u[r];wt(t,c,a,e.originalHandler,e.delegationSelector)}}},trigger(t,e,r){if("string"!=typeof e||!t)return null;const n=it();let i=null,o=!0,a=!0,s=!1;e!==St(e)&&n&&(i=n.Event(e,r),n(t).trigger(i),o=!i.isPropagationStopped(),a=!i.isImmediatePropagationStopped(),s=i.isDefaultPrevented());const c=new Event(e,{bubbles:o,cancelable:!0});if(void 0!==r)for(const t of Object.keys(r))Object.defineProperty(c,t,{get:()=>r[t]});return s&&c.preventDefault(),a&&t.dispatchEvent(c),c.defaultPrevented&&i&&i.preventDefault(),c}};var Et=_t;const Lt=new Map;var kt={set(t,e,r){Lt.has(t)||Lt.set(t,new Map);const n=Lt.get(t);n.has(e)||0===n.size?n.set(e,r):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(n.keys())[0]}.`)},get:(t,e)=>Lt.has(t)&&Lt.get(t).get(e)||null,remove(t,e){if(!Lt.has(t))return;const r=Lt.get(t);r.delete(e),0===r.size&&Lt.delete(t)}};function Ct(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!=typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch{return t}}function Ot(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}var Pt={setDataAttribute(t,e,r){t.setAttribute(`data-bs-${Ot(e)}`,r)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${Ot(e)}`)},getDataAttributes(t){if(!t)return{};const e={},r=Object.keys(t.dataset).filter((t=>t.startsWith("bs")&&!t.startsWith("bsConfig")));for(const n of r){let r=n.replace(/^bs/,"");r=r.charAt(0).toLowerCase()+r.slice(1,r.length),e[r]=Ct(t.dataset[n])}return e},getDataAttribute:(t,e)=>Ct(t.getAttribute(`data-bs-${Ot(e)}`))};var jt=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const r=rt(e)?Pt.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"==typeof r?r:{},...rt(e)?Pt.getDataAttributes(e):{},..."object"==typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const n of Object.keys(e)){const i=e[n],o=t[n],a=rt(o)?"element":null==(r=o)?`${r}`:Object.prototype.toString.call(r).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(i).test(a))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${a}" but expected type "${i}".`)}var r}};var $t=class extends jt{constructor(t,e){super(),(t=nt(t))&&(this._element=t,this._config=this._getConfig(e),kt.set(this._element,this.constructor.DATA_KEY,this))}dispose(){kt.remove(this._element,this.constructor.DATA_KEY),Et.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,r=!0){st(t,e,r)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return kt.get(nt(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.2.0-beta1"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}};class Nt extends $t{static get NAME(){return"alert"}close(){if(Et.trigger(this._element,"close.bs.alert").defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),Et.trigger(this._element,"closed.bs.alert"),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=Nt.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}var Tt,At;((t,e="hide")=>{const r=`click.dismiss${t.EVENT_KEY}`,n=t.NAME;Et.on(document,r,`[data-bs-dismiss="${n}"]`,(function(r){if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),!(i=this)||i.nodeType!==Node.ELEMENT_NODE||i.classList.contains("disabled")||(void 0!==i.disabled?i.disabled:i.hasAttribute("disabled")&&"false"!==i.getAttribute("disabled")))return;var i;const o=(t=>{const e=et(t);return e?document.querySelector(e):null})(this)||this.closest(`.${n}`);t.getOrCreateInstance(o)[e]()}))})(Nt,"close"),Tt=Nt,At=()=>{const t=it();if(t){const e=Tt.NAME,r=t.fn[e];t.fn[e]=Tt.jQueryInterface,t.fn[e].Constructor=Tt,t.fn[e].noConflict=()=>(t.fn[e]=r,Tt.jQueryInterface)}},"loading"===document.readyState?(ot.length||document.addEventListener("DOMContentLoaded",(()=>{for(const t of ot)t()})),ot.push(At)):At();function It(t){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function Dt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Zt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Zt(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Zt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Gt(){Gt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),a=new _(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return L()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function h(){}function p(){}function f(){}var d={};s(d,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==e&&r.call(y,i)&&(d=y);var g=f.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(i,o,a,s){var c=l(t[i],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==It(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=f,s(g,"constructor",f),s(f,"constructor",p),p.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),s(g,a,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Ut(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Vt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Ut(Object(r),!0).forEach((function(e){Ft(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ut(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Ft(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mt(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function zt(t){return function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){Mt(o,n,i,a,s,"next",t)}function s(t){Mt(o,n,i,a,s,"throw",t)}a(void 0)}))}}u.Z.getLogger("pat-structure/table");var Rt=v.extend({tagName:"div",template:a().template('<div class="fc-breadcrumbs-container">\n  <div class="fc-breadcrumbs" colspan="<%- activeColumns.length + 3 %>">\n    <a href="#" title="<%- _t(\'Root\') %>" aria-label="<%- _t(\'Root\') %>" data-path="/">\n      <%= homeIcon %> /\n    </a>\n    <% pathParts.forEach((part, idx) => {\n      if(part){\n        if(idx > 0){ %>\n          /\n        <% } %>\n        <a href="#" class="crumb" data-path="<%- part %>"><%- part %></a>\n      <% }\n    }); %>\n  </div>\n</div>\n\n<table class="pat-datatables table table-striped table-bordered"\n       data-pat-datatables="<%- datatables_options %>">\n  <thead>\n    <tr>\n      <th class="selection"><label for="selectAllInputCheckbox" class="hiddenStructure" aria-label="<%- _t(\'Select all\') %>"><%- _t(\'Select all\') %></label><input id="selectAllInputCheckbox" type="checkbox" class="select-all form-check-input" /></th>\n      <th class="title"><%- _t(\'Title\') %></th>\n      <% activeColumns.forEach((column, idx) => { %>\n        <% if(column !== \'Description\' && hasOwnProperty.call(availableColumns, column)) { %>\n          <th><%- availableColumns[column] %></th>\n        <% } %>\n      <% }); %>\n      <th class="actions"><%- _t("Actions") %></th>\n    </tr>\n  </thead>\n  <tbody>\n  </tbody>\n</table>\n'),tableSortable:null,initialize:function(t){var e=this;v.prototype.initialize.apply(e,[t]),e.collection=e.app.collection,e.selectedCollection=e.app.selectedCollection,e.subsetIds=[],e.contextInfo=null,e.tableSortable=null,e.listenTo(e.collection,"sync",e.render),e.listenTo(e.selectedCollection,"remove",e.render),e.listenTo(e.selectedCollection,"reset",e.render),i()("body").on("context-info-loaded",(function(t,r){e.contextInfo=r,e.setContextInfo()})),e.dateColumns=["ModificationDate","EffectiveDate","CreationDate","ExpirationDate","start","end","last_comment_date"]},events:{"click .fc-breadcrumbs a":"breadcrumbClicked","change .select-all":"selectAll"},setContextInfo:function(){var t=this.contextInfo.breadcrumbs;if(t&&t.length){var e=this.$(".fc-breadcrumbs a.crumb");a().each(t,(function(t,r){e.eq(r).html(t.title)}))}this.trigger("context-info:set")},render:function(){var t=zt(Gt().mark((function t(){var e,r,n,o,a,c=this;return Gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=Vt({order:[0,"asc"],aoColumnDefs:[{bSortable:!1,aTargets:[0,this.app.activeColumns.length+2]}],paging:!1,searching:!1,info:!1},this.app.options.datatables_options),t.t0=this.$el,t.t1=this,t.t2=s.Z,t.next=6,l.Z.resolveIcon("house");case 6:if(t.t3=t.sent,t.t4=this.app.getCurrentPath().split("/").slice(1).filter((function(t){return t.length>0})),t.t5=this.app.activeColumns,t.t6=this.app.availableColumns,t.t7=JSON.stringify(e),t.t8={_t:t.t2,homeIcon:t.t3,pathParts:t.t4,activeColumns:t.t5,availableColumns:t.t6,datatables_options:t.t7},t.t9=t.t1.template.call(t.t1,t.t8),t.t0.html.call(t.t0,t.t9),!this.collection.length){t.next=24;break}return r=i()("tbody",this.$el),n=this.collection.length,o=0,this.collection.each(function(){var t=zt(Gt().mark((function t(e){var i;return Gt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c.dateColumns.map((function(t){!e.attributes.hasOwnProperty(t)||"None"!==e.attributes[t]&&e.attributes[t]||(e.attributes[t]="")})),i=new Q({model:e,app:c.app,table:c}),t.next=4,i.render();case 4:r.append(i.el),++o===n&&c.el.dispatchEvent(new Event("table_row_rendering_finished"));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),a=function(){return new Promise((function(t){return L.Z.add_event_listener(c.el,"table_row_rendering_finished","table_row_rendering_finished__listener",t,{once:!0})}))},t.next=22,a();case 22:L.Z.remove_event_listener=(this.el,"table_row_rendering_finished__listener"),k.Z.scan(this.$el);case 24:return this.$el.find("table").on("init.dt",(function(){c.app.options.moveUrl&&c.addReordering(),c.storeOrder()})).on("order.dt",(function(t,e,r){if(1===r.length){var n=r[0];if(0===n.col&&"asc"===n.dir)return c.tableSortable&&c.tableSortable.enableSort(),void c.app.clearStatus("sorting_dndreordering_disabled")}var o=t.target,a=i()('<button type="button" class="btn btn-danger btn-sm"></button>').text((0,s.Z)("Reset column sorting")).on("click",(function(){var t=i()(o).dataTable().api();t.order([0,"asc"]),t.draw()}));c.app.setStatus({text:(0,s.Z)("Notice: Drag and drop reordering is disabled when viewing the contents sorted by a column."),type:"warning"},a,!1,"sorting_dndreordering_disabled"),c.tableSortable&&c.tableSortable.disableSort(),c.$el.removeClass("order-support")})),t.abrupt("return",this);case 26:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),breadcrumbClicked:function(t){t.preventDefault();var e=i()(t.target);"A"!==e[0].tagName&&(e=e.parent("a"));var r,n="",o=Dt(i()(e.prevAll("a").get().reverse()));try{for(o.s();!(r=o.n()).done;){var a=r.value,s=i()(a).attr("data-path");n+=s,"/"!==s&&(n+="/")}}catch(t){o.e(t)}finally{o.f()}n+=e.attr("data-path"),this.app.setCurrentPath(n),this.app.collection.getPage(this.app.collection.state.firstPage)},selectAll:function(t){i()(t.target).is(":checked")?i()('input[type="checkbox"]',this.$("tbody")).prop("checked",!0).change():(this.selectedCollection.remove(this.collection.models,{silent:!0}),this.selectedCollection.trigger("remove")),this.setContextInfo()},toggleSelectAll:function(t){i()(t.target).is(":checked")||this.$(".select-all").prop("checked",!1)},addReordering:function(){var t=this;this.app.inQueryMode()?this.$el.removeClass("order-support"):(this.$el.addClass("order-support"),this.tableSortable=new X.Z(this.$("tbody"),{selector:"tr",createDragItem:function(t,e){var r=e.clone(),n=i()("<table><tbody></tbody></table>");return i()("tbody",n).append(r),n.addClass("structure-dragging").css({opacity:.85,position:"absolute"}),n.width(e.width()),n.height(e.height()),n.appendTo(document.body),n},drop:function(e,r){0!==r&&(t.app.moveItem(e.attr("data-id"),r,t.subsetIds),t.storeOrder())}}))},storeOrder:function(){var t=[];this.$("tbody tr.itemRow").each((function(){t.push(i()(this).attr("data-id"))})),this.subsetIds=t}}),qt=r(57887),Bt=y.extend({tagName:"div",className:"popover",eventPrefix:"popover",template:'<div class="arrow"></div>\n<div class="popover-title">\n</div>\n<div class="items popover-content">\n</div>\n\n',content:null,title:null,triggerView:null,idPrefix:"popover-",triggerEvents:{"button:click":"toggle"},placement:"bottom",events:{},opened:!1,closeOnOutClick:!0,appendInContainer:!0,backdrop:void 0,$backdrop:null,useBackdrop:!0,backdropOptions:{zIndex:"1009",opacity:"0.4",className:"backdrop backdrop-popover",classActiveName:"backdrop-active",closeOnEsc:!1,closeOnClick:!0},initialize:function(t){var e=this;y.prototype.initialize.apply(this,[t]),this.bindTriggerEvents(),this.on("render",(function(){this.$el.attr("role","tooltip").attr("aria-hidden","false"),this.renderTitle(),this.renderContent()}),this),this.$el.on("keyup",(function(t){27===t.keyCode&&e.hide()}))},afterRender:function(){},getTemplateOptions:function(){return this.options},renderTitle:function(){var t=this.title;"function"==typeof t&&(t=t(this.getTemplateOptions())),this.$(".popover-title").empty().append(t)},renderContent:function(){this.$(".popover-content").empty().append(this.content(this.getTemplateOptions()))},bindTriggerEvents:function(){this.triggerView&&a().each(this.triggerEvents,(function(t,e){var r=this[t];r||i().error("Function not found."),this.stopListening(this.triggerView,e),this.listenTo(this.triggerView,e,r)}),this)},getPosition:function(){var t=this.triggerView.$el;return i().extend({},{width:t[0].offsetWidth,height:t[0].offsetHeight},t.offset())},getBodyClassName:function(){var t="popover-";return this.options.id&&(t+=this.options.id+"-"),t+="active"},show:function(){i()(".popover:visible").each((function(){var t=i()(this).data("component");t&&t.hide()})),this.position(),this.setBackdrop(),!0===this.useBackdrop&&this.backdrop.show(),this.opened=!0,this.triggerView&&this.triggerView.$el.addClass("active"),this.uiEventTrigger("show",this),this.$el.attr("aria-hidden","false"),i()("body").addClass(this.getBodyClassName())},position:function(){var t,e,r,n,i=this.getPosition(),o=this.$el;switch(e=this.placement,o.css({top:0,left:0}).addClass("active"),r=o[0].offsetWidth,n=o[0].offsetHeight,e){case"bottom-right":t={top:i.top+i.height,left:i.left+i.width-40};break;case"bottom":t={top:i.top+i.height,left:i.left+i.width/2-r/2};break;case"top":t={top:i.top-n,left:i.left+i.width/2-r/2};break;case"left":t={top:i.top+i.height/2-n/2,left:i.left-r};break;case"right":t={top:i.top+i.height/2-n/2,left:i.left+i.width}}this.applyPlacement(t,e)},applyPlacement:function(t,e){var r,n,i,o,a=this.$el,s=this.$el,c=s[0].offsetWidth,l=s[0].offsetHeight;a.removeClass(e),a.offset(t).addClass(e).addClass("active"),r=s[0].offsetWidth,n=s[0].offsetHeight,"top"===e&&n!==l&&(t.top=t.top+l-n,o=!0),"bottom"===e||"top"===e?(i=0,t.left<0&&(i=-2*t.left,t.left=0,a.removeClass(e),a.offset(t).addClass(e),r=s[0].offsetWidth,n=s[0].offsetHeight),this.positionArrow(i-c+r,r,"left")):"bottom-right"!==e&&this.positionArrow(n-l,n,"top"),o&&a.offset(t)},positionArrow:function(t,e,r){this.$(".arrow").css(r,t?50*(1-t/e)+"%":"")},hide:function(){this.opened=!1,this.$el.removeClass("active"),this.triggerView&&(this.triggerView.$el.removeClass("active"),this.triggerView.$el.attr("aria-hidden","true")),this.uiEventTrigger("hide",this),this.$el.attr("aria-hidden","true"),i()("body").removeClass(this.getBodyClassName())},toggle:function(t,e){this.opened?this.hide():this.show()},setBackdrop:function(){if(!0===this.useBackdrop&&void 0===this.backdrop){var t=this;this.$backdrop=this.$el.closest(".ui-backdrop-element"),0===this.$backdrop.length&&(this.$backdrop=i()("body")),this.backdrop=new qt.Z(this.$backdrop,this.backdropOptions),this.backdrop.$el.on("hidden.backdrop.patterns",(function(e){"backdrop.patterns"===e.namespace&&(e.stopPropagation(),!0===t.opened&&t.hide())})),this.on("popover:hide",(function(){this.backdrop.hide()}),this)}}});function Yt(t){return Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yt(t)}function Jt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Ht(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ht(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function Ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Kt(){Kt=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),a=new _(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return L()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function h(){}function p(){}function f(){}var d={};s(d,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==e&&r.call(y,i)&&(d=y);var g=f.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(i,o,a,s){var c=l(t[i],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==Yt(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=f,s(g,"constructor",f),s(f,"constructor",p),p.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),s(g,a,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function Wt(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}var Qt=Bt.extend({className:"popover selected-items",title:a().template('<input type="text" class="filter" placeholder="<%- _t("Filter") %>" /><a href="#" class=" remove-all"><%= removeIcon %> <%- _t("remove all") %></a>'),content:a().template("<% collection.each(function(item) { %><%= item_template($.extend({'removeIcon': removeIcon}, item.toJSON())) %><% }); %>"),events:{"click a.remove":"itemRemoved","keyup input.filter":"filterSelected","click .remove-all":"removeAll"},initialize:function(t){var e=this;Bt.prototype.initialize.apply(this,[t]);var r=0;this.listenTo(this.collection,"reset all add remove",(function(){clearTimeout(r),r=setTimeout((function(){e.render()}),50)})),this.options.item_template=a().template('<span class="selected-item">\n  <a href="#" data-uid="<%- UID %>" title="remove" class="remove">\n    <%= removeIcon %>\n  </a>\n  <%- Title %>\n</span>\n')},render:function(){var t,e=(t=Kt().mark((function t(){return Kt().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.Z.resolveIcon("x-circle");case 2:return this.options.removeIcon=t.sent,Bt.prototype.render.call(this),0===this.collection.length&&this.$el.removeClass("active"),t.abrupt("return",this);case 6:case"end":return t.stop()}}),t,this)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){Wt(o,n,i,a,s,"next",t)}function s(t){Wt(o,n,i,a,s,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}(),itemRemoved:function(t){t.preventDefault();var e=i()(t.currentTarget).data("uid");this.collection.removeByUID(e),0!==this.collection.length&&this.show()},filterSelected:function(t){var e,r=i()(t.target).val().toLowerCase(),n=Jt(i()(".selected-item",this.$el));try{for(n.s();!(e=n.n()).done;){var o=e.value,a=i()(o);-1===a.text().toLowerCase().indexOf(r)?a.hide():a.show()}}catch(t){n.e(t)}finally{n.f()}},removeAll:function(t){t.preventDefault(),this.collection.reset(),this.hide()}});function Xt(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return te(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return te(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function te(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ee=Bt.extend({events:{"click button.applyBtn":"applyButtonClicked","click button.closeBtn":"toggle"},submitText:(0,s.Z)("Apply"),initialize:function(t){this.app=t.app,this.className="popover "+t.id,this.title=t.form.title||t.title,this.submitText=t.form.submitText||(0,s.Z)("Apply"),this.submitContext=t.form.submitContext||"primary",this.data={},this.options=t,this.setContent(t.form.template),Bt.prototype.initialize.apply(this,[t])},setContent:function(t){var e="<form>"+t+"</form>";e+='<button class="btn btn-block btn-'+this.submitContext+' applyBtn">'+this.submitText+" </button>",this.options.form.closeText&&(e+='<button class="btn btn-block btn-default closeBtn">'+this.options.form.closeText+" </button>"),this.content=a().template(e)},getTemplateOptions:function(){var t,e=[],r=Xt(this.app.selectedCollection.models);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n.toJSON())}}catch(t){r.e(t)}finally{r.f()}return i().extend({},!0,this.options,{items:e,data:this.data})},applyButtonClicked:function(){var t,e={},r=Xt(this.$el.find("form").serializeArray());try{for(r.s();!(t=r.n()).done;){var n=t.value;n.name in e?e[n.name]+=","+n.value:e[n.name]=n.value}}catch(t){r.e(t)}finally{r.f()}this.app.buttonClickEvent(this.triggerView,e),this.hide()},afterRender:function(){var t=this;if(this.options.form.dataUrl){this.$(".popover-content").html((0,s.Z)("Loading...")),this.app.loading.show();var e=this.app.getAjaxUrl(this.options.form.dataUrl);i().ajax({url:e,dataType:"json",type:"POST",cache:!1,data:{selection:JSON.stringify(this.app.getSelectedUids()),transitions:!0,render:"yes"}}).done((function(e){t.data=e.data||e,t.renderContent(),k.Z.scan(t.$el)})).fail((function(){var e=t.content;t.setContent("<p>"+(0,s.Z)("Error loading popover from server.")+"</p>",!1),t.renderContent(),t.content=e})).always((function(){t.app.loading.hide(),t.position()}))}else k.Z.scan(this.$el),this.position()},toggle:function(t,e){Bt.prototype.toggle.apply(this,[t,e]),this.opened&&(this.$el.replaceWith(this.render().el),this.position())}}),re=Bt.extend({className:"popover rearrange",title:a().template('<%- _t("Rearrange items in this folder") %>'),content:a().template('<div class="form-group"><label><%- _t("What to rearrange on") %></label><select name="rearrange_on" class="form-select"><% _.each(rearrangeProperties, function(title, property) { %><option value="<%- property %>"><%- title %></option><% }); %></select><p class="help-block"><b><%- _t("This permanently changes the order of items in this folder. This operation may take a long time depending on the size of the folder.") %></b></p></div><div class="form-check"><input class="form-check-input" type="checkbox" name="reversed" /><label class="form-check-label"><%- _t("Reverse") %></label></div><button class="btn btn-block btn-primary btn-sm"><%- _t("Rearrange") %></button>'),events:{"click button":"rearrangeButtonClicked"},initialize:function(t){this.app=t.app,Bt.prototype.initialize.apply(this,[t]),this.options.rearrangeProperties=this.app.options.rearrange.properties},render:function(){return Bt.prototype.render.call(this),this.$rearrangeOn=this.$('[name="rearrange_on"]'),this.$reversed=this.$('[name="reversed"]'),this},rearrangeButtonClicked:function(){if("/"!==this.app.collection.getCurrentPath()||window.confirm((0,s.Z)("Sorting the content on the base of the site could affect your navigation order. Are you certain you want to do this?"))){var t={rearrange_on:this.$rearrangeOn.val(),reversed:!1};this.$reversed[0].checked&&(t.reversed=!0),this.app.buttonClickEvent(this.triggerView,t),this.hide()}}}),ne=E.extend({collection:null,template:'<span class="glyphicon glyphicon-list"></span>\n<%- title %>\n<span class="label<% if (length > 0) { %> label-success<% } else { %> label-default<% } %>">\n  <%- length %>\n</span>\n',initialize:function(t){var e=this;E.prototype.initialize.apply(this,[t]),this.timeout=0,null!==this.collection&&this.collection.on("add remove reset",(function(){clearTimeout(e.timeout),e.timeout=setTimeout((function(){e.render(),0===e.collection.length&&e.$el.removeClass("active")}),50)}),this)},serializedModel:function(){var t={icon:"",title:this.options.title,length:0};return null!==this.collection&&(t.length=this.collection.length),t}});u.Z.getLogger("pat-structure/table").setLevel("DEBUG");var ie=d().View.extend({events:{"click a.servernext":"nextResultPage","click a.serverprevious":"previousResultPage","click a.serverlast":"gotoLast","click a.page":"gotoPage","click a.serverfirst":"gotoFirst","click a.serverpage":"gotoPage","click .serverhowmany a":"changeCount"},tagName:"aside",template:a().template('  <ul class="pagination pagination-sm pagination-centered">\n    <li class="page-item <% if (currentPage === 1) { %>disabled<% } %>">\n      <a href="#" class="page-link serverfirst">\n        &laquo;\n      </a>\n    </li>\n    <li class="page-item <% if (currentPage === 1) { %>disabled<% } %>">\n      <a href="#" class="page-link serverprevious">\n        &lt;\n      </a>\n    </li>\n    <% _.each(pages, (p) => { %>\n    <li class="page-item <% if (currentPage == p) { %>active<% } else if ( p == \'...\' ) { %>disabled<% }%>">\n      <a href="#" class="page-link page"><%- p %></a>\n    </li>\n    <% }); %>\n    <li class="page-item <% if (currentPage === totalPages) { %>disabled<% } %>">\n      <a href="#" class="page-link servernext">\n        &gt;\n      </a>\n    </li>\n    <li class="page-item <% if (currentPage === totalPages) { %>disabled<% } %>">\n      <a href="#" class="page-link serverlast">\n        &raquo;\n      </a>\n    </li>\n  </ul>\n\n  <div class="pagination-info"><%- _t("Show:") %></div>\n\n  <ul class="pagination pagination-sm">\n    <li class="page-item serverhowmany serverhowmany15 <% if(pageSize == 15){ %>disabled<% } %>">\n      <a href="#" class="page-link">15</a>\n    </li>\n    <li class="page-item serverhowmany serverhowmany30 <% if(pageSize == 30){ %>disabled<% } %>">\n      <a href="#" class="page-link">30</a>\n    </li>\n    <li class="page-item serverhowmany serverhowmany50 <% if(pageSize == 50){ %>disabled<% } %>">\n      <a href="#" class="page-link">50</a>\n    </li>\n    <li class="page-item serverhowmany serverhowmany250 <% if(pageSize == 250){ %>disabled<% } %>">\n      <a href="#" class="page-link">250</a>\n    </li>\n  </ul>\n\n  <div class="pagination-info">\n    <%- _t("Page:") %> <span class="current"><%- currentPage %></span>\n    <%- _t("of") %>\n    <span class="total"><%- totalPages %></span>\n          <%- _t("shown") %>\n  </div>\n'),maxPages:7,initialize:function(t){this.options=t,this.app=this.options.app,this.collection=this.app.collection,this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"sync",this.render)},render:function(){var t=this.collection.state;t.pages=this.getPages(t);var e=this.template(i().extend({_t:s.Z},t));return this.$el.html(e),this},getPages:function(t){var e=t.totalPages;if(!e)return[];var r=1,n=e;e>this.maxPages&&(r=Math.max(1,Math.floor(t.currentPage-this.maxPages/2)),(n=Math.min(r+this.maxPages,e))-r<this.maxPages&&(r-=Math.floor(this.maxPages/2)));for(var i=[],o=r;o<=n;o+=1)i.push(o);return i[0]>1&&(i[0]>2&&(i=["..."].concat(i)),i=[1].concat(i)),i[i.length-1]<e-1&&(i[i.length-2]<e-2&&i.push("..."),i.push(e)),i},nextResultPage:function(t){t.preventDefault(),this.app.clearStatus(),this.collection.getNextPage()},previousResultPage:function(t){t.preventDefault(),this.app.clearStatus(),this.collection.getPreviousPage()},gotoFirst:function(t){t.preventDefault(),this.app.clearStatus(),this.collection.getPage(this.collection.state.firstPage)},gotoLast:function(t){t.preventDefault(),this.app.clearStatus(),this.collection.getPage(this.collection.state.totalPages)},gotoPage:function(t){t.preventDefault(),this.app.clearStatus();var e=parseInt(i()(t.target).text());this.collection.getPage(e)},changeCount:function(t){t.preventDefault(),this.app.clearStatus();var e=parseInt(i()(t.target).text());this.collection.setPageSize(e,{first:!0}),this.app.setCookieSetting("pageSize",e)}});function oe(t){return oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(t)}function ae(){ae=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),a=new _(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return L()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function h(){}function p(){}function f(){}var d={};s(d,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==e&&r.call(y,i)&&(d=y);var g=f.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(i,o,a,s){var c=l(t[i],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==oe(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=f,s(g,"constructor",f),s(f,"constructor",p),p.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),s(g,a,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function se(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function ce(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return le(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return le(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function le(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var ue=Bt.extend({className:"popover attribute-columns",title:a().template('<%- _t("Columns") %>'),content:a().template('<label><%- _t("Select columns to show, drag and drop to reorder") %></label><ul></ul><button class="btn btn-block btn-primary btn-sm"><%- _t("Save") %></button>'),itemTemplate:a().template('<li><label><input type="checkbox" value="<%- id %>"/><%- title %></label></li>'),events:{"click button":"applyButtonClicked"},initialize:function(t){this.app=t.app,Bt.prototype.initialize.apply(this,[t])},afterRender:function(){var t=this;this.$container=this.$("ul");var e,r=ce(this.app.activeColumns);try{for(r.s();!(e=r.n()).done;){var n=e.value,o=i()(this.itemTemplate({title:this.app.availableColumns[n],id:n}));o.find("input")[0].checked=!0,this.$container.append(o)}}catch(t){r.e(t)}finally{r.f()}var s,c=ce(a().keys(a().omit(this.app.availableColumns,this.app.activeColumns)).sort((function(e,r){var n=t.app.availableColumns[e],i=t.app.availableColumns[r];return n<i?-1:n==i?0:1})));try{for(c.s();!(s=c.n()).done;){var l=s.value,u=i()(this.itemTemplate({title:this.app.availableColumns[l],id:l}));this.$container.append(u)}}catch(t){c.e(t)}finally{c.f()}return new X.Z(this.$container,{selector:"li"}),this},applyButtonClicked:function(){var t,e=this;return(t=ae().mark((function t(){var r,n,o;return ae().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.hide(),e.app.activeColumns=[],r=ce(e.$("input:checked"));try{for(r.s();!(n=r.n()).done;)o=n.value,e.app.activeColumns.push(i()(o).val())}catch(t){r.e(t)}finally{r.f()}return e.app.setCookieSetting(e.app.activeColumnsCookie,e.app.activeColumns),t.next=7,e.app.tableView.render();case 7:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){se(o,n,i,a,s,"next",t)}function s(t){se(o,n,i,a,s,"throw",t)}a(void 0)}))})()}}),he=r(73918),pe=v.extend({tagName:"div",className:"navbar-search form-search ui-offset-parent",template:a().template('<div class="input-group"><input id="textFilterInput" type="text" class="form-control search-query" aria-label="<%- _t("Search") %>" placeholder="<%- _t("Search") %>"></div>'),popoverContent:a().template('<input class="pat-querystring" />'),events:{"keyup .search-query":"filter"},term:null,timeoutId:null,keyupDelay:300,statusKeyFilter:"textfilter_status_message_filter",statusKeySorting:"textfilter_status_message_sorting",initialize:function(t){v.prototype.initialize.apply(this,[t]),this.app=this.options.app},setFilterStatusMessage:function(){var t=this,e=i()('<button type="button" class="btn btn-primary btn-sm"></button>').text((0,s.Z)("Clear")).on("click",(function(){return t.clearFilter()})),r=(0,s.Z)("This listing has filters applied. Not all items are shown.");this.app.setStatus({text:r,type:"success"},e,!0,this.statusKeyFilter);var n=(0,s.Z)("Drag and drop reordering is disabled while filters are applied.");this.app.setStatus({text:n,type:"warning"},null,!0,this.statusKeySorting)},clearFilterStatusMessage:function(){this.term||this.app.additionalCriterias.length||(this.app.clearStatus(this.statusKeyFilter),this.app.clearStatus(this.statusKeySorting))},setTerm:function(t,e){var r=this.$el[0].querySelector(".search-query");if(this.term=encodeURIComponent(t),e&&(r.value=t),this.app.collection.currentPage=1,this.app.collection.fetch(),t)r.classList.add("has-filter"),this.setFilterStatusMessage();else{var n=!1;try{var i=this.$queryString.val();i&&JSON.parse(i).length>0&&(n=!0)}finally{n||(r.classList.remove("has-filter"),this.clearFilterStatusMessage())}}},setQuery:function(t,e){var r=null,n=null;try{"string"==typeof t?(n=JSON.parse(t),r=t):(r=JSON.stringify(t),n=t)}catch(t){n=[],r="[]"}e&&this.$queryString.val(r),this.app.additionalCriterias=n,this.app.collection.currentPage=1,this.app.collection.fetch(),n.length?(this.button.$el[0].classList.add("has-filter"),this.setFilterStatusMessage()):this.term||(this.button.$el[0].classList.remove("has-filter"),this.clearFilterStatusMessage())},clearTerm:function(){this.setTerm("",!0)},clearFilter:function(){this.setTerm("",!0),this.setQuery([],!0)},render:function(){var t=this;return this.$el.html(this.template({_t:s.Z})),this.button=new E({title:(0,s.Z)("Filter"),icon:"filter",extraClasses:["btn-queryfilter"]}),this.popover=new Bt({triggerView:this.button,id:"structure-query",title:a().template((0,s.Z)("Filter")),content:this.popoverContent,placement:"left"}),this.$el.find(".input-group").append(this.button.render().el),this.$el.append(this.popover.render().el),this.popover.$el.addClass("query"),this.$queryString=this.popover.$("input.pat-querystring"),this.queryString=new he.Z(this.$queryString,{indexOptionsUrl:this.app.options.indexOptionsUrl,showPreviews:!1}),this.queryString.$el.on("change",(function(){t.timeoutId&&clearTimeout(t.timeoutId),t.timeoutId=setTimeout((function(){t.setQuery(t.$queryString.val(),!1)}),t.keyupDelay)})),this.queryString.$el.on("initialized",(function(){t.queryString.$sortOn.on("change",(function(){t.app.sort_on=t.queryString.$sortOn.val(),t.app.collection.currentPage=1,t.app.collection.fetch()})),t.queryString.$sortOrder.change((function(){t.queryString.$sortOrder[0].checked?t.app.sort_order="reverse":t.app.sort_order="ascending",t.app.collection.currentPage=1,t.app.collection.fetch()}))})),this},filter:function(t){var e=this;this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout((function(){var r=i()(t.currentTarget);e.setTerm(r.val(),!1)}),this.keyupDelay)}}),fe=r(37103),de=Bt.extend({className:"popover upload",title:a().template('<%- _t("Upload files") %>'),content:a().template('<input type="text" name="upload" style="display:none" /><div class="uploadify-me"></div>'),initialize:function(t){var e=this;this.app=t.app,Bt.prototype.initialize.apply(this,[t]),this.currentPathData=null,i()("body").on("context-info-loaded",(function(t,r){e.currentPathData=r}))},render:function(){var t=this;Bt.prototype.render.call(this);var e=this.app.options.upload;return e.success=function(){t.app.collection.fetch()},e.currentPath=this.app.getCurrentPath(),e.allowPathSelection=!1,this.upload=new fe.default(this.$(".uploadify-me").addClass("pat-upload"),e),this},toggle:function(t,e){if(Bt.prototype.toggle.apply(this,[t,e]),this.opened){var r=this.app.getCurrentPath();this.currentPathData&&r!==this.upload.currentPath&&this.upload.setPath(r)}}}),ve=d().Collection.extend({model:P,removeResult:function(t){return this.removeByUID(t.uid())},removeByUID:function(t){var e=this.getByUID(t);return e&&this.remove(e),e},getByUID:function(t){return this.findWhere({UID:t})}}),ye=(r(88816),d().PageableCollection.extend({model:P,mode:"server",initialize:function(t,e){this.options=e,this.view=e.view,this.url=e.url,this.queryHelper=l.Z.QueryHelper(i().extend(!0,{},this.view.options,{attributes:this.view.options.queryHelperAttributes})),this.queryParser=function(t){var e,r,n,o,a;void 0===t&&(t={});var s=(null===(e=this.view)||void 0===e||null===(r=e.toolbar)||void 0===r||null===(n=r.get)||void 0===n||null===(o=n.call(r,"filter"))||void 0===o?void 0:o.term)||null,c=(null===(a=this.view)||void 0===a?void 0:a.sort_on)||"getObjPositionInParent",l=this.view.sort_order;return JSON.stringify({criteria:this.queryHelper.getCriterias(s,i().extend({},t,{additionalCriterias:this.view.additionalCriterias})),sort_on:c,sort_order:l})},"#/"===window.location.hash.substring(0,2)&&(this.queryHelper.currentPath=window.location.hash.substring(1)),d().PageableCollection.prototype.initialize.apply(this,[t,e])},getCurrentPath:function(){return this.queryHelper.getCurrentPath()},setCurrentPath:function(t){this.queryHelper.currentPath=t},queryParams:{query:function(){return this.queryParser()},batch:function(){return this.queryHelper.options.batchSize=this.state.pageSize,JSON.stringify(this.queryHelper.getBatch(this.state.currentPage))},attributes:function(){return JSON.stringify(this.queryHelper.options.attributes)}},parseState:function(t,e,r,n){this.state.totalRecords=t.total,this.state.totalPages=Math.ceil(t.total/r.pageSize)},parseRecords:function(t,e){var r=t.results;return r.forEach((function(t,e){t._sort=e})),r}}));function ge(t){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ge(t)}function me(){me=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",o=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function c(t,e,r,n){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),a=new _(n||[]);return o._invoke=function(t,e,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return L()}for(r.method=i,r.arg=o;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===u)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=l(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===u)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}(t,r,a),o}function l(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var u={};function h(){}function p(){}function f(){}var d={};s(d,i,(function(){return this}));var v=Object.getPrototypeOf,y=v&&v(v(E([])));y&&y!==e&&r.call(y,i)&&(d=y);var g=f.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(i,o,a,s){var c=l(t[i],t,o);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"==ge(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var n=l(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,u;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function E(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:L}}function L(){return{value:void 0,done:!0}}return p.prototype=f,s(g,"constructor",f),s(f,"constructor",p),p.displayName=s(f,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),s(b.prototype,o,(function(){return this})),t.AsyncIterator=b,t.async=function(e,r,n,i,o){void 0===o&&(o=Promise);var a=new b(c(e,r,n,i),o);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),s(g,a,"Generator"),s(g,i,(function(){return this})),s(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,u):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),S(r),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),u}},t}function be(t,e,r,n,i,o,a){try{var s=t[o](a),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,i)}function we(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return xe(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xe(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,i=function(){};return{s:i,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function xe(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Se=u.Z.getLogger("pat-structure/app"),_e=v.extend({tagName:"div",statusTemplate:a().template('<div class="alert alert-<%- type %> status fc-status">\n  <strong class="fc-status-label"><%- label %></strong>\n  <span class="fc-status-text">\n    <% if(text){ %>\n    <%- text %>\n    <% } else { %>\n    &nbsp;<% // &nbsp; to get correct height for empty alerts %>\n    <% } %>\n  </span>\n</div>\n'),statusMessages:[],sort_on:"getObjPositionInParent",sort_order:"ascending",additionalCriterias:[],cookieSettingPrefix:"_fc_",buttons:null,textfilter:null,forms:[],pasteAllowed:function(){return!!p().get("__cp")},initialize:function(t){var e=this;v.prototype.initialize.apply(this,[t]),this.loading=new l.Z.Loading,this.loading.show(),i()(document).on("click",(function(t){var e=i()(t.target);if(e.is(":visible")&&"hidden"!==e.css("visibility")&&"0"!==e.css("opacity")&&!e.is("a")&&!e.parent().is("a")){var r=i()(".popover:visible");if(r.length>0&&!i().contains(r[0],e[0])){var n=r.data("component");n&&n.hide()}}})),this.collection=new ye([],{view:this,url:this.options.collectionUrl}),this.activeColumns=this.getCookieSetting(this.activeColumnsCookie,this.activeColumns),this.selectedCollection=new ve,this.pagingView=new ie({app:this}),this.tableView=new Rt({app:this}),this.collection.state.pageSize=this.getCookieSetting("pageSize",15),this.collection.fetch(),this.setupButtons(),this.wellView=new Qt({collection:this.selectedCollection,triggerView:this.toolbar.get("selected-items"),app:this,id:"selected-items"}),this.toolbar.get("selected-items").disable(),this.buttons.disable();var r=0;this.selectedCollection.on("add remove reset",(function(){clearTimeout(r),r=setTimeout((function(){e.updateButtons()}),100)}),this),this.collection.on("sync",(function(){if(e.contextInfoUrl&&i().ajax({url:e.getAjaxUrl(e.contextInfoUrl),dataType:"json",success:function(t){i()("body").trigger("context-info-loaded",[t])},error:function(t){404===t.status&&Se.info("context info url not found")}}),e.doNotPushState)e.doNotPushState=!1;else{e.loading.show(),e.updateButtons();var t,r=e.getCurrentPath();if("/"===r&&(r=""),e.options.pushStateUrl)t=e.options.pushStateUrl.replace("/{path}","{path}").replace("{path}",r),window.history.pushState(null,null,t);else e.options.urlStructure&&(t=e.options.urlStructure.base+r+e.options.urlStructure.appended,window.history.pushState(null,null,t));e.options.traverseView&&(r=""),i()("body").trigger("structure-url-changed",[r]),e.loading.hide()}})),(this.options.pushStateUrl||this.options.urlStructure)&&l.Z.featureSupport.history()&&(i()(window).bind("popstate",(function(){var t,r,n=l.Z.getWindow().location.href;if(-1!==n.indexOf("?")&&(n=n.split("?")[0]),-1!==n.indexOf("#")&&(n=n.split("#")[0]),e.options.pushStateUrl){var o=e.options.pushStateUrl.split("{path}");t=o[0],r=o[1]}else t=e.options.urlStructure.base,r=e.options.urlStructure.appended;var a=n.substring(t.length);a.substring(a.length-r.length)===r&&(a=a.substring(0,a.length-r.length)),a||(a="/"),e.setCurrentPath(a),i()("body").trigger("structure-url-changed",[a]),e.doNotPushState=!0,e.collection.getPage(e.collection.state.firstPage)})),i()(document).bind("keyup keydown",(function(t){e.keyEvent=t}))),this.togglePasteBtn()},updateButtons:function(){this.selectedCollection.length?(this.toolbar.get("selected-items").enable(),this.buttons.enable()):(this.toolbar.get("selected-items").disable(),this.buttons.disable()),this.togglePasteBtn()},togglePasteBtn:function(){a().find(this.buttons.items,(function(t){return"paste"===t.id}))&&(this.pasteAllowed()?this.buttons.get("paste").enable():this.buttons.get("paste").disable())},inQueryMode:function(){return!(!this.toolbar||!this.toolbar.get("filter").term)||(this.additionalCriterias.length>0||(!(!this.sort_on||"getObjPositionInParent"===this.sort_on)||"ascending"!==this.sort_order))},getSelectedUids:function(t){void 0===t&&(t=this.selectedCollection);var e=[];return t.each((function(t){e.push(t.uid())})),e},getCurrentPath:function(){return this.collection.getCurrentPath()},setCurrentPath:function(t){this.collection.setCurrentPath(t),this.clearStatus()},getAjaxUrl:function(t){return t.replace("{path}",this.getCurrentPath())},buttonClickEvent:function(t){var e=this,r=null,n=null;if(t.url){if(this.loading.show(),arguments.length>1){var o=arguments[1];o.preventDefault||(r=o)}if(arguments.length>2){var a=arguments[2];"function"==typeof a&&(n=a)}null===r&&(r={}),void 0===r.selection&&(r.selection=JSON.stringify(this.getSelectedUids())),r._authenticator=l.Z.getAuthenticator(),void 0===r.folder&&(r.folder=this.getCurrentPath());var s=this.getAjaxUrl(t.url);i().ajax({url:s,type:"POST",data:r,success:function(t){e.ajaxSuccessResponse.apply(e,[t,n]),e.loading.hide()},error:function(t){e.ajaxErrorResponse.apply(e,[t,s]),e.loading.hide()}},this)}},ajaxSuccessResponse:function(t,e){this.clearStatus(),this.selectedCollection.reset(),"success"===t.status&&this.collection.reset(),t.msg&&this.setStatus({text:t.msg,type:t.status||"warning"}),null!=e&&e(t),this.collection.fetch()},ajaxErrorResponse:function(t,e){404===t.status?window.alert((0,s.Z)("operation url ${url} is not valid",{url:e})):window.alert((0,s.Z)("there was an error performing the action"))},setupButtons:function(){var t=this,e=[],r=new E({id:"structure-columns",tooltip:(0,s.Z)("Configure displayed columns"),icon:"plone-three-dots"});if(this.columnsView=new ue({app:this,triggerView:r,id:"structure-columns",placement:"bottom-right"}),e.push(r),e.push(new ne({title:(0,s.Z)("Selected"),id:"selected-items",tooltip:(0,s.Z)("Manage selection"),collection:this.selectedCollection,icon:"plone-selection"})),this.options.rearrange){var n=new E({id:"structure-rearrange",title:(0,s.Z)("Rearrange"),icon:"plone-rearrange",tooltip:(0,s.Z)("Rearrange folder contents"),url:this.options.rearrange.url});this.rearrangeView=new re({triggerView:n,app:this,id:"structure-rearrange"}),e.push(n)}if(this.options.upload&&l.Z.featureSupport.dragAndDrop()&&l.Z.featureSupport.fileApi()){var i=new E({id:"upload",title:(0,s.Z)("Upload"),tooltip:(0,s.Z)("Upload files"),icon:"upload"});this.uploadView=new de({triggerView:i,app:this,id:"upload"}),e.push(i)}var o,a=[],c=we(this.options.buttons);try{for(c.s();!(o=c.n()).done;){var u=o.value;try{!function(){var e=new E(u);if(a.push(e),e.form){u.triggerView=e,u.app=t;var r=new ee(u);t.forms.push(r.el)}else e.on("button:click",(function(){return t.buttonClickEvent(e)}),t)}()}catch(t){Se.error("Error initializing button ".concat(u.title||u.id," ").concat(t))}}}catch(t){c.e(t)}finally{c.f()}this.buttons=new m({items:a,id:"mainbuttons",app:this}),e.push(this.buttons),this.textfilter=new pe({id:"filter",app:this}),e.push(this.textfilter),this.toolbar=new g({items:e})},moveItem:function(t,e,r){var n=this;i().ajax({url:this.getAjaxUrl(this.options.moveUrl),type:"POST",data:{delta:e,id:t,_authenticator:l.Z.getAuthenticator(),subsetIds:JSON.stringify(r)},dataType:"json",success:function(t){n.clearStatus(),t.msg?n.setStatus({text:t.msg}):"success"!==t.status&&n.setStatus({text:(0,s.Z)("Error moving item"),type:"danger"}),n.collection.fetch()},error:function(){n.clearStatus(),n.setStatus({text:(0,s.Z)("Error moving item"),type:"danger"})}})},clearStatus:function(t){var e=this.$el[0].querySelector(".fc-status-container"),r=[];t?((r=this.statusMessages.filter((function(e){return e.key===t}))).forEach((function(t){try{e.removeChild(t.el)}catch(t){}})),this.statusMessages=this.statusMessages.filter((function(e){return e.key!==t}))):(this.statusMessages.forEach(function(t){if(!t.fixed)try{e.removeChild(t.el),r.push(t)}catch(t){}}.bind(this)),this.statusMessages=this.statusMessages.filter((function(t){return-1===r.indexOf(t)})))},setStatus:function(t,e,r,n){if(!(n&&this.statusMessages.filter((function(t){return t.key===n})).length>0)){var o=c.Z.create_from_string(this.statusTemplate({label:t.label||"",text:t.text,type:t.type||"warning"})).lastChild;return e&&(e=i()(e)[0],o.appendChild(e)),t={el:o,fixed:r,key:n},this.$el[0].querySelector(".fc-status-container").appendChild(t.el),this.statusMessages.push(t),t}},render:function(){var t,e=(t=me().mark((function t(){var e,r,n,o,a;return me().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$el.append(this.toolbar.render().el),!this.wellView){t.next=7;break}return t.t0=this.$el.find("#btn-"+this.wellView.id),t.next=5,this.wellView.render();case 5:t.t1=t.sent.el,t.t0.after.call(t.t0,t.t1);case 7:e=we(this.forms);try{for(e.s();!(r=e.n()).done;)n=r.value,o=i()(n).attr("id"),(a=this.$el.find("#btn-"+o)).closest(".btn-group").length?a.closest(".btn-group").after(n):this.$el.find("#btn-"+o).after(n)}catch(t){e.e(t)}finally{e.f()}return this.$el.append(c.Z.create_from_string('<div class="fc-status-container"></div>')),this.columnsView&&this.$el.find("#btn-"+this.columnsView.id).after(this.columnsView.render().el),this.rearrangeView&&this.$el.find("#btn-"+this.rearrangeView.id).after(this.rearrangeView.render().el),this.uploadView&&this.$el.find("#btn-"+this.uploadView.id).after(this.uploadView.render().el),this.$el.append(this.tableView.el),this.$el.append(this.pagingView.el),null!==this.options.backdropSelector?i()(this.options.backdropSelector).addClass("ui-backdrop-element"):this.$el.addClass("ui-backdrop-element"),t.abrupt("return",this);case 17:case"end":return t.stop()}}),t,this)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function a(t){be(o,n,i,a,s,"next",t)}function s(t){be(o,n,i,a,s,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}(),getCookieSetting:function(t,e){var r;void 0===e&&(e=null);try{r=p().get(this.cookieSettingPrefix+t),r=JSON.parse(r).value}catch(t){return e}return null==r?e:r},setCookieSetting:function(t,e){p().set(this.cookieSettingPrefix+t,JSON.stringify({value:e}))}})}}]);
//# sourceMappingURL=58133.a90a15dbe0554f3201b0.min.js.map