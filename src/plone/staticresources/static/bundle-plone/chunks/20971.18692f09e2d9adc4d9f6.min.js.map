{"version":3,"file":"chunks/20971.18692f09e2d9adc4d9f6.min.js","mappings":";qPAMe,MAAMA,EACjBC,YAAYC,GACRC,KAAKD,GAAKA,CACb,CACDE,aACIC,IAAE,oBAAoBC,MAAK,WACvB,IAAIC,EAAMF,IAAEF,MACRK,EAAU,CACVC,cAAe,CACXC,UAAW,SAAUC,GACjBA,EAAMC,OACNP,IAAE,mCAAmCQ,QAAQ,SAChD,IAGTN,EAAIO,SAAS,aACG,IAAIC,EAAAA,EAAMR,EAAKC,EAClC,GACJ,CAEDQ,OACI,IAAIC,EAAOd,KACXc,EAAKb,aACLC,IAAE,qBAAqBa,GAAG,QAAS,kBAAkB,WACjDC,SAASC,cAAc,8BAA8BC,MAAQ,GAC7DF,SACKC,cAAc,yDACdE,OACR,IAEDjB,IAAE,qBAAqBa,GACnB,QACA,sCACA,WACI,IAAIX,EAAMF,IAAEF,MAWZ,OAVAoB,EAAAA,EAAAA,QAAAA,OACAlB,IAAE,qBAAqBmB,KACnBjB,EAAIkB,KAAK,QAAU,kBACnB,WAEIC,EAAAA,EAAAA,KAAcrB,IAAE,kBAChBY,EAAKb,aACLmB,EAAAA,EAAAA,QAAAA,MACH,KAEE,CACV,IAILlB,IAAE,qBAAqBa,GAAG,SAAU,mBAAmB,SAAUS,GAC7D,IAAIpB,EAAMF,IAAEF,MAgBZ,OAfAoB,EAAAA,EAAAA,QAAAA,OACAlB,IAAE,qBAAqBmB,KACnBnB,IAAE,QAAQoB,KAAK,iBACX,IACAlB,EAAIqB,YACJ,kBACJ,WACIvB,IAAE,YAAYO,OACdP,IAAE,8BAA8BQ,QAAQ,YACxCa,EAAAA,EAAAA,KAAcrB,IAAE,kBAChBY,EAAKb,aACLmB,EAAAA,EAAAA,QAAAA,MACH,IAELI,EAAEE,kBACK,CACV,IAGDxB,IAAE,qBAAqBa,GAAG,SAAU,qBAAqB,WACrDb,IAAE,mCAAmCQ,QAAQ,SAChD,IAGDR,IAAE,8BAA8BQ,QAAQ,WAC3C,E","sources":["webpack://plone.staticresources/./node_modules/@plone/mockup/src/pat/controlpanels/registry--implementation.js"],"sourcesContent":["import $ from \"jquery\";\nimport registry from \"@patternslib/patternslib/src/core/registry\";\nimport utils from \"../../core/utils\";\nimport Modal from \"../modal/modal\";\nimport Base from \"@patternslib/patternslib/src/core/base\";\n\nexport default class ConfigRegistry {\n    constructor(el) {\n        this.el = el;\n    }\n    loadModals() {\n        $(\".recordsEditLink\").each(function () {\n            var $el = $(this);\n            var options = {\n                actionOptions: {\n                    onSuccess: function (modal) {\n                        modal.hide();\n                        $(\"#searchrow form#registry-filter\").trigger(\"submit\");\n                    },\n                },\n            };\n            $el.addClass(\"pat-modal\");\n            let modal_obj = new Modal($el, options);\n        });\n    }\n\n    init() {\n        var self = this;\n        self.loadModals();\n        $(\"#recordsContainer\").on(\"click\", \"[type='reset']\", function () {\n            document.querySelector('#searchrow input[name=\"q\"]').value = \"\";\n            document\n                .querySelector(\"#searchrow form#registry-filter button[type='submit']\")\n                .click();\n        });\n        /* ajax retrieval of paging */\n        $(\"#recordsContainer\").on(\n            \"click\",\n            \"nav.pagination a, div.listingBar a\",\n            function () {\n                var $el = $(this);\n                utils.loading.show();\n                $(\"#recordsContainer\").load(\n                    $el.attr(\"href\") + \" #recordsTable\",\n                    function () {\n                        /* scan registry */\n                        registry.scan($(\"#recordsTable\"));\n                        self.loadModals();\n                        utils.loading.hide();\n                    }\n                );\n                return false;\n            }\n        );\n\n        /* ajax form submission */\n        $(\"#recordsContainer\").on(\"submit\", \"#searchrow form\", function (e) {\n            var $el = $(this);\n            utils.loading.show();\n            $(\"#recordsContainer\").load(\n                $(\"body\").attr(\"data-base-url\") +\n                    \"?\" +\n                    $el.serialize() +\n                    \" #recordsTable\",\n                function () {\n                    $(\"#spinner\").hide();\n                    $('#searchrow input[name=\"q\"]').trigger(\"keypress\");\n                    registry.scan($(\"#recordsTable\"));\n                    self.loadModals();\n                    utils.loading.hide();\n                }\n            );\n            e.preventDefault();\n            return false;\n        });\n\n        /* force submit on select change */\n        $(\"#recordsContainer\").on(\"change\", \"#searchrow select\", function () {\n            $(\"#searchrow form#registry-filter\").trigger(\"submit\");\n        });\n\n        /* some init */\n        $('#searchrow input[name=\"q\"]').trigger(\"keypress\");\n    }\n}\n"],"names":["ConfigRegistry","constructor","el","this","loadModals","$","each","$el","options","actionOptions","onSuccess","modal","hide","trigger","addClass","Modal","init","self","on","document","querySelector","value","click","utils","load","attr","registry","e","serialize","preventDefault"],"sourceRoot":""}