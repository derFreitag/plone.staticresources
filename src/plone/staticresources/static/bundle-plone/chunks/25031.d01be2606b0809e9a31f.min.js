/*! @plone/mockup 5.0.0-alpha.23 */
"use strict";(self.webpackChunkplone_staticresources=self.webpackChunkplone_staticresources||[]).push([[25031],{25031:function(e,t,n){n.r(t),n.d(t,{default:function(){return o}});var r=n(72513),i=n.n(r);n(43067);class o{constructor(e){this.el=e}createReplyForm(e){var t=e.attr("id"),n=e.find(".reply-to-comment-button"),r=i()("#commenting").clone(!0);r.find("#formfield-form-widgets-captcha").find("script").remove(),r.appendTo(e).css("display","none"),r.removeAttr("id"),i()(n).css("display","none");var o=r.find("form");o.find("#formfield-form-widgets-comment-text").attr("id","formfield-form-widgets-new-textarea"+t),o.find("#form-widgets-comment-text").attr("id","form-widgets-new-textarea"+t),o.find('input[name="form.widgets.in_reply_to"]').val(t);var a=r.find(".cancelreplytocomment");a.attr("id",t),o.find('input[name="form.buttons.cancel"]').css("display","inline"),r.slideDown("slow"),a.css("display","inline")}clearForm(e){e.find(".error").removeClass("error"),e.find(".fieldErrorBox").remove(),e.find('input[type="text"]').attr("value",""),e.find("textarea").attr("value","")}init_comment_eventhandler(){i()('input[name="form.button.TransmitComment"]').on("click",(function(e){e.preventDefault();var t=i()(this).parents("form"),n=i()(t).serialize(),r=i()(t).attr("action"),o=i()(this).parents(".comment").attr("id");return i().ajax({type:"GET",url:r,data:n,context:this,success:function(e){let t=location.href;i()(this).parents(".comment").load(t+" #"+o+".comment",(function(){i()(this).find(".comment").unwrap(),init_comment_eventhandler(),i()(".pat-plone-modal").patPloneModal()}))},error:function(e){return!0}}),!1})),i().fn.prepOverlay&&i()('form[name="edit"]').prepOverlay({cssclass:"overlay-edit-comment",width:"60%",subtype:"ajax",filter:"#content>*"}),i()('input[name="form.button.DeleteComment"]').on("click",(function(e){e.preventDefault();var t=i()(this).parents("form"),n=i()(t).serialize(),r=i()(t).attr("action");return i().ajax({type:"POST",url:r,data:n,context:i()(this).parents(".comment"),success:function(e){for(var t=i()(this),n=t.attr("class"),r=parseInt(n[n.indexOf("replyTreeLevel")+"replyTreeLevel".length],10),o=".replyTreeLevel"+r,a=0;a<r;a++)o+=", .replyTreeLevel"+a;t.nextUntil(o).each((function(){i()(this).fadeOut("fast",(function(){i()(this).remove()}))})),t.prev('[class*="replyTreeLevel'+(r-1)+'"]').find('form[name="delete"]').css("display","inline"),i()(this).fadeOut("fast",(function(){i()(this).remove()}))},error:function(e,t){return!0}}),!1}))}init(){let e=this;e.init_comment_eventhandler();var t=i()("#commenting"),n=t.find('input[name="form.widgets.in_reply_to"]');if(0!==n.length&&""!==n.val()){var r="#"+n.val(),o=i()(".discussion").find(r);e.createReplyForm(o),e.clearForm(t)}i()(".reply-to-comment-button").bind("click",(function(t){var n=i()(this).parents().filter(".comment");e.createReplyForm(n),e.clearForm(n)})),i()("#commenting #form-buttons-cancel").bind("click",(function(t){t.preventDefault();var n=i()(this).parents().filter(".comment").find(".reply-to-comment-button");e.reply_to_comment_form=i()(this).parents().filter(".reply"),e.reply_to_comment_form.slideUp("slow",(function(){i()(this).remove()})),n.css("display","inline")})),i()(".reply").find('input[name="form.buttons.reply"]').css("display","none"),i()(".reply").find('input[name="form.buttons.cancel"]').css("display","none"),i()(".reply-to-comment-button").removeClass("hide")}}}}]);
//# sourceMappingURL=25031.d01be2606b0809e9a31f.min.js.map