{"version":3,"file":"chunks/66698.c9d41502de18fb007a00.min.js","mappings":"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","sources":["webpack://plone.staticresources/./node_modules/mockup/src/core/ui/views/base.js","webpack://plone.staticresources/./node_modules/mockup/src/core/ui/views/container.js","webpack://plone.staticresources/./node_modules/mockup/src/core/ui/views/toolbar.js","webpack://plone.staticresources/./node_modules/mockup/src/core/ui/views/buttongroup.js","webpack://plone.staticresources/./node_modules/mockup/src/core/ui/views/button.js","webpack://plone.staticresources/./node_modules/mockup/src/pat/structure/js/actionmenu.js","webpack://plone.staticresources/./node_modules/mockup/src/pat/structure/js/models/result.js","webpack://plone.staticresources/./node_modules/mockup/src/pat/structure/js/actions.js","webpack://plone.staticresources/./node_modules/mockup/src/pat/structure/js/views/actionmenu.js","webpack://plone.staticresources/./node_modules/mockup/src/pat/structure/js/views/tablerow.js","webpack://plone.staticresources/./node_modules/bootstrap/js/src/util/index.js","webpack://plone.staticresources/./node_modules/bootstrap/js/src/dom/event-handler.js","webpack://plone.staticresources/./node_modules/bootstrap/js/src/dom/data.js","webpack://plone.staticresources/./node_modules/bootstrap/js/src/base-component.js","webpack://plone.staticresources/./node_modules/bootstrap/js/src/alert.js","webpack://plone.staticresources/./node_modules/bootstrap/js/src/util/component-functions.js","webpack://plone.staticresources/./node_modules/mockup/src/pat/structure/js/views/table.js","webpack://plone.staticresources/./node_modules/mockup/src/core/ui/views/popover.js","webpack://plone.staticresources/./node_modules/mockup/src/pat/structure/js/views/selectionwell.js","webpack://plone.staticresources/./node_modules/mockup/src/pat/structure/js/views/generic-popover.js","webpack://plone.staticresources/./node_modules/mockup/src/pat/structure/js/views/rearrange.js","webpack://plone.staticresources/./node_modules/mockup/src/pat/structure/js/views/selectionbutton.js","webpack://plone.staticresources/./node_modules/mockup/src/pat/structure/js/views/paging.js","webpack://plone.staticresources/./node_modules/mockup/src/pat/structure/js/views/columns.js","webpack://plone.staticresources/./node_modules/mockup/src/pat/structure/js/views/textfilter.js","webpack://plone.staticresources/./node_modules/mockup/src/pat/structure/js/views/upload.js","webpack://plone.staticresources/./node_modules/mockup/src/pat/structure/js/collections/selected.js","webpack://plone.staticresources/./node_modules/mockup/src/pat/structure/js/collections/result.js","webpack://plone.staticresources/./node_modules/mockup/src/pat/structure/js/views/app.js","webpack://plone.staticresources/./node_modules/backbone.paginator/lib/backbone.paginator.js"],"sourcesContent":["import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../i18n-wrapper\";\nimport Backbone from \"backbone\";\n\nexport default Backbone.View.extend({\n    isUIView: true,\n    eventPrefix: \"ui\",\n    template: null,\n    idPrefix: \"base-\",\n    appendInContainer: true,\n    initialize: function (options) {\n        this.options = options;\n        for (var key in this.options) {\n            this[key] = this.options[key];\n        }\n        this.options._t = _t;\n    },\n    render: function () {\n        this.applyTemplate();\n\n        this.trigger(\"render\", this);\n        this.afterRender();\n\n        if (this.options.id) {\n            // apply id to element\n            this.$el.attr(\"id\", this.idPrefix + this.options.id);\n        }\n        return this;\n    },\n    afterRender: function () {},\n    serializedModel: function () {\n        return this.options;\n    },\n    applyTemplate: function () {\n        if (this.template !== null) {\n            var data = $.extend({ _t: _t }, this.options, this.serializedModel());\n            var template = this.template;\n            if (typeof template === \"string\") {\n                template = _.template(template);\n            }\n            this.$el.html(template(data));\n        }\n    },\n    propagateEvent: function (eventName) {\n        if (eventName.indexOf(\":\") > 0) {\n            var eventId = eventName.split(\":\")[0];\n            if (this.eventPrefix !== \"\") {\n                if (\n                    eventId === this.eventPrefix ||\n                    eventId === this.eventPrefix + \".\" + this.id\n                ) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    },\n    uiEventTrigger: function (name) {\n        var args = [].slice.call(arguments, 0);\n\n        if (this.eventPrefix !== \"\") {\n            args[0] = this.eventPrefix + \":\" + name;\n            Backbone.View.prototype.trigger.apply(this, args);\n            if (this.id) {\n                args[0] = this.eventPrefix + \".\" + this.id + \":\" + name;\n                Backbone.View.prototype.trigger.apply(this, args);\n            }\n        }\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport BaseView from \"./base\";\n\nexport default BaseView.extend({\n    id: \"\",\n    items: [],\n    itemContainer: null,\n    isOffsetParent: true,\n    idPrefix: \"container-\",\n    render: function () {\n        if (this.options.id) {\n            this.$el.attr(\"id\", this.idPrefix + this.options.id);\n        }\n\n        this.applyTemplate();\n\n        this.renderItems();\n        this.bindEvents();\n\n        if (this.isOffsetParent) {\n            this.$el.addClass(\"ui-offset-parent\");\n        }\n\n        this.trigger(\"render\", this);\n\n        this.afterRender();\n\n        this.$el.data(\"component\", this);\n        return this;\n    },\n    renderItems: function () {\n        var $container;\n\n        if (this.itemContainer !== null) {\n            $container = $(this.itemContainer, this.$el);\n            if ($container.length === 0) {\n                throw \"Item Container element not found.\";\n            }\n        } else {\n            $container = this.$el;\n        }\n        _.each(\n            this.items,\n            function (view) {\n                if (view.appendInContainer === true) {\n                    $container.append(view.render().$el);\n                } else {\n                    view.render();\n                }\n            },\n            this\n        );\n    },\n    bindEvents: function () {\n        var self = this;\n        _.each(this.items, function (view) {\n            view.on(\"all\", function () {\n                var slice = [].slice;\n                var eventName = arguments[0];\n                var eventTarget;\n                var newName = self.id !== \"\" ? self.id + \".\" + eventName : eventName;\n                if (arguments.length > 1) {\n                    eventTarget = arguments[1];\n                }\n                if (newName !== eventName) {\n                    var newArgs = slice.call(arguments, 0);\n                    newArgs[0] = newName;\n                    self.trigger.apply(self, newArgs);\n                }\n                if (eventTarget !== undefined && eventTarget.isUIView === true) {\n                    if (eventTarget.propagateEvent(eventName) === true) {\n                        self.trigger.apply(self, arguments);\n                    }\n                }\n            });\n        });\n    },\n    get: function (id) {\n        // Remove the recursive part because it was confusing if two children had the\n        // same id\n        return _.findWhere(this.items, { id: id });\n    },\n    add: function (item) {\n        if (item.id !== undefined && this.get(item.id)) {\n            throw \"Another item with the same `id` already exists.\";\n        }\n        this.items.push(item);\n    },\n});\n","import ContainerView from \"./container\";\n\nexport default ContainerView.extend({\n    tagName: \"div\",\n    className: \"navbar\",\n    idPrefix: \"toolbar-\",\n});\n","import _ from \"underscore\";\nimport ContainerView from \"./container\";\n\nexport default ContainerView.extend({\n    tagName: \"div\",\n    className: \"btn-group\",\n    idPrefix: \"btngroup-\",\n    disable: function () {\n        _.each(this.items, function (button) {\n            button.disable();\n        });\n    },\n    enable: function () {\n        _.each(this.items, function (button) {\n            button.enable();\n        });\n    },\n});\n","import _ from \"underscore\";\nimport BaseView from \"./base\";\nimport Tooltip from \"@patternslib/patternslib/src/pat/tooltip/tooltip\";\nimport utils from \"../../utils\";\n\nexport default BaseView.extend({\n    tagName: \"a\",\n    className: \"btn\",\n    eventPrefix: \"button\",\n    context: \"outline-secondary\",\n    idPrefix: \"btn-\",\n    attributes: {\n        href: \"#\",\n    },\n    extraClasses: [],\n    tooltip: null,\n    template: '<%= title %>',\n    events: {\n        click: \"handleClick\",\n    },\n    initialize: function (options) {\n        if (!options.id) {\n            const title = options.title || \"\";\n            options.id = title !== \"\" ? title.toLowerCase().replace(\" \", \"-\") : this.cid; // prettier-ignore\n        }\n        BaseView.prototype.initialize.apply(this, [options]);\n\n        this.on(\n            \"render\",\n            async function (){\n                this.$el.attr(\"title\", this.options.title || \"\");\n                this.$el.attr(\"aria-label\", this.options.title || this.options.tooltip || \"\");\n                if(this.context !== null){\n                    this.$el.addClass(\"btn-\" + this.context);\n                }\n                _.each(\n                  this.extraClasses,\n                  function(klass){\n                      this.$el.addClass(klass);\n                  }.bind(this)\n                );\n\n                if(this.icon && typeof this.icon == 'string'){\n                    const iconMarkup = await utils.resolveIcon(this.icon, true);\n                    if(iconMarkup){\n                        this.$el.prepend(iconMarkup);\n                    }\n                }\n\n                if (this.tooltip !== null) {\n                    this.$el.attr(\"title\", this.tooltip);\n                    new Tooltip(this.$el);\n                    // XXX since tooltip triggers hidden\n                    // suppress so it plays nice with modals, backdrops, etc\n                    this.$el.on(\"hidden\", function (e) {\n                        if (e.type === \"hidden\") {\n                            e.stopPropagation();\n                        }\n                    });\n                }\n            },\n            this\n        );\n    },\n    handleClick: function (e) {\n        e.preventDefault();\n        if (!this.$el.is(\".disabled\")) {\n            this.uiEventTrigger(\"click\", this, e);\n        }\n    },\n    serializedModel: function () {\n        return _.extend({ icon: \"\", title: \"\" }, this.options);\n    },\n    disable: function () {\n        this.$el.addClass(\"disabled\");\n    },\n    enable: function () {\n        this.$el.removeClass(\"disabled\");\n    },\n});\n","import _ from \"underscore\";\nimport _t from \"../../../core/i18n-wrapper\";\n\nconst menuOptions = {\n    \"openItem\": {\n        url: \"#\",\n        title: _t(\"Open\"),\n        category: \"button\",\n        icon: \"plone-view\",\n        css: \"\",\n        modal: false,\n    },\n    \"editItem\": {\n        url: \"#\",\n        title: _t(\"Edit\"),\n        category: \"button\",\n        icon: \"plone-edit\",\n        css: \"\",\n        modal: false,\n    },\n    \"cutItem\": {\n        method: \"cutClicked\",\n        url: \"#\",\n        title: _t(\"Cut\"),\n        category: \"dropdown\",\n        icon: \"plone-cut\",\n        css: \"\",\n        modal: false,\n    },\n    \"copyItem\": {\n        method: \"copyClicked\",\n        url: \"#\",\n        title: _t(\"Copy\"),\n        category: \"dropdown\",\n        icon: \"plone-copy\",\n        css: \"\",\n        modal: false,\n    },\n    \"pasteItem\": {\n        method: \"pasteClicked\",\n        url: \"#\",\n        title: _t(\"Paste\"),\n        category: \"dropdown\",\n        icon: \"plone-paste\",\n        css: \"\",\n        modal: false,\n    },\n    \"move-top\": {\n        method: \"moveTopClicked\",\n        url: \"#\",\n        title: _t(\"Move to top of folder\"),\n        category: \"dropdown\",\n        icon: \"arrow-bar-up\",\n        css: \"\",\n        modal: false,\n    },\n    \"move-bottom\": {\n        method: \"moveBottomClicked\",\n        url: \"#\",\n        title: _t(\"Move to bottom of folder\"),\n        category: \"dropdown\",\n        icon: \"arrow-bar-down\",\n        css: \"\",\n        modal: false,\n    },\n    \"set-default-page\": {\n        method: \"setDefaultPageClicked\",\n        url: \"#\",\n        title: _t(\"Set as default page\"),\n        category: \"dropdown\",\n        icon: \"check-circle\",\n        css: \"\",\n        modal: false,\n    },\n    \"selectAll\": {\n        method: \"selectAll\",\n        url: \"#\",\n        title: _t(\"Select all contained items\"),\n        category: \"dropdown\",\n        icon: \"check-all\",\n        css: \"\",\n        modal: false,\n    },\n};\n\nconst ActionMenu = function (menu) {\n    // If an explicit menu was specified as an option to AppView, this\n    // constructor will not override that.\n    if (menu.menuOptions !== null) {\n        return menu.menuOptions;\n    }\n\n    const model = menu.model.attributes;\n    const app = menu.app;\n\n    const result = _.clone(menuOptions);\n    if (!(app.pasteAllowed() && model.is_folderish)) {\n        delete result.pasteItem;\n    }\n    if (app.inQueryMode() || menu.options.canMove === false) {\n        delete result[\"move-top\"];\n        delete result[\"move-bottom\"];\n    }\n    if (\n        app.defaultPageTypes.indexOf(model.portal_type) === -1 ||\n        !app.setDefaultPageUrl\n    ) {\n        delete result[\"set-default-page\"];\n    }\n\n    if (!model.is_folderish) {\n        delete result.selectAll;\n    }\n\n    const typeToViewAction = app.options.typeToViewAction;\n    const viewAction = (typeToViewAction && typeToViewAction[model.portal_type]) || \"\";\n    result.openItem.url = model.getURL + viewAction;\n    result.editItem.url = model.getURL + \"/edit\";\n\n    return result;\n};\n\nexport default ActionMenu;\n","import Backbone from \"backbone\";\n\nexport default Backbone.Model.extend({\n    defaults: function () {\n        return {\n            is_folderish: false,\n            review_state: \"\",\n            getURL: \"\",\n        };\n    },\n\n    uid: function () {\n        return this.attributes.UID;\n    },\n});\n","import $ from \"jquery\";\nimport _t from \"../../../core/i18n-wrapper\";\nimport utils from \"../../../core/utils\";\nimport Backbone from \"backbone\";\nimport Result from \"./models/result\";\n\n// use a more primative class than Backbone.Model?\nexport default Backbone.Model.extend({\n    initialize: function (options) {\n        this.options = options;\n        this.app = options.app;\n        this.model = options.model;\n        this.selectedCollection = this.app.selectedCollection;\n    },\n\n    selectAll: function (e) {\n        // This implementation is very specific to the default collection\n        // with the reliance on its queryParser and queryHelper.  Custom\n        // collection (Backbone.Paginator.requestPager implementation)\n        // will have to come up with their own action for this.\n        e.preventDefault();\n        let page = 1;\n        let count = 0;\n        const getPage = () => {\n            this.app.loading.show();\n            $.ajax({\n                url: this.app.collection.url,\n                type: \"GET\",\n                dataType: \"json\",\n                data: {\n                    query: this.app.collection.queryParser({\n                        searchPath: this.model.attributes.path,\n                    }),\n                    batch: JSON.stringify({\n                        page: page,\n                        size: 100,\n                    }),\n                    attributes: JSON.stringify(\n                        this.app.collection.queryHelper.options.attributes\n                    ),\n                },\n            }).done((data) => {\n                const items = this.app.collection.parse(data, count);\n                count += items.length;\n                for (const item of items) {\n                    this.app.selectedCollection.add(new Result(item));\n                }\n                page += 1;\n                if (data.total > count) {\n                    getPage();\n                } else {\n                    this.app.loading.hide();\n                    this.app.tableView.render();\n                }\n            });\n        };\n        getPage();\n    },\n\n    doAction: function (buttonName, successMsg, failMsg) {\n        $.ajax({\n            url: this.app.buttons.get(buttonName).options.url,\n            data: {\n                selection: JSON.stringify([this.model.attributes.UID]),\n                folder: this.model.attributes.path,\n                _authenticator: utils.getAuthenticator(),\n            },\n            dataType: \"json\",\n            type: \"POST\",\n        }).done((data) => {\n            let msg;\n            if (data.status === \"success\") {\n                msg = _t(`${successMsg} \"${this.model.attributes.Title}\"`);\n                this.app.collection.pager();\n                this.app.updateButtons();\n            } else {\n                msg = _t(`Error ${failMsg} \"${this.model.attributes.Title}\"`);\n            }\n            this.app.clearStatus();\n            this.app.setStatus({\n                text: msg,\n                type: data.status || \"warning\",\n            });\n        });\n    },\n\n    cutClicked: function (e) {\n        e.preventDefault();\n        this.doAction(\"cut\", _t(\"Cut\"), _t(\"cutting\"));\n    },\n\n    copyClicked: function (e) {\n        e.preventDefault();\n        this.doAction(\"copy\", _t(\"Copied\"), _t(\"copying\"));\n    },\n\n    pasteClicked: function (e) {\n        e.preventDefault();\n        this.doAction(\"paste\", _t(\"Pasted into\"), _t(\"Error pasting into\"));\n    },\n\n    moveTopClicked: function (e) {\n        e.preventDefault();\n        this.app.moveItem(this.model.attributes.id, \"top\");\n    },\n\n    moveBottomClicked: function (e) {\n        e.preventDefault();\n        this.app.moveItem(this.model.attributes.id, \"bottom\");\n    },\n\n    setDefaultPageClicked: function (e) {\n        e.preventDefault();\n        $.ajax({\n            url: this.app.getAjaxUrl(this.app.setDefaultPageUrl),\n            type: \"POST\",\n            data: {\n                _authenticator: $('[name=\"_authenticator\"]').val(),\n                id: this.model.attributes.id,\n            },\n            success: (data) => {\n                this.app.ajaxSuccessResponse.apply(this.app, [data]);\n            },\n            error: (data) => {\n                this.app.ajaxErrorResponse.apply(this.app, [data]);\n            },\n        });\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport utils from \"../../../../core/utils\";\nimport registry from \"@patternslib/patternslib/src/core/registry\";\nimport BaseView from \"../../../../core/ui/views/base\";\nimport ActionMenuTemplate from \"../../templates/actionmenu.xml\";\nimport \"../../../modal/modal\";\nimport \"@patternslib/patternslib/src/pat/tooltip/tooltip\";\nimport actionmenu_generator from \"../actionmenu\";\nimport Actions from \"../actions\";\n\nexport default BaseView.extend({\n    className: \"btn-group actionmenu\",\n    template: _.template(ActionMenuTemplate),\n\n    // Static menu options\n    menuOptions: null,\n    // Dynamic menu options\n\n    eventConstructor: function (definition) {\n        const method = definition.method;\n        if (!method || !this.actions[method]) {\n            return false;\n        }\n        return this.actions[method].bind(this.actions);\n    },\n\n    events: function () {\n        /* Backbone.view.events\n         * Specify a set of DOM events, which will bound to methods on the view.\n         */\n        const result = {};\n        const menuOptionsCategorized = {};\n\n        _.each(this.menuOptions, (menuOption, key) => {\n            // set a unique identifier to uniquely bind the events.\n            menuOption.idx = utils.generateId();\n            menuOption.name = key; // we want to add the action's key as class name to the output.\n\n            const category = menuOption.category || \"dropdown\";\n            if (menuOptionsCategorized[category] === undefined) {\n                menuOptionsCategorized[category] = [];\n            }\n            menuOptionsCategorized[category].push(menuOption);\n            menuOption.classes = [menuOption.name, menuOption.idx];\n            if(menuOption.css){\n                menuOption.classes.push(menuOption.css);\n            }\n            if (menuOption.modal === true) {\n                // add standard pat-plone-modal.\n                // If you want another modal implementation, don't use modal=true but set the css option on action items.\n                menuOption.css += \" pat-plone-modal\";\n            }\n\n            // Create event handler and add it to the results object.\n            const e = this.eventConstructor(menuOption);\n            if (e) {\n                result[`click a.${menuOption.name}`] = e;\n            }\n        });\n\n        // Abusing the loop above to also initialize menuOptionsCategorized\n        this.menuOptionsCategorized = menuOptionsCategorized;\n        return result;\n    },\n\n    initialize: function (options) {\n        this.actions = new Actions(options);\n        BaseView.prototype.initialize.apply(this, [options]);\n        this.options = options;\n        this.selectedCollection = this.app.selectedCollection;\n\n        // Then acquire the constructor method if specified, and\n        // override those options here.  All definition done here so\n        // that this.events() will return the right things.\n        this.menuOptions = actionmenu_generator(this);\n    },\n\n    render: async function () {\n        this.el.innerHTML = \"\";\n\n        const data = this.model.toJSON();\n        data.header = this.options.header || null;\n        data.menuOptions = this.menuOptionsCategorized;\n        for(const button of data.menuOptions.button){\n           if(button.icon){\n               button.iconSVG = await utils.resolveIcon(button.icon);\n           }\n        }\n        for(const button of data.menuOptions.dropdown){\n           if(button.icon){\n               button.iconSVG = await utils.resolveIcon(button.icon);\n           }\n        }\n        this.el.innerHTML = this.template(\n            $.extend(\n                {\n                    dropdownIcon: await utils.resolveIcon('plone-settings'),\n                    _t: _t,\n                    id: utils.generateId(),\n                },\n                data\n            )\n        );\n\n        if (this.options.className) {\n            this.$el.addClass(this.options.className);\n        }\n\n        registry.scan(this.$el);\n\n        return this;\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport utils from \"../../../../core/utils\";\nimport Backbone from \"backbone\";\n\nimport ActionMenuView from \"./actionmenu\";\nimport TableRowTemplate from \"../../templates/tablerow.xml\";\n\nexport default Backbone.View.extend({\n    tagName: \"tr\",\n    className: \"itemRow\",\n    template: _.template(TableRowTemplate),\n\n    events: {\n        \"change input\": \"itemSelected\",\n        \"click td.title a.manage\": \"itemClicked\",\n    },\n\n    initialize: function (options) {\n        this.options = options;\n        this.app = options.app;\n        this.selectedCollection = this.app.selectedCollection;\n        this.table = this.options.table;\n        this.now = new Date();\n        this.listenTo(this.table, \"context-info:set\", this.render);\n    },\n\n    expired: function (data) {\n        if (!data.attributes.ExpirationDate) {\n            return false;\n        }\n        const dt = new Date(data.attributes.ExpirationDate);\n        return this.now > dt;\n    },\n\n    ineffective: function (data) {\n        if (!data.attributes.EffectiveDate) {\n            return false;\n        }\n        const dt = new Date(data.attributes.EffectiveDate);\n        return this.now < dt;\n    },\n\n    render: async function () {\n        const data = this.model.toJSON();\n\n        data.selected = !!this.selectedCollection.findWhere({UID: data.UID});\n        data.attributes = this.model.attributes;\n        data.activeColumns = this.app.activeColumns;\n        data.availableColumns = this.app.availableColumns;\n        data.portal_type = data.portal_type ? data.portal_type : \"\";\n        data.contenttype = data.portal_type.toLowerCase().replace(/\\.| /g, \"-\");\n        data._authenticator = utils.getAuthenticator();\n        data.thumb_scale = this.app.thumb_scale;\n\n        const viewAction = (this.app.typeToViewAction && this.app.typeToViewAction[data.attributes.portal_type]) || \"\";\n        data.viewURL = data.attributes.getURL + viewAction;\n\n        data._t = _t;\n        data.convertColumnValue = this.convertColumnValue.bind(this);\n        data.expired = this.expired(data);\n        data.ineffective = this.ineffective(data);\n        this.$el.html(this.template(data));\n        const attrs = this.model.attributes;\n        this.$el.addClass([`state-${attrs.review_state}`, `type-${attrs.portal_type}`]);\n        if (data.is_folderish) {\n            this.$el.addClass(\"folder\");\n        }\n        if(data.id === this.table.contextInfo?.defaultPage){\n            this.$el.addClass('default-page');\n        }\n        this.$el.attr(\"data-path\", data.path);\n        this.$el.attr(\"data-UID\", data.UID);\n        this.$el.attr(\"data-id\", data.id);\n        this.$el.attr(\"data-type\", data.portal_type);\n        this.$el.attr(\"data-folderish\", data.is_folderish);\n        this.$el.removeClass(\"expired\");\n        this.$el.removeClass(\"ineffective\");\n\n        if (data.expired) {\n            this.$el.addClass(\"expired\");\n        }\n\n        if (data.ineffective) {\n            this.$el.addClass(\"ineffective\");\n        }\n\n        this.el.model = this.model;\n\n        const canMove = !!this.app.options.moveUrl;\n\n        this.menu = new ActionMenuView({\n            app: this.app,\n            model: this.model,\n            menuOptions: this.app.menuOptions,\n            canMove: canMove,\n        });\n        await this.menu.render();\n        $(\".actionmenu-container\", this.$el).append(this.menu.el);\n\n        return this;\n    },\n\n    /**\n     * Converts Column value in Human-Readable format\n     * @param {string} column\n     * @param {*} value\n     * @returns {string|*}\n     */\n    convertColumnValue: function(column, value) {\n        if(this.table.dateColumns.includes(column)){\n            const date = new Date(value);\n            if(date instanceof Date && date.toString() === 'Invalid Date'){\n                return value;\n            }\n            return date.toLocaleString(this.app.language, this.app.dateFormat);\n        }\n        return value;\n    },\n\n    itemClicked: function (e) {\n        /* check if this should just be opened in new window */\n        const keyEvent = this.app.keyEvent;\n        // Resolve the correct handler based on these keys.\n        if ((keyEvent && keyEvent.ctrlKey) || !this.model.attributes.is_folderish) {\n            // middle/ctrl-click or not a folder content\n            // not yet implemented.\n            return null;\n        }\n\n        e.preventDefault();\n        // handler for folder, go down path and show in contents window.\n        this.app.setCurrentPath(this.model.attributes.path);\n        // also switch to fix page in batch\n        this.app.collection.goTo(this.app.collection.information.firstPage);\n    },\n\n    itemSelected: function () {\n        const checkbox = this.$(\"input\")[0];\n        if (checkbox.checked) {\n            this.app.selectedCollection.add(this.model.clone());\n        } else {\n            this.app.selectedCollection.removeResult(this.model);\n        }\n\n        const selectedCollection = this.selectedCollection;\n\n        /* check for shift click now */\n        const keyEvent = this.app.keyEvent;\n        if (\n            keyEvent &&\n            keyEvent.shiftKey &&\n            this.app[\"last_selected\"] && // jshint ignore:line\n            this.app[\"last_selected\"].parentNode !== null\n        ) {\n            // jshint ignore:line\n            let $el = $(this.app[\"last_selected\"]); // jshint ignore:line\n            const lastCheckedIndex = $el.index();\n            const thisIndex = this.$el.index();\n            for (const item of this.app.tableView.$('input[type=\"checkbox\"]')) {\n                $el = $(item);\n                const index = $el.parents(\"tr\").index();\n                if (\n                    (index > lastCheckedIndex && index < thisIndex) ||\n                    (index < lastCheckedIndex && index > thisIndex)\n                ) {\n                    this.checked = checkbox.checked;\n                    const $tr = $(this).closest(\"tr.itemRow\");\n                    if ($tr.length > 0) {\n                        const model = $tr[0].model;\n                        const existing = selectedCollection.getByUID(\n                            model.attributes.UID\n                        );\n                        if (this.checked) {\n                            if (!existing) {\n                                selectedCollection.add(model.clone());\n                            }\n                        } else if (existing) {\n                            selectedCollection.removeResult(existing);\n                        }\n                    }\n                }\n            }\n        }\n        this.app[\"last_selected\"] = this.el; // jshint ignore:line\n    },\n});\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): util/index.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst MAX_UID = 1000000\nconst MILLISECONDS_MULTIPLIER = 1000\nconst TRANSITION_END = 'transitionend'\n\n// Shoutout AngusCroll (https://goo.gl/pxwQGp)\nconst toType = obj => {\n  if (obj === null || obj === undefined) {\n    return `${obj}`\n  }\n\n  return {}.toString.call(obj).match(/\\s([a-z]+)/i)[1].toLowerCase()\n}\n\n/**\n * --------------------------------------------------------------------------\n * Public Util Api\n * --------------------------------------------------------------------------\n */\n\nconst getUID = prefix => {\n  do {\n    prefix += Math.floor(Math.random() * MAX_UID)\n  } while (document.getElementById(prefix))\n\n  return prefix\n}\n\nconst getSelector = element => {\n  let selector = element.getAttribute('data-bs-target')\n\n  if (!selector || selector === '#') {\n    let hrefAttr = element.getAttribute('href')\n\n    // The only valid content that could double as a selector are IDs or classes,\n    // so everything starting with `#` or `.`. If a \"real\" URL is used as the selector,\n    // `document.querySelector` will rightfully complain it is invalid.\n    // See https://github.com/twbs/bootstrap/issues/32273\n    if (!hrefAttr || (!hrefAttr.includes('#') && !hrefAttr.startsWith('.'))) {\n      return null\n    }\n\n    // Just in case some CMS puts out a full URL with the anchor appended\n    if (hrefAttr.includes('#') && !hrefAttr.startsWith('#')) {\n      hrefAttr = `#${hrefAttr.split('#')[1]}`\n    }\n\n    selector = hrefAttr && hrefAttr !== '#' ? hrefAttr.trim() : null\n  }\n\n  return selector\n}\n\nconst getSelectorFromElement = element => {\n  const selector = getSelector(element)\n\n  if (selector) {\n    return document.querySelector(selector) ? selector : null\n  }\n\n  return null\n}\n\nconst getElementFromSelector = element => {\n  const selector = getSelector(element)\n\n  return selector ? document.querySelector(selector) : null\n}\n\nconst getTransitionDurationFromElement = element => {\n  if (!element) {\n    return 0\n  }\n\n  // Get transition-duration of the element\n  let { transitionDuration, transitionDelay } = window.getComputedStyle(element)\n\n  const floatTransitionDuration = Number.parseFloat(transitionDuration)\n  const floatTransitionDelay = Number.parseFloat(transitionDelay)\n\n  // Return 0 if element or transition duration is not found\n  if (!floatTransitionDuration && !floatTransitionDelay) {\n    return 0\n  }\n\n  // If multiple durations are defined, take the first\n  transitionDuration = transitionDuration.split(',')[0]\n  transitionDelay = transitionDelay.split(',')[0]\n\n  return (Number.parseFloat(transitionDuration) + Number.parseFloat(transitionDelay)) * MILLISECONDS_MULTIPLIER\n}\n\nconst triggerTransitionEnd = element => {\n  element.dispatchEvent(new Event(TRANSITION_END))\n}\n\nconst isElement = obj => {\n  if (!obj || typeof obj !== 'object') {\n    return false\n  }\n\n  if (typeof obj.jquery !== 'undefined') {\n    obj = obj[0]\n  }\n\n  return typeof obj.nodeType !== 'undefined'\n}\n\nconst getElement = obj => {\n  if (isElement(obj)) { // it's a jQuery object or a node element\n    return obj.jquery ? obj[0] : obj\n  }\n\n  if (typeof obj === 'string' && obj.length > 0) {\n    return document.querySelector(obj)\n  }\n\n  return null\n}\n\nconst typeCheckConfig = (componentName, config, configTypes) => {\n  Object.keys(configTypes).forEach(property => {\n    const expectedTypes = configTypes[property]\n    const value = config[property]\n    const valueType = value && isElement(value) ? 'element' : toType(value)\n\n    if (!new RegExp(expectedTypes).test(valueType)) {\n      throw new TypeError(\n        `${componentName.toUpperCase()}: Option \"${property}\" provided type \"${valueType}\" but expected type \"${expectedTypes}\".`\n      )\n    }\n  })\n}\n\nconst isVisible = element => {\n  if (!isElement(element) || element.getClientRects().length === 0) {\n    return false\n  }\n\n  return getComputedStyle(element).getPropertyValue('visibility') === 'visible'\n}\n\nconst isDisabled = element => {\n  if (!element || element.nodeType !== Node.ELEMENT_NODE) {\n    return true\n  }\n\n  if (element.classList.contains('disabled')) {\n    return true\n  }\n\n  if (typeof element.disabled !== 'undefined') {\n    return element.disabled\n  }\n\n  return element.hasAttribute('disabled') && element.getAttribute('disabled') !== 'false'\n}\n\nconst findShadowRoot = element => {\n  if (!document.documentElement.attachShadow) {\n    return null\n  }\n\n  // Can find the shadow root otherwise it'll return the document\n  if (typeof element.getRootNode === 'function') {\n    const root = element.getRootNode()\n    return root instanceof ShadowRoot ? root : null\n  }\n\n  if (element instanceof ShadowRoot) {\n    return element\n  }\n\n  // when we don't find a shadow root\n  if (!element.parentNode) {\n    return null\n  }\n\n  return findShadowRoot(element.parentNode)\n}\n\nconst noop = () => {}\n\n/**\n * Trick to restart an element's animation\n *\n * @param {HTMLElement} element\n * @return void\n *\n * @see https://www.charistheo.io/blog/2021/02/restart-a-css-animation-with-javascript/#restarting-a-css-animation\n */\nconst reflow = element => {\n  // eslint-disable-next-line no-unused-expressions\n  element.offsetHeight\n}\n\nconst getjQuery = () => {\n  const { jQuery } = window\n\n  if (jQuery && !document.body.hasAttribute('data-bs-no-jquery')) {\n    return jQuery\n  }\n\n  return null\n}\n\nconst DOMContentLoadedCallbacks = []\n\nconst onDOMContentLoaded = callback => {\n  if (document.readyState === 'loading') {\n    // add listener on the first call when the document is in loading state\n    if (!DOMContentLoadedCallbacks.length) {\n      document.addEventListener('DOMContentLoaded', () => {\n        DOMContentLoadedCallbacks.forEach(callback => callback())\n      })\n    }\n\n    DOMContentLoadedCallbacks.push(callback)\n  } else {\n    callback()\n  }\n}\n\nconst isRTL = () => document.documentElement.dir === 'rtl'\n\nconst defineJQueryPlugin = plugin => {\n  onDOMContentLoaded(() => {\n    const $ = getjQuery()\n    /* istanbul ignore if */\n    if ($) {\n      const name = plugin.NAME\n      const JQUERY_NO_CONFLICT = $.fn[name]\n      $.fn[name] = plugin.jQueryInterface\n      $.fn[name].Constructor = plugin\n      $.fn[name].noConflict = () => {\n        $.fn[name] = JQUERY_NO_CONFLICT\n        return plugin.jQueryInterface\n      }\n    }\n  })\n}\n\nconst execute = callback => {\n  if (typeof callback === 'function') {\n    callback()\n  }\n}\n\nconst executeAfterTransition = (callback, transitionElement, waitForTransition = true) => {\n  if (!waitForTransition) {\n    execute(callback)\n    return\n  }\n\n  const durationPadding = 5\n  const emulatedDuration = getTransitionDurationFromElement(transitionElement) + durationPadding\n\n  let called = false\n\n  const handler = ({ target }) => {\n    if (target !== transitionElement) {\n      return\n    }\n\n    called = true\n    transitionElement.removeEventListener(TRANSITION_END, handler)\n    execute(callback)\n  }\n\n  transitionElement.addEventListener(TRANSITION_END, handler)\n  setTimeout(() => {\n    if (!called) {\n      triggerTransitionEnd(transitionElement)\n    }\n  }, emulatedDuration)\n}\n\n/**\n * Return the previous/next element of a list.\n *\n * @param {array} list    The list of elements\n * @param activeElement   The active element\n * @param shouldGetNext   Choose to get next or previous element\n * @param isCycleAllowed\n * @return {Element|elem} The proper element\n */\nconst getNextActiveElement = (list, activeElement, shouldGetNext, isCycleAllowed) => {\n  let index = list.indexOf(activeElement)\n\n  // if the element does not exist in the list return an element depending on the direction and if cycle is allowed\n  if (index === -1) {\n    return list[!shouldGetNext && isCycleAllowed ? list.length - 1 : 0]\n  }\n\n  const listLength = list.length\n\n  index += shouldGetNext ? 1 : -1\n\n  if (isCycleAllowed) {\n    index = (index + listLength) % listLength\n  }\n\n  return list[Math.max(0, Math.min(index, listLength - 1))]\n}\n\nexport {\n  getElement,\n  getUID,\n  getSelectorFromElement,\n  getElementFromSelector,\n  getTransitionDurationFromElement,\n  triggerTransitionEnd,\n  isElement,\n  typeCheckConfig,\n  isVisible,\n  isDisabled,\n  findShadowRoot,\n  noop,\n  getNextActiveElement,\n  reflow,\n  getjQuery,\n  onDOMContentLoaded,\n  isRTL,\n  defineJQueryPlugin,\n  execute,\n  executeAfterTransition\n}\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): dom/event-handler.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { getjQuery } from '../util/index'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst namespaceRegex = /[^.]*(?=\\..*)\\.|.*/\nconst stripNameRegex = /\\..*/\nconst stripUidRegex = /::\\d+$/\nconst eventRegistry = {} // Events storage\nlet uidEvent = 1\nconst customEvents = {\n  mouseenter: 'mouseover',\n  mouseleave: 'mouseout'\n}\nconst customEventsRegex = /^(mouseenter|mouseleave)/i\nconst nativeEvents = new Set([\n  'click',\n  'dblclick',\n  'mouseup',\n  'mousedown',\n  'contextmenu',\n  'mousewheel',\n  'DOMMouseScroll',\n  'mouseover',\n  'mouseout',\n  'mousemove',\n  'selectstart',\n  'selectend',\n  'keydown',\n  'keypress',\n  'keyup',\n  'orientationchange',\n  'touchstart',\n  'touchmove',\n  'touchend',\n  'touchcancel',\n  'pointerdown',\n  'pointermove',\n  'pointerup',\n  'pointerleave',\n  'pointercancel',\n  'gesturestart',\n  'gesturechange',\n  'gestureend',\n  'focus',\n  'blur',\n  'change',\n  'reset',\n  'select',\n  'submit',\n  'focusin',\n  'focusout',\n  'load',\n  'unload',\n  'beforeunload',\n  'resize',\n  'move',\n  'DOMContentLoaded',\n  'readystatechange',\n  'error',\n  'abort',\n  'scroll'\n])\n\n/**\n * ------------------------------------------------------------------------\n * Private methods\n * ------------------------------------------------------------------------\n */\n\nfunction getUidEvent(element, uid) {\n  return (uid && `${uid}::${uidEvent++}`) || element.uidEvent || uidEvent++\n}\n\nfunction getEvent(element) {\n  const uid = getUidEvent(element)\n\n  element.uidEvent = uid\n  eventRegistry[uid] = eventRegistry[uid] || {}\n\n  return eventRegistry[uid]\n}\n\nfunction bootstrapHandler(element, fn) {\n  return function handler(event) {\n    event.delegateTarget = element\n\n    if (handler.oneOff) {\n      EventHandler.off(element, event.type, fn)\n    }\n\n    return fn.apply(element, [event])\n  }\n}\n\nfunction bootstrapDelegationHandler(element, selector, fn) {\n  return function handler(event) {\n    const domElements = element.querySelectorAll(selector)\n\n    for (let { target } = event; target && target !== this; target = target.parentNode) {\n      for (let i = domElements.length; i--;) {\n        if (domElements[i] === target) {\n          event.delegateTarget = target\n\n          if (handler.oneOff) {\n            EventHandler.off(element, event.type, selector, fn)\n          }\n\n          return fn.apply(target, [event])\n        }\n      }\n    }\n\n    // To please ESLint\n    return null\n  }\n}\n\nfunction findHandler(events, handler, delegationSelector = null) {\n  const uidEventList = Object.keys(events)\n\n  for (let i = 0, len = uidEventList.length; i < len; i++) {\n    const event = events[uidEventList[i]]\n\n    if (event.originalHandler === handler && event.delegationSelector === delegationSelector) {\n      return event\n    }\n  }\n\n  return null\n}\n\nfunction normalizeParams(originalTypeEvent, handler, delegationFn) {\n  const delegation = typeof handler === 'string'\n  const originalHandler = delegation ? delegationFn : handler\n\n  let typeEvent = getTypeEvent(originalTypeEvent)\n  const isNative = nativeEvents.has(typeEvent)\n\n  if (!isNative) {\n    typeEvent = originalTypeEvent\n  }\n\n  return [delegation, originalHandler, typeEvent]\n}\n\nfunction addHandler(element, originalTypeEvent, handler, delegationFn, oneOff) {\n  if (typeof originalTypeEvent !== 'string' || !element) {\n    return\n  }\n\n  if (!handler) {\n    handler = delegationFn\n    delegationFn = null\n  }\n\n  // in case of mouseenter or mouseleave wrap the handler within a function that checks for its DOM position\n  // this prevents the handler from being dispatched the same way as mouseover or mouseout does\n  if (customEventsRegex.test(originalTypeEvent)) {\n    const wrapFn = fn => {\n      return function (event) {\n        if (!event.relatedTarget || (event.relatedTarget !== event.delegateTarget && !event.delegateTarget.contains(event.relatedTarget))) {\n          return fn.call(this, event)\n        }\n      }\n    }\n\n    if (delegationFn) {\n      delegationFn = wrapFn(delegationFn)\n    } else {\n      handler = wrapFn(handler)\n    }\n  }\n\n  const [delegation, originalHandler, typeEvent] = normalizeParams(originalTypeEvent, handler, delegationFn)\n  const events = getEvent(element)\n  const handlers = events[typeEvent] || (events[typeEvent] = {})\n  const previousFn = findHandler(handlers, originalHandler, delegation ? handler : null)\n\n  if (previousFn) {\n    previousFn.oneOff = previousFn.oneOff && oneOff\n\n    return\n  }\n\n  const uid = getUidEvent(originalHandler, originalTypeEvent.replace(namespaceRegex, ''))\n  const fn = delegation ?\n    bootstrapDelegationHandler(element, handler, delegationFn) :\n    bootstrapHandler(element, handler)\n\n  fn.delegationSelector = delegation ? handler : null\n  fn.originalHandler = originalHandler\n  fn.oneOff = oneOff\n  fn.uidEvent = uid\n  handlers[uid] = fn\n\n  element.addEventListener(typeEvent, fn, delegation)\n}\n\nfunction removeHandler(element, events, typeEvent, handler, delegationSelector) {\n  const fn = findHandler(events[typeEvent], handler, delegationSelector)\n\n  if (!fn) {\n    return\n  }\n\n  element.removeEventListener(typeEvent, fn, Boolean(delegationSelector))\n  delete events[typeEvent][fn.uidEvent]\n}\n\nfunction removeNamespacedHandlers(element, events, typeEvent, namespace) {\n  const storeElementEvent = events[typeEvent] || {}\n\n  Object.keys(storeElementEvent).forEach(handlerKey => {\n    if (handlerKey.includes(namespace)) {\n      const event = storeElementEvent[handlerKey]\n\n      removeHandler(element, events, typeEvent, event.originalHandler, event.delegationSelector)\n    }\n  })\n}\n\nfunction getTypeEvent(event) {\n  // allow to get the native events from namespaced events ('click.bs.button' --> 'click')\n  event = event.replace(stripNameRegex, '')\n  return customEvents[event] || event\n}\n\nconst EventHandler = {\n  on(element, event, handler, delegationFn) {\n    addHandler(element, event, handler, delegationFn, false)\n  },\n\n  one(element, event, handler, delegationFn) {\n    addHandler(element, event, handler, delegationFn, true)\n  },\n\n  off(element, originalTypeEvent, handler, delegationFn) {\n    if (typeof originalTypeEvent !== 'string' || !element) {\n      return\n    }\n\n    const [delegation, originalHandler, typeEvent] = normalizeParams(originalTypeEvent, handler, delegationFn)\n    const inNamespace = typeEvent !== originalTypeEvent\n    const events = getEvent(element)\n    const isNamespace = originalTypeEvent.startsWith('.')\n\n    if (typeof originalHandler !== 'undefined') {\n      // Simplest case: handler is passed, remove that listener ONLY.\n      if (!events || !events[typeEvent]) {\n        return\n      }\n\n      removeHandler(element, events, typeEvent, originalHandler, delegation ? handler : null)\n      return\n    }\n\n    if (isNamespace) {\n      Object.keys(events).forEach(elementEvent => {\n        removeNamespacedHandlers(element, events, elementEvent, originalTypeEvent.slice(1))\n      })\n    }\n\n    const storeElementEvent = events[typeEvent] || {}\n    Object.keys(storeElementEvent).forEach(keyHandlers => {\n      const handlerKey = keyHandlers.replace(stripUidRegex, '')\n\n      if (!inNamespace || originalTypeEvent.includes(handlerKey)) {\n        const event = storeElementEvent[keyHandlers]\n\n        removeHandler(element, events, typeEvent, event.originalHandler, event.delegationSelector)\n      }\n    })\n  },\n\n  trigger(element, event, args) {\n    if (typeof event !== 'string' || !element) {\n      return null\n    }\n\n    const $ = getjQuery()\n    const typeEvent = getTypeEvent(event)\n    const inNamespace = event !== typeEvent\n    const isNative = nativeEvents.has(typeEvent)\n\n    let jQueryEvent\n    let bubbles = true\n    let nativeDispatch = true\n    let defaultPrevented = false\n    let evt = null\n\n    if (inNamespace && $) {\n      jQueryEvent = $.Event(event, args)\n\n      $(element).trigger(jQueryEvent)\n      bubbles = !jQueryEvent.isPropagationStopped()\n      nativeDispatch = !jQueryEvent.isImmediatePropagationStopped()\n      defaultPrevented = jQueryEvent.isDefaultPrevented()\n    }\n\n    if (isNative) {\n      evt = document.createEvent('HTMLEvents')\n      evt.initEvent(typeEvent, bubbles, true)\n    } else {\n      evt = new CustomEvent(event, {\n        bubbles,\n        cancelable: true\n      })\n    }\n\n    // merge custom information in our event\n    if (typeof args !== 'undefined') {\n      Object.keys(args).forEach(key => {\n        Object.defineProperty(evt, key, {\n          get() {\n            return args[key]\n          }\n        })\n      })\n    }\n\n    if (defaultPrevented) {\n      evt.preventDefault()\n    }\n\n    if (nativeDispatch) {\n      element.dispatchEvent(evt)\n    }\n\n    if (evt.defaultPrevented && typeof jQueryEvent !== 'undefined') {\n      jQueryEvent.preventDefault()\n    }\n\n    return evt\n  }\n}\n\nexport default EventHandler\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): dom/data.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst elementMap = new Map()\n\nexport default {\n  set(element, key, instance) {\n    if (!elementMap.has(element)) {\n      elementMap.set(element, new Map())\n    }\n\n    const instanceMap = elementMap.get(element)\n\n    // make it clear we only want one instance per element\n    // can be removed later when multiple key/instances are fine to be used\n    if (!instanceMap.has(key) && instanceMap.size !== 0) {\n      // eslint-disable-next-line no-console\n      console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(instanceMap.keys())[0]}.`)\n      return\n    }\n\n    instanceMap.set(key, instance)\n  },\n\n  get(element, key) {\n    if (elementMap.has(element)) {\n      return elementMap.get(element).get(key) || null\n    }\n\n    return null\n  },\n\n  remove(element, key) {\n    if (!elementMap.has(element)) {\n      return\n    }\n\n    const instanceMap = elementMap.get(element)\n\n    instanceMap.delete(key)\n\n    // free up element references if there are no instances left for an element\n    if (instanceMap.size === 0) {\n      elementMap.delete(element)\n    }\n  }\n}\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): base-component.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Data from './dom/data'\nimport {\n  executeAfterTransition,\n  getElement\n} from './util/index'\nimport EventHandler from './dom/event-handler'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst VERSION = '5.1.3'\n\nclass BaseComponent {\n  constructor(element) {\n    element = getElement(element)\n\n    if (!element) {\n      return\n    }\n\n    this._element = element\n    Data.set(this._element, this.constructor.DATA_KEY, this)\n  }\n\n  dispose() {\n    Data.remove(this._element, this.constructor.DATA_KEY)\n    EventHandler.off(this._element, this.constructor.EVENT_KEY)\n\n    Object.getOwnPropertyNames(this).forEach(propertyName => {\n      this[propertyName] = null\n    })\n  }\n\n  _queueCallback(callback, element, isAnimated = true) {\n    executeAfterTransition(callback, element, isAnimated)\n  }\n\n  /** Static */\n\n  static getInstance(element) {\n    return Data.get(getElement(element), this.DATA_KEY)\n  }\n\n  static getOrCreateInstance(element, config = {}) {\n    return this.getInstance(element) || new this(element, typeof config === 'object' ? config : null)\n  }\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get NAME() {\n    throw new Error('You have to implement the static method \"NAME\", for each component!')\n  }\n\n  static get DATA_KEY() {\n    return `bs.${this.NAME}`\n  }\n\n  static get EVENT_KEY() {\n    return `.${this.DATA_KEY}`\n  }\n}\n\nexport default BaseComponent\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): alert.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { defineJQueryPlugin } from './util/index'\nimport EventHandler from './dom/event-handler'\nimport BaseComponent from './base-component'\nimport { enableDismissTrigger } from './util/component-functions'\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME = 'alert'\nconst DATA_KEY = 'bs.alert'\nconst EVENT_KEY = `.${DATA_KEY}`\n\nconst EVENT_CLOSE = `close${EVENT_KEY}`\nconst EVENT_CLOSED = `closed${EVENT_KEY}`\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nclass Alert extends BaseComponent {\n  // Getters\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n\n  close() {\n    const closeEvent = EventHandler.trigger(this._element, EVENT_CLOSE)\n\n    if (closeEvent.defaultPrevented) {\n      return\n    }\n\n    this._element.classList.remove(CLASS_NAME_SHOW)\n\n    const isAnimated = this._element.classList.contains(CLASS_NAME_FADE)\n    this._queueCallback(() => this._destroyElement(), this._element, isAnimated)\n  }\n\n  // Private\n  _destroyElement() {\n    this._element.remove()\n    EventHandler.trigger(this._element, EVENT_CLOSED)\n    this.dispose()\n  }\n\n  // Static\n\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Alert.getOrCreateInstance(this)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config](this)\n    })\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\nenableDismissTrigger(Alert, 'close')\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n * add .Alert to jQuery only if jQuery is present\n */\n\ndefineJQueryPlugin(Alert)\n\nexport default Alert\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap (v5.1.3): util/component-functions.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport EventHandler from '../dom/event-handler'\nimport { getElementFromSelector, isDisabled } from './index'\n\nconst enableDismissTrigger = (component, method = 'hide') => {\n  const clickEvent = `click.dismiss${component.EVENT_KEY}`\n  const name = component.NAME\n\n  EventHandler.on(document, clickEvent, `[data-bs-dismiss=\"${name}\"]`, function (event) {\n    if (['A', 'AREA'].includes(this.tagName)) {\n      event.preventDefault()\n    }\n\n    if (isDisabled(this)) {\n      return\n    }\n\n    const target = getElementFromSelector(this) || this.closest(`.${name}`)\n    const instance = component.getOrCreateInstance(target)\n\n    // Method argument is left, for Alert and only, as it doesn't implement the 'hide' method\n    instance[method]()\n  })\n}\n\nexport {\n  enableDismissTrigger\n}\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport registry from \"@patternslib/patternslib/src/core/registry\";\nimport BaseView from \"../../../../core/ui/views/base\";\nimport TableRowView from \"./tablerow\";\nimport TableTemplate from \"../../templates/table.xml\";\nimport Sortable from \"../../../sortable/sortable\";\nimport \"../../../datatables/datatables\";\nimport \"bootstrap/js/src/alert\";\n\nexport default BaseView.extend({\n    tagName: \"div\",\n    template: _.template(TableTemplate),\n    tableSortable: null,\n\n    initialize: function (options) {\n        BaseView.prototype.initialize.apply(this, [options]);\n        this.collection = this.app.collection;\n        this.selectedCollection = this.app.selectedCollection;\n        this.listenTo(this.collection, \"sync\", this.render);\n        this.listenTo(this.selectedCollection, \"remove\", this.render);\n        this.listenTo(this.selectedCollection, \"reset\", this.render);\n        this.collection.pager();\n        this.subsetIds = [];\n        this.contextInfo = null;\n        this.tableSortable = null;\n\n        $(\"body\").on(\"context-info-loaded\", (event, data) => {\n            this.contextInfo = data;\n            /* set default page info */\n            this.setContextInfo();\n        });\n\n        this.dateColumns = [\n            \"ModificationDate\",\n            \"EffectiveDate\",\n            \"CreationDate\",\n            \"ExpirationDate\",\n            \"start\",\n            \"end\",\n            \"last_comment_date\",\n        ];\n    },\n\n    events: {\n        \"click .fc-breadcrumbs a\": \"breadcrumbClicked\",\n        \"change .select-all\": \"selectAll\",\n    },\n\n    setContextInfo: function () {\n        const data = this.contextInfo;\n        /* set breadcrumb title info */\n        const crumbs = data.breadcrumbs;\n        if (crumbs && crumbs.length) {\n            const $crumbs = this.$(\".fc-breadcrumbs a.crumb\");\n            _.each(crumbs, (crumb, idx) => {\n                $crumbs.eq(idx).html(crumb.title);\n            });\n        }\n        this.trigger(\"context-info:set\");\n    },\n\n    render: async function () {\n        // By default do not start sorted by any column\n        // Ignore first column and the last one (activeColumns.length + 1)\n        // Do not show paginator, search or information, we only want column sorting\n        const datatables_options = {\n            order: [0, \"asc\"],\n            aoColumnDefs: [\n                {\n                    bSortable: false,\n                    aTargets: [0, this.app.activeColumns.length + 2],\n                },\n            ],\n            paging: false,\n            searching: false,\n            info: false,\n        };\n\n        // If options were passed from the pattern, override these ones\n        $.extend(datatables_options, this.app.options.datatables_options);\n\n        this.$el.html(\n            this.template({\n                _t: _t,\n                pathParts: _.filter(\n                    this.app.getCurrentPath().split(\"/\").slice(1),\n                    (val) => {\n                        return val.length > 0;\n                    }\n                ),\n                activeColumns: this.app.activeColumns,\n                availableColumns: this.app.availableColumns,\n                datatables_options: JSON.stringify(datatables_options),\n            })\n        );\n\n        if (this.collection.length) {\n            const container = this.$(\"tbody\");\n            await this.collection.each(async (result) => {\n                this.dateColumns.map((col) => {\n                    // empty column instead of displaying \"None\".\n                    if (\n                        result.attributes.hasOwnProperty(col) &&\n                        (result.attributes[col] === \"None\" || !result.attributes[col])\n                    ) {\n                        result.attributes[col] = \"\";\n                    }\n                });\n\n                const view = new TableRowView({\n                    model: result,\n                    app: this.app,\n                    table: this,\n                });\n                await view.render();\n                container.append(view.el);\n            });\n        }\n\n        registry.scan(this.$el);\n\n        this.$el.find(\"table\")\n            .on(\"init.dt\", () => {\n                // Add reordering action by drag and drop\n                if(this.app.options.moveUrl){\n                    this.addReordering();\n                }\n                // store Order of nativ sorting for move action\n                this.storeOrder();\n            })\n            .on(\"order.dt\", (e, settings, ordArr) => {\n                // prevent message from showing for nativ order\n                if(ordArr.length === 1){\n                    const order = ordArr[0];\n                    if(order.col === 0 && order.dir === 'asc'){\n                        if(this.tableSortable){\n                            this.tableSortable.enableSort();\n                        }\n                        // Clear the status message\n                        this.app.clearStatus(\"sorting_dndreordering_disabled\");\n                        return;\n                    }\n                }\n\n                const btn = $('<button type=\"button\" class=\"btn btn-danger btn-xs\"></button>')\n                  .text(_t(\"Reset column sorting\"))\n                  .on(\"click\", () => {\n                      // Use column 0 to restore ordering and then empty list so it doesn't\n                      // show the icon in the column header\n                      const api = $(e.target).dataTable().api();\n                      api.order([0, \"asc\"]);\n                      api.draw();\n                  });\n                this.app.setStatus(\n                  {\n                      text: _t(\n                        \"Notice: Drag and drop reordering is disabled when viewing the contents sorted by a column.\"\n                      ),\n                      type: \"warning\",\n                  },\n                  btn,\n                  false,\n                  \"sorting_dndreordering_disabled\"\n                );\n                if(this.tableSortable){\n                    this.tableSortable.disableSort();\n                }\n                this.$el.removeClass(\"order-support\");\n            });\n\n        return this;\n    },\n\n    breadcrumbClicked: function (e) {\n        e.preventDefault();\n        let $el = $(e.target);\n        if ($el[0].tagName !== \"A\") {\n            $el = $el.parent(\"a\");\n        }\n        let path = \"\";\n        for (const item of $($el.prevAll(\"a\").get().reverse())) {\n            let part = $(item).attr(\"data-path\");\n            path += part;\n            if (part !== \"/\") {\n                path += \"/\";\n            }\n        }\n        path += $el.attr(\"data-path\");\n        this.app.setCurrentPath(path);\n        this.app.collection.goTo(this.app.collection.information.firstPage);\n    },\n\n    selectAll: function (e) {\n        if ($(e.target).is(\":checked\")) {\n            $('input[type=\"checkbox\"]', this.$(\"tbody\")).prop(\"checked\", true).change();\n        } else {\n            /* delaying the re-rendering is much faster in this case */\n            this.selectedCollection.remove(this.collection.models, {\n                silent: true,\n            });\n            this.selectedCollection.trigger(\"remove\");\n        }\n        this.setContextInfo();\n    },\n    toggleSelectAll: function (e) {\n        const $el = $(e.target);\n        if (!$el.is(\":checked\")) {\n            this.$(\".select-all\").prop(\"checked\", false);\n        }\n    },\n\n    addReordering: function () {\n        // if we have a custom query going on, we do not allow sorting.\n        if (this.app.inQueryMode()) {\n            this.$el.removeClass(\"order-support\");\n            return;\n        }\n        this.$el.addClass(\"order-support\");\n        this.tableSortable = new Sortable(this.$(\"tbody\"), {\n            selector: \"tr\",\n            createDragItem: (pattern, $el) => {\n                const $tr = $el.clone();\n                const $table = $(\"<table><tbody></tbody></table>\");\n                $(\"tbody\", $table).append($tr);\n                $table\n                    .addClass(\"structure-dragging\")\n                    .css({ opacity: 0.85, position: \"absolute\" });\n                $table.width($el.width());\n                $table.height($el.height());\n                $table.appendTo(document.body);\n                return $table;\n            },\n            drop: ($el, delta) => {\n                if (delta !== 0) {\n                    this.app.moveItem($el.attr(\"data-id\"), delta, this.subsetIds);\n                    this.storeOrder();\n                }\n            },\n        });\n    },\n\n    storeOrder: function () {\n        const subsetIds = [];\n        this.$(\"tbody tr.itemRow\").each(function () {\n            subsetIds.push($(this).attr(\"data-id\"));\n        });\n        this.subsetIds = subsetIds;\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport ContainerView from \"./container\";\nimport Backdrop from \"../../../pat/backdrop/backdrop\";\nimport PopoverTemplate from \"../templates/popover.xml\";\n\nexport default ContainerView.extend({\n    tagName: \"div\",\n    className: \"popover\",\n    eventPrefix: \"popover\",\n    template: PopoverTemplate,\n    content: null,\n    title: null,\n    triggerView: null,\n    idPrefix: \"popover-\",\n    triggerEvents: {\n        \"button:click\": \"toggle\",\n    },\n    placement: \"bottom\",\n    events: {},\n    opened: false,\n    closeOnOutClick: true,\n    appendInContainer: true,\n    backdrop: undefined,\n    $backdrop: null,\n    useBackdrop: true,\n    backdropOptions: {\n        zIndex: \"1009\",\n        opacity: \"0.4\",\n        className: \"backdrop backdrop-popover\",\n        classActiveName: \"backdrop-active\",\n        closeOnEsc: false,\n        closeOnClick: true,\n    },\n    initialize: function (options) {\n        var self = this;\n        ContainerView.prototype.initialize.apply(this, [options]);\n        this.bindTriggerEvents();\n\n        this.on(\n            \"render\",\n            function () {\n                this.$el.attr(\"role\", \"tooltip\").attr(\"aria-hidden\", \"false\");\n                this.renderTitle();\n                this.renderContent();\n            },\n            this\n        );\n\n        this.$el.on(\"keyup\", function (e) {\n            if (e.keyCode === 27) {\n                self.hide();\n            }\n        });\n    },\n    afterRender: function () {},\n    getTemplateOptions: function () {\n        return this.options;\n    },\n    renderTitle: function () {\n        var title = this.title;\n        if (typeof title === \"function\") {\n            title = title(this.getTemplateOptions());\n        }\n        this.$(\".popover-title\").empty().append(title);\n    },\n    renderContent: function () {\n        this.$(\".popover-content\")\n            .empty()\n            .append(this.content(this.getTemplateOptions()));\n    },\n    bindTriggerEvents: function () {\n        if (this.triggerView) {\n            _.each(\n                this.triggerEvents,\n                function (func, event) {\n                    var method = this[func];\n                    if (!method) {\n                        $.error(\"Function not found.\");\n                    }\n                    this.stopListening(this.triggerView, event);\n                    this.listenTo(this.triggerView, event, method);\n                },\n                this\n            );\n        }\n    },\n\n    getPosition: function () {\n        var $el = this.triggerView.$el;\n        return $.extend(\n            {},\n            {\n                width: $el[0].offsetWidth,\n                height: $el[0].offsetHeight,\n            },\n            $el.offset()\n        );\n    },\n\n    getBodyClassName: function () {\n        var name = \"popover-\";\n        if (this.options.id) {\n            name += this.options.id + \"-\";\n        }\n        name += \"active\";\n        return name;\n    },\n\n    show: function () {\n        /* hide existing */\n        $(\".popover:visible\").each(function () {\n            var popover = $(this).data(\"component\");\n            if (popover) {\n                popover.hide();\n            }\n        });\n\n        this.position();\n\n        this.setBackdrop();\n        if (this.useBackdrop === true) {\n            this.backdrop.show();\n        }\n\n        this.opened = true;\n\n        if (this.triggerView) {\n            this.triggerView.$el.addClass(\"active\");\n        }\n\n        this.uiEventTrigger(\"show\", this);\n        this.$el.attr(\"aria-hidden\", \"false\");\n        $(\"body\").addClass(this.getBodyClassName());\n    },\n\n    position: function () {\n        var pos = this.getPosition();\n        var $tip = this.$el,\n            tp,\n            placement,\n            actualWidth,\n            actualHeight;\n\n        placement = this.placement;\n\n        $tip.css({ top: 0, left: 0 }).addClass(\"active\");\n\n        actualWidth = $tip[0].offsetWidth;\n        actualHeight = $tip[0].offsetHeight;\n\n        switch (placement) {\n            case \"bottom-right\":\n                tp = {\n                    top: pos.top + pos.height,\n                    left: pos.left + pos.width - 40,\n                };\n                break;\n            case \"bottom\":\n                tp = {\n                    top: pos.top + pos.height,\n                    left: pos.left + pos.width / 2 - actualWidth / 2,\n                };\n                break;\n            case \"top\":\n                tp = {\n                    top: pos.top - actualHeight,\n                    left: pos.left + pos.width / 2 - actualWidth / 2,\n                };\n                break;\n            case \"left\":\n                tp = {\n                    top: pos.top + pos.height / 2 - actualHeight / 2,\n                    left: pos.left - actualWidth,\n                };\n                break;\n            case \"right\":\n                tp = {\n                    top: pos.top + pos.height / 2 - actualHeight / 2,\n                    left: pos.left + pos.width,\n                };\n                break;\n        }\n\n        this.applyPlacement(tp, placement);\n    },\n\n    applyPlacement: function (offset, placement) {\n        var $el = this.$el,\n            $tip = this.$el,\n            width = $tip[0].offsetWidth,\n            height = $tip[0].offsetHeight,\n            actualWidth,\n            actualHeight,\n            delta,\n            replace;\n\n        $el.removeClass(placement);\n\n        $el.offset(offset).addClass(placement).addClass(\"active\");\n\n        actualWidth = $tip[0].offsetWidth;\n        actualHeight = $tip[0].offsetHeight;\n\n        if (placement === \"top\" && actualHeight !== height) {\n            offset.top = offset.top + height - actualHeight;\n            replace = true;\n        }\n\n        if (placement === \"bottom\" || placement === \"top\") {\n            delta = 0;\n\n            if (offset.left < 0) {\n                delta = offset.left * -2;\n                offset.left = 0;\n                $el.removeClass(placement);\n                $el.offset(offset).addClass(placement);\n                actualWidth = $tip[0].offsetWidth;\n                actualHeight = $tip[0].offsetHeight;\n            }\n\n            this.positionArrow(delta - width + actualWidth, actualWidth, \"left\");\n        } else if (placement !== \"bottom-right\") {\n            // If placement is bottom-right, don't override left position for the arrow that is defined in css to 20px.\n            this.positionArrow(actualHeight - height, actualHeight, \"top\");\n        }\n\n        if (replace) {\n            $el.offset(offset);\n        }\n    },\n    positionArrow: function (delta, dimension, position) {\n        var $arrow = this.$(\".arrow\");\n        $arrow.css(position, delta ? 50 * (1 - delta / dimension) + \"%\" : \"\");\n    },\n    hide: function () {\n        this.opened = false;\n        this.$el.removeClass(\"active\");\n        if (this.triggerView) {\n            this.triggerView.$el.removeClass(\"active\");\n            this.triggerView.$el.attr(\"aria-hidden\", \"true\");\n        }\n        this.uiEventTrigger(\"hide\", this);\n        this.$el.attr(\"aria-hidden\", \"true\");\n        $(\"body\").removeClass(this.getBodyClassName());\n    },\n    toggle: function (button, e) {\n        if (this.opened) {\n            this.hide();\n        } else {\n            this.show();\n        }\n    },\n    setBackdrop: function () {\n        if (this.useBackdrop === true && this.backdrop === undefined) {\n            var self = this;\n            this.$backdrop = this.$el.closest(\".ui-backdrop-element\");\n            if (this.$backdrop.length === 0) {\n                this.$backdrop = $(\"body\");\n            }\n\n            this.backdrop = new Backdrop(this.$backdrop, this.backdropOptions);\n            this.backdrop.$el.on(\"hidden.backdrop.patterns\", function (e) {\n                if (e.namespace === \"backdrop.patterns\") {\n                    e.stopPropagation();\n                    if (self.opened === true) {\n                        self.hide();\n                    }\n                }\n            });\n            this.on(\n                \"popover:hide\",\n                function () {\n                    this.backdrop.hide();\n                },\n                this\n            );\n        }\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport PopoverView from \"../../../../core/ui/views/popover\";\nimport ItemTemplate from \"../../templates/selection_item.xml\";\n\nexport default PopoverView.extend({\n    className: \"popover selected-items\",\n\n    title: _.template(\n        '<input type=\"text\" class=\"filter\" placeholder=\"<%- _t(\"Filter\") %>\" />' +\n            '<a href=\"#\" class=\" remove-all\">' +\n            '<span class=\"glyphicon glyphicon-remove-circle\"></span> <%- _t(\"remove all\") %></a>'\n    ),\n\n    content: _.template(\n        \"<% collection.each(function(item) { %>\" +\n            \"<%= item_template(item.toJSON()) %>\" +\n            \"<% }); %>\"\n    ),\n\n    events: {\n        \"click a.remove\": \"itemRemoved\",\n        \"keyup input.filter\": \"filterSelected\",\n        \"click .remove-all\": \"removeAll\",\n    },\n\n    initialize: function (options) {\n        PopoverView.prototype.initialize.apply(this, [options]);\n        let timeout = 0;\n        this.listenTo(this.collection, \"reset all add remove\", () => {\n            clearTimeout(timeout);\n            timeout = setTimeout(() => {\n                this.render();\n            }, 50);\n        });\n        this.options[\"item_template\"] = _.template(ItemTemplate); // jshint ignore:line\n    },\n\n    render: function () {\n        PopoverView.prototype.render.call(this);\n        if (this.collection.length === 0) {\n            this.$el.removeClass(\"active\");\n        }\n        return this;\n    },\n\n    itemRemoved: function (e) {\n        e.preventDefault();\n        const uid = $(e.currentTarget).data(\"uid\");\n        this.collection.removeByUID(uid);\n        if (this.collection.length !== 0) {\n            // re-rendering causes it to close, reopen\n            this.show();\n        }\n    },\n\n    filterSelected: function (e) {\n        const val = $(e.target).val().toLowerCase();\n        for (const item of $(\".selected-item\", this.$el)) {\n            const $el = $(item);\n            if ($el.text().toLowerCase().indexOf(val) === -1) {\n                $el.hide();\n            } else {\n                $el.show();\n            }\n        }\n    },\n\n    removeAll: function (e) {\n        e.preventDefault();\n        this.collection.reset();\n        this.hide();\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport PopoverView from \"../../../../core/ui/views/popover\";\nimport registry from \"@patternslib/patternslib/src/core/registry\";\n\nexport default PopoverView.extend({\n    events: {\n        \"click button.applyBtn\": \"applyButtonClicked\",\n        \"click button.closeBtn\": \"toggle\",\n    },\n    submitText: _t(\"Apply\"),\n\n    initialize: function (options) {\n        this.app = options.app;\n        this.className = \"popover \" + options.id;\n        this.title = options.form.title || options.title;\n        this.submitText = options.form.submitText || _t(\"Apply\");\n        this.submitContext = options.form.submitContext || \"primary\";\n        this.data = {};\n\n        this.options = options;\n        this.setContent(options.form.template);\n\n        PopoverView.prototype.initialize.apply(this, [options]);\n    },\n\n    setContent: function (content) {\n        let html = \"<form>\" + content + \"</form>\";\n        html +=\n            '<button class=\"btn btn-block btn-' +\n            this.submitContext +\n            ' applyBtn\">' +\n            this.submitText +\n            \" </button>\";\n        if (this.options.form.closeText) {\n            html +=\n                '<button class=\"btn btn-block btn-default closeBtn\">' +\n                this.options.form.closeText +\n                \" </button>\";\n        }\n        this.content = _.template(html);\n    },\n\n    getTemplateOptions: function () {\n        const items = [];\n        for(const item of this.app.selectedCollection.models){\n            items.push(item.toJSON());\n        }\n        return $.extend({}, true, this.options, {\n            items: items,\n            data: this.data,\n        });\n    },\n\n    applyButtonClicked: function () {\n        const data = {};\n        for (const param of this.$el.find(\"form\").serializeArray()) {\n            if (param.name in data) {\n                data[param.name] += \",\" + param.value;\n            } else {\n                data[param.name] = param.value;\n            }\n        }\n\n        this.app.buttonClickEvent(this.triggerView, data);\n        this.hide();\n    },\n\n    afterRender: function () {\n        if (this.options.form.dataUrl) {\n            this.$(\".popover-content\").html(_t(\"Loading...\"));\n            this.app.loading.show();\n            const url = this.app.getAjaxUrl(this.options.form.dataUrl);\n            $.ajax({\n                url: url,\n                dataType: \"json\",\n                type: \"POST\",\n                cache: false,\n                data: {\n                    selection: JSON.stringify(this.app.getSelectedUids()),\n                    transitions: true,\n                    render: \"yes\",\n                },\n            })\n                .done((result) => {\n                    this.data = result.data || result;\n                    this.renderContent();\n                    registry.scan(this.$el);\n                })\n                .fail(() => {\n                    /* we temporarily set original html to a value here so we can\n             render the updated content and then put the original back */\n                    const originalContent = this.content;\n                    this.setContent(\n                        \"<p>\" + _t(\"Error loading popover from server.\") + \"</p>\",\n                        false\n                    );\n                    this.renderContent();\n                    this.content = originalContent;\n                })\n                .always(() => {\n                    this.app.loading.hide();\n                    this.position();\n                });\n        } else {\n            registry.scan(this.$el);\n            this.position();\n        }\n    },\n\n    toggle: function (button, e) {\n        PopoverView.prototype.toggle.apply(this, [button, e]);\n        if (!this.opened) {\n            return;\n        }\n        this.$el.replaceWith(this.render().el);\n        this.position();\n    },\n});\n","import _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport PopoverView from \"../../../../core/ui/views/popover\";\n\nexport default PopoverView.extend({\n    className: \"popover rearrange\",\n    title: _.template('<%- _t(\"Rearrange items in this folder\") %>'),\n    content: _.template(\n        '<div class=\"form-group\">' +\n            '<label><%- _t(\"What to rearrange on\") %></label>' +\n            '<select name=\"rearrange_on\" class=\"form-control\">' +\n            \"<% _.each(rearrangeProperties, function(title, property) { %>\" +\n            '<option value=\"<%- property %>\"><%- title %></option>' +\n            \"<% }); %>\" +\n            \"</select>\" +\n            '<p class=\"help-block\">' +\n            '<b><%- _t(\"This permanently changes the order of items in this folder. This operation may take a long time depending on the size of the folder.\") %></b>' +\n            \"</p>\" +\n            \"</div>\" +\n            \"<div>\" +\n            '<label> <input type=\"checkbox\" name=\"reversed\" /> <%- _t(\"Reverse\") %></label>' +\n            \"</div>\" +\n            '<button class=\"btn btn-block btn-primary\"><%- _t(\"Rearrange\") %></button>'\n    ),\n\n    events: {\n        \"click button\": \"rearrangeButtonClicked\",\n    },\n\n    initialize: function (options) {\n        this.app = options.app;\n        PopoverView.prototype.initialize.apply(this, [options]);\n        this.options.rearrangeProperties = this.app.options.rearrange.properties;\n    },\n\n    render: function () {\n        PopoverView.prototype.render.call(this);\n        this.$rearrangeOn = this.$('[name=\"rearrange_on\"]');\n        this.$reversed = this.$('[name=\"reversed\"]');\n        return this;\n    },\n\n    rearrangeButtonClicked: function () {\n        if (this.app.collection.queryHelper.getCurrentPath() === \"/\") {\n            if (\n                !window.confirm(\n                    _t(\n                        \"Sorting the content on the base of the site \" +\n                            \"could affect your navigation order. \" +\n                            \"Are you certain you want to do this?\"\n                    )\n                )\n            ) {\n                return;\n            }\n        }\n        const data = {\n            rearrange_on: this.$rearrangeOn.val(),\n            reversed: false,\n        };\n        if (this.$reversed[0].checked) {\n            data.reversed = true;\n        }\n        this.app.buttonClickEvent(this.triggerView, data);\n        this.hide();\n    },\n});\n","import ButtonView from \"../../../../core/ui/views/button\";\nimport tplButton from \"../../templates/selection_button.xml\";\n\nexport default ButtonView.extend({\n    collection: null,\n    template: tplButton,\n\n    initialize: function (options) {\n        ButtonView.prototype.initialize.apply(this, [options]);\n        this.timeout = 0;\n        if (this.collection !== null) {\n            this.collection.on(\n                \"add remove reset\",\n                () => {\n                    /* delay it */\n                    clearTimeout(this.timeout);\n                    this.timeout = setTimeout(() => {\n                        this.render();\n                        if (this.collection.length === 0) {\n                            this.$el.removeClass(\"active\");\n                        }\n                    }, 50);\n                },\n                this\n            );\n        }\n    },\n\n    serializedModel: function () {\n        const obj = {\n            icon: \"\",\n            title: this.options.title,\n            length: 0,\n        };\n        if (this.collection !== null) {\n            obj.length = this.collection.length;\n        }\n        return obj;\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport Backbone from \"backbone\";\nimport PagingTemplate from \"../../templates/paging.xml\";\n\nexport default Backbone.View.extend({\n    events: {\n        \"click a.servernext\": \"nextResultPage\",\n        \"click a.serverprevious\": \"previousResultPage\",\n        \"click a.serverlast\": \"gotoLast\",\n        \"click a.page\": \"gotoPage\",\n        \"click a.serverfirst\": \"gotoFirst\",\n        \"click a.serverpage\": \"gotoPage\",\n        \"click .serverhowmany a\": \"changeCount\",\n    },\n\n    tagName: \"aside\",\n    template: _.template(PagingTemplate),\n    maxPages: 7,\n\n    initialize: function (options) {\n        this.options = options;\n        this.app = this.options.app;\n        this.collection = this.app.collection;\n        this.collection.on(\"reset\", this.render, this);\n        this.collection.on(\"sync\", this.render, this);\n\n        this.$el.appendTo(\"#pagination\");\n    },\n\n    render: function () {\n        const data = this.collection.info();\n        data.pages = this.getPages(data);\n        const html = this.template(\n            $.extend(\n                {\n                    _t: _t,\n                },\n                data\n            )\n        );\n        this.$el.html(html);\n        return this;\n    },\n\n    getPages: function (data) {\n        const totalPages = data.totalPages;\n        if (!totalPages) {\n            return [];\n        }\n        let left = 1;\n        let right = totalPages;\n        if (totalPages > this.maxPages) {\n            left = Math.max(1, Math.floor(data.currentPage - this.maxPages / 2));\n            right = Math.min(left + this.maxPages, totalPages);\n            if (right - left < this.maxPages) {\n                left = left - Math.floor(this.maxPages / 2);\n            }\n        }\n        let pages = [];\n        for (let i = left; i <= right; i = i + 1) {\n            pages.push(i);\n        }\n\n        /* add before and after */\n        if (pages[0] > 1) {\n            if (pages[0] > 2) {\n                pages = [\"...\"].concat(pages);\n            }\n            pages = [1].concat(pages);\n        }\n        if (pages[pages.length - 1] < totalPages - 1) {\n            if (pages[pages.length - 2] < totalPages - 2) {\n                pages.push(\"...\");\n            }\n            pages.push(totalPages);\n        }\n        return pages;\n    },\n\n    nextResultPage: function (e) {\n        e.preventDefault();\n        this.app.clearStatus();\n        this.collection.requestNextPage();\n    },\n\n    previousResultPage: function (e) {\n        e.preventDefault();\n        this.app.clearStatus();\n        this.collection.requestPreviousPage();\n    },\n\n    gotoFirst: function (e) {\n        e.preventDefault();\n        this.app.clearStatus();\n        this.collection.goTo(this.collection.information.firstPage);\n    },\n\n    gotoLast: function (e) {\n        e.preventDefault();\n        this.app.clearStatus();\n        this.collection.goTo(this.collection.information.totalPages);\n    },\n\n    gotoPage: function (e) {\n        e.preventDefault();\n        this.app.clearStatus();\n        const page = $(e.target).text();\n        this.collection.goTo(page);\n    },\n\n    changeCount: function (e) {\n        e.preventDefault();\n        this.app.clearStatus();\n        const per = $(e.target).text();\n        this.collection.howManyPer(per);\n        this.app.setCookieSetting(\"perPage\", per);\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport PopoverView from \"../../../../core/ui/views/popover\";\nimport Sortable from \"../../../sortable/sortable\";\n\nexport default PopoverView.extend({\n    className: \"popover attribute-columns\",\n    title: _.template('<%- _t(\"Columns\") %>'),\n    content: _.template(\n        '<label><%- _t(\"Select columns to show, drag and drop to reorder\") %></label>' +\n            \"<ul>\" +\n            \"</ul>\" +\n            '<button class=\"btn btn-block btn-success\"><%- _t(\"Save\") %></button>'\n    ),\n    itemTemplate: _.template(\n        \"<li>\" +\n            \"<label>\" +\n            '<input type=\"checkbox\" value=\"<%- id %>\"/>' +\n            \"<%- title %>\" +\n            \"</label>\" +\n            \"</li>\"\n    ),\n    events: {\n        \"click button\": \"applyButtonClicked\",\n    },\n\n    initialize: function (options) {\n        this.app = options.app;\n        PopoverView.prototype.initialize.apply(this, [options]);\n    },\n\n    afterRender: function () {\n        const objKeySortCmp = (a, b) => {\n            // object key sort compare function\n            const ca = this.app.availableColumns[a];\n            const cb = this.app.availableColumns[b];\n            if (ca < cb) {\n                return -1;\n            } else if (ca == cb) {\n                return 0;\n            } else {\n                return 1;\n            }\n        };\n\n        this.$container = this.$(\"ul\");\n\n        for (const id of this.app.activeColumns) {\n            const $el = $(\n                this.itemTemplate({\n                    title: this.app.availableColumns[id],\n                    id: id,\n                })\n            );\n            $el.find(\"input\")[0].checked = true;\n            this.$container.append($el);\n        }\n\n        const availableKeys = _.keys(\n            _.omit(this.app.availableColumns, this.app.activeColumns)\n        ).sort(objKeySortCmp);\n        for (const id of availableKeys) {\n            const $el = $(\n                this.itemTemplate({\n                    title: this.app.availableColumns[id],\n                    id: id,\n                })\n            );\n            this.$container.append($el);\n        }\n\n        new Sortable(this.$container, {\n            selector: \"li\",\n        });\n        return this;\n    },\n\n    applyButtonClicked() {\n        this.hide();\n        this.app.activeColumns = [];\n        for (const inp of this.$(\"input:checked\")) {\n            this.app.activeColumns.push($(inp).val());\n        }\n        this.app.setCookieSetting(this.app.activeColumnsCookie, this.app.activeColumns);\n        this.app.tableView.render();\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport QueryString from \"../../../querystring/querystring\";\nimport BaseView from \"../../../../core/ui/views/base\";\nimport ButtonView from \"../../../../core/ui/views/button\";\nimport PopoverView from \"../../../../core/ui/views/popover\";\n\nexport default BaseView.extend({\n    tagName: \"div\",\n    className: \"navbar-search form-search ui-offset-parent\",\n    template: _.template(\n        '<div class=\"input-group\">' +\n            '<input id=\"textFilterInput\" type=\"text\" class=\"form-control search-query\" aria-label=\"<%- _t(\"Search\") %>\" placeholder=\"<%- _t(\"Search\") %>\">' +\n        \"</div>\"\n    ),\n    popoverContent: _.template('<input class=\"pat-querystring\" />'),\n    events: {\n        \"keyup .search-query\": \"filter\",\n    },\n    term: null,\n    timeoutId: null,\n    keyupDelay: 300,\n    statusKeyFilter: \"textfilter_status_message_filter\",\n    statusKeySorting: \"textfilter_status_message_sorting\",\n\n    initialize: function (options) {\n        BaseView.prototype.initialize.apply(this, [options]);\n        this.app = this.options.app;\n    },\n\n    setFilterStatusMessage: function () {\n        const clear_btn = $(\n            '<button type=\"button\" class=\"btn btn-primary btn-xs\"></button>'\n        )\n            .text(_t(\"Clear\"))\n            .on(\"click\", () => this.clearFilter());\n\n        const statusTextFilter = _t(\n            \"This listing has filters applied. Not all items are shown.\"\n        );\n        this.app.setStatus(\n            {\n                text: statusTextFilter,\n                type: \"success\",\n            },\n            clear_btn,\n            true,\n            this.statusKeyFilter\n        );\n\n        const statusTextSorting = _t(\n            \"Drag and drop reordering is disabled while filters are applied.\"\n        );\n        this.app.setStatus(\n            {\n                text: statusTextSorting,\n                type: \"warning\",\n            },\n            null,\n            true,\n            this.statusKeySorting\n        );\n    },\n\n    clearFilterStatusMessage: function () {\n        if (!this.term && !this.app.additionalCriterias.length) {\n            this.app.clearStatus(this.statusKeyFilter);\n            this.app.clearStatus(this.statusKeySorting);\n        }\n    },\n\n    setTerm: function (term, set_input) {\n        const term_el = this.$el[0].querySelector(\".search-query\");\n        this.term = encodeURIComponent(term);\n        if (set_input) {\n            term_el.value = term;\n        }\n        this.app.collection.currentPage = 1;\n        this.app.collection.pager();\n\n        if (term) {\n            term_el.classList.add(\"has-filter\");\n            this.setFilterStatusMessage();\n        } else {\n            let hasquery = false;\n            try {\n                const qu = this.$queryString.val();\n                if (qu && JSON.parse(qu).length > 0) {\n                    hasquery = true;\n                }\n            } finally {\n                if (!hasquery) {\n                    term_el.classList.remove(\"has-filter\");\n                    this.clearFilterStatusMessage();\n                }\n            }\n        }\n    },\n\n    setQuery: function (query, set_input) {\n        let query_string = null;\n        let query_obj = null;\n        try {\n            if (typeof query === \"string\") {\n                query_obj = JSON.parse(query);\n                query_string = query;\n            } else {\n                query_string = JSON.stringify(query);\n                query_obj = query;\n            }\n        } catch (e) {\n            query_obj = [];\n            query_string = \"[]\";\n        }\n\n        if (set_input) {\n            this.$queryString.val(query_string);\n            // TODO clear query string form\n            // this.queryString._init();\n        }\n        this.app.additionalCriterias = query_obj;\n        this.app.collection.currentPage = 1;\n        this.app.collection.pager();\n        if (query_obj.length) {\n            this.button.$el[0].classList.add(\"has-filter\");\n            this.setFilterStatusMessage();\n        } else if (!this.term) {\n            this.button.$el[0].classList.remove(\"has-filter\");\n            this.clearFilterStatusMessage();\n        }\n    },\n\n    clearTerm: function () {\n        this.setTerm(\"\", true);\n    },\n\n    clearFilter: function () {\n        this.setTerm(\"\", true);\n        this.setQuery([], true);\n    },\n\n    render: function () {\n        this.$el.html(this.template({ _t: _t }));\n        this.button = new ButtonView({\n            title: _t(\"Filter\"),\n            icon: \"filter\",\n            extraClasses: [\"btn-queryfilter\"],\n        });\n        this.popover = new PopoverView({\n            triggerView: this.button,\n            id: \"structure-query\",\n            title: _.template(_t(\"Filter\")),\n            content: this.popoverContent,\n            placement: \"left\",\n        });\n        this.$el.find(\".input-group\").append(this.button.render().el);\n        this.$el.append(this.popover.render().el);\n        this.popover.$el.addClass(\"query\");\n        this.$queryString = this.popover.$(\"input.pat-querystring\");\n        this.queryString = new QueryString(this.$queryString, {\n            indexOptionsUrl: this.app.options.indexOptionsUrl,\n            showPreviews: false,\n        });\n        this.queryString.$el.on(\"change\", () => {\n            if (this.timeoutId) {\n                clearTimeout(this.timeoutId);\n            }\n            this.timeoutId = setTimeout(() => {\n                this.setQuery(this.$queryString.val(), false);\n            }, this.keyupDelay);\n        });\n        this.queryString.$el.on(\"initialized\", () => {\n            this.queryString.$sortOn.on(\"change\", () => {\n                this.app[\"sort_on\"] = this.queryString.$sortOn.val(); // jshint ignore:line\n                this.app.collection.currentPage = 1;\n                this.app.collection.pager();\n            });\n            this.queryString.$sortOrder.change(() => {\n                if (this.queryString.$sortOrder[0].checked) {\n                    this.app[\"sort_order\"] = \"reverse\"; // jshint ignore:line\n                } else {\n                    this.app[\"sort_order\"] = \"ascending\"; // jshint ignore:line\n                }\n                this.app.collection.currentPage = 1;\n                this.app.collection.pager();\n            });\n        });\n        return this;\n    },\n\n    filter: function (event) {\n        if (this.timeoutId) {\n            clearTimeout(this.timeoutId);\n        }\n        this.timeoutId = setTimeout(() => {\n            const term_el = $(event.currentTarget);\n            this.setTerm(term_el.val(), false);\n        }, this.keyupDelay);\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport PopoverView from \"../../../../core/ui/views/popover\";\nimport Upload from \"../../../upload/upload\";\n\nexport default PopoverView.extend({\n    className: \"popover upload\",\n    title: _.template('<%- _t(\"Upload files\") %>'),\n    content: _.template(\n        '<input type=\"text\" name=\"upload\" style=\"display:none\" />' +\n            '<div class=\"uploadify-me\"></div>'\n    ),\n\n    initialize(options) {\n        this.app = options.app;\n        PopoverView.prototype.initialize.apply(this, [options]);\n        this.currentPathData = null;\n        $(\"body\").on(\"context-info-loaded\", (event, data) => {\n            this.currentPathData = data;\n        });\n    },\n\n    render() {\n        PopoverView.prototype.render.call(this);\n        var options = this.app.options.upload;\n        options.success = () => {\n            this.app.collection.pager();\n        };\n        options.currentPath = this.app.getCurrentPath();\n        options.allowPathSelection = false;\n        this.upload = new Upload(\n            this.$(\".uploadify-me\").addClass(\"pat-upload\"),\n            options\n        );\n        return this;\n    },\n\n    toggle(button, e) {\n        /* we need to be able to change the current default upload directory */\n        PopoverView.prototype.toggle.apply(this, [button, e]);\n        if (!this.opened) {\n            return;\n        }\n        var currentPath = this.app.getCurrentPath();\n        if (this.currentPathData && currentPath !== this.upload.currentPath) {\n            this.upload.setPath(currentPath);\n        }\n    },\n});\n","import Backbone from \"backbone\";\nimport Result from \"../models/result\";\n\nexport default Backbone.Collection.extend({\n    model: Result,\n\n    removeResult: function (model) {\n        return this.removeByUID(model.uid());\n    },\n\n    removeByUID: function (uid) {\n        var found = this.getByUID(uid);\n        if (found) {\n            this.remove(found);\n        }\n        return found;\n    },\n\n    getByUID: function (uid) {\n        return this.findWhere({ UID: uid });\n    },\n});\n","import $ from \"jquery\";\nimport Backbone from \"backbone\";\nimport Result from \"../models/result\";\nimport utils from \"../../../../core/utils\";\nimport \"backbone.paginator\";\n\nexport default Backbone.Paginator.requestPager.extend({\n    model: Result,\n\n    initialize: function (models, options) {\n        this.options = options;\n        this.view = options.view;\n        this.url = options.url;\n\n        this.queryHelper = utils.QueryHelper(\n            $.extend(true, {}, this.view.options, {\n                attributes: this.view.options.queryHelperAttributes,\n            })\n        );\n\n        this.queryParser = function (options) {\n            if (options === undefined) {\n                options = {};\n            }\n            const term = this.view?.toolbar?.get?.(\"filter\")?.term || null;\n            const sortOn = this.view.sort_on || \"getObjPositionInParent\";\n            const sortOrder = this.view.sort_order;\n\n            return JSON.stringify({\n                criteria: this.queryHelper.getCriterias(\n                    term,\n                    $.extend({}, options, {\n                        additionalCriterias: this.view.additionalCriterias,\n                    })\n                ),\n                sort_on: sortOn,\n                sort_order: sortOrder,\n            });\n        };\n\n        // check and see if a hash is provided for initial path\n        if (window.location.hash.substring(0, 2) === \"#/\") {\n            this.queryHelper.currentPath = window.location.hash.substring(1);\n        }\n\n        Backbone.Paginator.requestPager.prototype.initialize.apply(this, [\n            models,\n            options,\n        ]);\n    },\n\n    getCurrentPath: function () {\n        return this.queryHelper.getCurrentPath();\n    },\n\n    setCurrentPath: function (path) {\n        this.queryHelper.currentPath = path;\n    },\n\n    pager: function () {\n        this.trigger(\"pager\");\n        Backbone.Paginator.requestPager.prototype.pager.apply(this, []);\n    },\n\n    paginator_core: {\n        // the type of the request (GET by default)\n        type: \"GET\",\n        // the type of reply (jsonp by default)\n        dataType: \"json\",\n        url: function () {\n            return this.url;\n        },\n    },\n\n    paginator_ui: {\n        // the lowest page index your API allows to be accessed\n        firstPage: 1,\n        // which page should the paginator start from\n        // (also, the actual page the paginator is on)\n        currentPage: 1,\n        // how many items per page should be shown\n        perPage: 15,\n    },\n\n    // server_api are query parameters passed directly (currently GET\n    // parameters).  These are currently generated using following\n    // functions.  Renamed to queryParams in Backbone.Paginator 2.0.\n    server_api: {\n        query: function () {\n            return this.queryParser();\n        },\n        batch: function () {\n            this.queryHelper.options.batchSize = this.perPage;\n            return JSON.stringify(this.queryHelper.getBatch(this.currentPage));\n        },\n        attributes: function () {\n            return JSON.stringify(this.queryHelper.options.attributes);\n        },\n    },\n\n    parse: function (response, baseSortIdx) {\n        if (baseSortIdx === undefined) {\n            baseSortIdx = 0;\n        }\n        this.totalRecords = response.total;\n        const results = response.results;\n        // Manually set sort order here since backbone will otherwise do arbitrary sorting\n        for (const [idx, item] of results.entries()) {\n            item._sort = idx;\n        }\n        return results;\n    },\n\n    comparator: \"_sort\",\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport utils from \"../../../../core/utils\";\nimport logging from \"@patternslib/patternslib/src/core/logging\";\nimport Cookies from \"js-cookie\";\n\nimport Toolbar from \"../../../../core/ui/views/toolbar\";\nimport ButtonGroup from \"../../../../core/ui/views/buttongroup\";\nimport ButtonView from \"../../../../core/ui/views/button\";\nimport BaseView from \"../../../../core/ui/views/base\";\n\nimport TableView from \"./table\";\nimport SelectionWellView from \"./selectionwell\";\nimport GenericPopover from \"./generic-popover\";\nimport RearrangeView from \"./rearrange\";\nimport SelectionButtonView from \"./selectionbutton\";\nimport PagingView from \"./paging\";\nimport ColumnsView from \"./columns\";\nimport TextFilterView from \"./textfilter\";\nimport UploadView from \"./upload\";\nimport SelectedCollection from \"../collections/selected\";\nimport StatusTemplate from \"../../templates/status.xml\";\n\nimport ResultCollection from \"../collections/result\";\n\nconst log = logging.getLogger(\"pat-structure\");\n\nexport default BaseView.extend({\n    tagName: \"div\",\n    statusTemplate: _.template(StatusTemplate),\n    statusMessages: [],\n    sort_on: \"getObjPositionInParent\",\n    sort_order: \"ascending\",\n    additionalCriterias: [],\n    cookieSettingPrefix: \"_fc_\",\n\n    buttons: null,\n    textfilter: null,\n    forms: [],\n\n    pasteAllowed: function () {\n        return !!Cookies.get(\"__cp\");\n    },\n\n    initialize: async function (options) {\n        BaseView.prototype.initialize.apply(this, [options]);\n        this.loading = new utils.Loading();\n        this.loading.show();\n\n        /* close popovers when clicking away */\n        $(document).click((e) => {\n            const $el = $(e.target);\n            if (\n                !$el.is(\":visible\") ||\n                $el.css(\"visibility\") === \"hidden\" ||\n                $el.css(\"opacity\") === \"0\"\n            ) {\n                // ignore this, fake event trigger to element that is not visible\n                return;\n            }\n            if ($el.is(\"a\") || $el.parent().is(\"a\")) {\n                return;\n            }\n            const $popover = $(\".popover:visible\");\n            if ($popover.length > 0 && !$.contains($popover[0], $el[0])) {\n                const popover = $popover.data(\"component\");\n                if (popover) {\n                    popover.hide();\n                }\n            }\n        });\n\n        this.collection = new ResultCollection([], {\n            // Due to default implementation need to poke at things in here,\n            // view is passed.\n            view: this,\n            url: this.options.collectionUrl,\n        });\n\n        this.setAllCookieSettings();\n\n        this.selectedCollection = new SelectedCollection();\n        this.tableView = await new TableView({ app: this });\n        this.pagingView = new PagingView({ app: this });\n\n        /* initialize buttons */\n        this.setupButtons();\n\n        this.wellView = new SelectionWellView({\n            collection: this.selectedCollection,\n            triggerView: this.toolbar.get(\"selected-items\"),\n            app: this,\n            id: \"selected-items\",\n        });\n\n        this.toolbar.get(\"selected-items\").disable();\n        this.buttons.disable();\n\n        let timeout = 0;\n        this.selectedCollection.on(\n            \"add remove reset\",\n            (/*modal, collection*/) => {\n                /* delay rendering since this can happen in batching */\n                clearTimeout(timeout);\n                timeout = setTimeout(() => {\n                    this.updateButtons();\n                }, 100);\n            },\n            this\n        );\n\n        this.collection.on(\"sync\", () => {\n            if (this.contextInfoUrl) {\n                $.ajax({\n                    url: this.getAjaxUrl(this.contextInfoUrl),\n                    dataType: \"json\",\n                    success: (data) => {\n                        $(\"body\").trigger(\"context-info-loaded\", [data]);\n                    },\n                    error: (response) => {\n                        // XXX handle error?\n                        if (response.status === 404) {\n                            log.info(\"context info url not found\");\n                        }\n                    },\n                });\n            }\n            this.loading.hide();\n        });\n\n        this.collection.on(\"pager\", () => {\n            this.loading.show();\n            this.updateButtons();\n\n            // the remaining calls are related to window.pushstate.\n            // abort if feature unavailable.\n            if (!(window.history && window.history.pushState)) {\n                return;\n            }\n\n            // undo the flag set by popState to prevent the push state\n            // from being triggered here, and early abort out of the\n            // function to not execute the folowing pushState logic.\n            if (this.doNotPushState) {\n                this.doNotPushState = false;\n                return;\n            }\n\n            let path = this.getCurrentPath();\n            let url;\n            if (path === \"/\") {\n                path = \"\";\n            }\n            /* maintain history here */\n            if (this.options.pushStateUrl) {\n                // permit an extra slash in pattern, but strip that if there\n                // as path always will be prefixed with a `/`\n                const pushStateUrl = this.options.pushStateUrl.replace(\n                    \"/{path}\",\n                    \"{path}\"\n                );\n                url = pushStateUrl.replace(\"{path}\", path);\n                window.history.pushState(null, null, url);\n            } else if (this.options.urlStructure) {\n                // fallback to urlStructure specification\n                url =\n                    this.options.urlStructure.base +\n                    path +\n                    this.options.urlStructure.appended;\n                window.history.pushState(null, null, url);\n            }\n\n            if (this.options.traverseView) {\n                // flag specifies that the context view implements a traverse\n                // view (i.e. IPublishTraverse) and the path is a virtual path\n                // of some kind - use the base object instead for that by not\n                // specifying a path.\n                path = \"\";\n                // TODO figure out whether the following event after this is\n                // needed at all.\n            }\n            $(\"body\").trigger(\"structure-url-changed\", [path]);\n        });\n\n        if (\n            (this.options.pushStateUrl || this.options.urlStructure) &&\n            utils.featureSupport.history()\n        ) {\n            $(window).bind(\"popstate\", () => {\n                /* normalize this url first... */\n                const win = utils.getWindow();\n                let url = win.location.href;\n                let base, appended;\n                if (url.indexOf(\"?\") !== -1) {\n                    url = url.split(\"?\")[0];\n                }\n                if (url.indexOf(\"#\") !== -1) {\n                    url = url.split(\"#\")[0];\n                }\n                if (this.options.pushStateUrl) {\n                    const tmp = this.options.pushStateUrl.split(\"{path}\");\n                    base = tmp[0];\n                    appended = tmp[1];\n                } else {\n                    base = this.options.urlStructure.base;\n                    appended = this.options.urlStructure.appended;\n                }\n                // take off the base url\n                let path = url.substring(base.length);\n                if (path.substring(path.length - appended.length) === appended) {\n                    /* check that it ends with appended value */\n                    path = path.substring(0, path.length - appended.length);\n                }\n                if (!path) {\n                    path = \"/\";\n                }\n                this.setCurrentPath(path);\n                $(\"body\").trigger(\"structure-url-changed\", [path]);\n                // since this next call causes state to be pushed...\n                this.doNotPushState = true;\n                this.collection.goTo(this.collection.information.firstPage);\n            });\n            /* detect key events */\n            $(document).bind(\"keyup keydown\", (e) => {\n                this.keyEvent = e;\n            });\n        }\n\n        this.togglePasteBtn();\n    },\n\n    updateButtons: function () {\n        if (this.selectedCollection.length) {\n            this.toolbar.get(\"selected-items\").enable();\n            this.buttons.enable();\n        } else {\n            this.toolbar.get(\"selected-items\").disable();\n            this.buttons.disable();\n        }\n\n        this.togglePasteBtn();\n    },\n\n    togglePasteBtn: function () {\n        if (\n            _.find(this.buttons.items, (btn) => {\n                return btn.id === \"paste\";\n            })\n        ) {\n            if (this.pasteAllowed()) {\n                this.buttons.get(\"paste\").enable();\n            } else {\n                this.buttons.get(\"paste\").disable();\n            }\n        }\n    },\n\n    inQueryMode: function () {\n        if (this.toolbar) {\n            if (this.toolbar.get(\"filter\").term) {\n                return true;\n            }\n        }\n        if (this.additionalCriterias.length > 0) {\n            return true;\n        }\n        if (this.sort_on && this.sort_on !== \"getObjPositionInParent\") {\n            // jshint ignore:line\n            return true;\n        }\n        if (this.sort_order !== \"ascending\") {\n            // jshint ignore:line\n            return true;\n        }\n        return false;\n    },\n\n    getSelectedUids: function (collection) {\n        if (collection === undefined) {\n            collection = this.selectedCollection;\n        }\n        const uids = [];\n        collection.each(function (item) {\n            uids.push(item.uid());\n        });\n        return uids;\n    },\n\n    getCurrentPath: function () {\n        return this.collection.getCurrentPath();\n    },\n\n    setCurrentPath: function (path) {\n        this.collection.setCurrentPath(path);\n        this.textfilter.clearTerm();\n        this.clearStatus();\n    },\n\n    getAjaxUrl: function (url) {\n        return url.replace(\"{path}\", this.getCurrentPath());\n    },\n\n    buttonClickEvent: function (button) {\n        let data = null;\n        let callback = null;\n\n        if (button.url) {\n            this.loading.show();\n            // handle ajax now\n\n            if (arguments.length > 1) {\n                const arg1 = arguments[1];\n                if (!arg1.preventDefault) {\n                    data = arg1;\n                }\n            }\n            if (arguments.length > 2) {\n                const arg2 = arguments[2];\n                if (typeof arg2 === \"function\") {\n                    callback = arg2;\n                }\n            }\n            if (data === null) {\n                data = {};\n            }\n            if (data.selection === undefined) {\n                // if selection is overridden by another mechanism\n                data.selection = JSON.stringify(this.getSelectedUids());\n            }\n            data._authenticator = utils.getAuthenticator();\n            if (data.folder === undefined) {\n                data.folder = this.getCurrentPath();\n            }\n\n            const url = this.getAjaxUrl(button.url);\n            $.ajax(\n                {\n                    url: url,\n                    type: \"POST\",\n                    data: data,\n                    success: (data) => {\n                        this.ajaxSuccessResponse.apply(this, [data, callback]);\n                        this.loading.hide();\n                    },\n                    error: (response) => {\n                        this.ajaxErrorResponse.apply(this, [response, url]);\n                        this.loading.hide();\n                    },\n                },\n                this\n            );\n        }\n    },\n\n    ajaxSuccessResponse: function (data, callback) {\n        this.clearStatus();\n        this.selectedCollection.reset();\n        if (data.status === \"success\") {\n            this.collection.reset();\n        }\n        if (data.msg) {\n            // give status message somewhere...\n            this.setStatus({\n                text: data.msg,\n                type: data.status || \"warning\",\n            });\n        }\n        if (callback !== null && callback !== undefined) {\n            callback(data);\n        }\n        this.collection.pager();\n    },\n\n    ajaxErrorResponse: function (response, url) {\n        if (response.status === 404) {\n            window.alert(_t(\"operation url ${url} is not valid\", { url: url }));\n        } else {\n            window.alert(_t(\"there was an error performing the action\"));\n        }\n    },\n\n    setupButtons: function () {\n        const items = [];\n\n        const columnsBtn = new ButtonView({\n            id: \"structure-columns\",\n            tooltip: _t(\"Configure displayed columns\"),\n            icon: \"plone-three-dots\",\n        });\n\n        this.columnsView = new ColumnsView({\n            app: this,\n            triggerView: columnsBtn,\n            id: \"structure-columns\",\n            placement: \"bottom-right\",\n        });\n        items.push(columnsBtn);\n\n        items.push(\n            new SelectionButtonView({\n                title: _t(\"Selected\"),\n                id: \"selected-items\",\n                tooltip: _t(\"Manage selection\"),\n                collection: this.selectedCollection,\n                icon: 'plone-selection',\n            })\n        );\n\n        if (this.options.rearrange) {\n            const rearrangeButton = new ButtonView({\n                id: \"structure-rearrange\",\n                title: _t(\"Rearrange\"),\n                icon: \"plone-rearrange\",\n                tooltip: _t(\"Rearrange folder contents\"),\n                url: this.options.rearrange.url,\n            });\n            this.rearrangeView = new RearrangeView({\n                triggerView: rearrangeButton,\n                app: this,\n                id: \"structure-rearrange\",\n            });\n            items.push(rearrangeButton);\n        }\n        if (\n            this.options.upload &&\n            utils.featureSupport.dragAndDrop() &&\n            utils.featureSupport.fileApi()\n        ) {\n            const uploadButton = new ButtonView({\n                id: \"upload\",\n                title: _t(\"Upload\"),\n                tooltip: _t(\"Upload files\"),\n                icon: \"upload\",\n            });\n            this.uploadView = new UploadView({\n                triggerView: uploadButton,\n                app: this,\n                id: \"upload\",\n            });\n            items.push(uploadButton);\n        }\n\n        const buttons = [];\n        for (const buttonOptions of this.options.buttons) {\n            try {\n                const button = new ButtonView(buttonOptions);\n                buttons.push(button);\n\n                if (button.form) {\n                    buttonOptions.triggerView = button;\n                    buttonOptions.app = this;\n                    const view = new GenericPopover(buttonOptions);\n                    this.forms.push(view.el);\n                } else {\n                    button.on(\"button:click\", () => this.buttonClickEvent(button), this);\n                }\n            }\n            catch (err) {\n                log.error(`Error initializing button ${buttonOptions.title || buttonOptions.id} ${err}`);\n            }\n        }\n        this.buttons = new ButtonGroup({\n            items: buttons,\n            id: \"mainbuttons\",\n            app: this,\n        });\n        items.push(this.buttons);\n\n        this.textfilter = new TextFilterView({\n            id: \"filter\",\n            app: this,\n        });\n        items.push(this.textfilter);\n\n        this.toolbar = new Toolbar({\n            items: items,\n        });\n    },\n\n    moveItem: function (id, delta, subsetIds) {\n        $.ajax({\n            url: this.getAjaxUrl(this.options.moveUrl),\n            type: \"POST\",\n            data: {\n                delta: delta,\n                id: id,\n                _authenticator: utils.getAuthenticator(),\n                subsetIds: JSON.stringify(subsetIds),\n            },\n            dataType: \"json\",\n            success: (data) => {\n                this.clearStatus();\n                if (data.msg) {\n                    this.setStatus({ text: data.msg });\n                } else if (data.status !== \"success\") {\n                    // XXX handle error here with something?\n                    this.setStatus({\n                        text: _t(\"Error moving item\"),\n                        type: \"danger\",\n                    });\n                }\n                this.collection.pager(); // reload it all\n            },\n            error: () => {\n                this.clearStatus();\n                this.setStatus({\n                    text:  _t(\"Error moving item\"),\n                    type: \"danger\",\n                });\n            },\n        });\n    },\n\n    clearStatus: function (key) {\n        const statusContainer = this.$el[0].querySelector(\".fc-status-container\");\n        let toBeRemoved = [];\n        if (key) {\n            // remove specific status, even if marked with ``fixed``.\n            toBeRemoved = this.statusMessages.filter(function (item) {\n                return item.key === key;\n            });\n            toBeRemoved.forEach(function (statusItem) {\n                try {\n                    statusContainer.removeChild(statusItem.el);\n                } catch (e) {\n                    // just ignore.\n                }\n            });\n            this.statusMessages = this.statusMessages.filter(function (item) {\n                return item.key !== key;\n            });\n        } else {\n            // remove all status messages except those marked with ``fixed``.\n            this.statusMessages.forEach(\n                function (statusItem) {\n                    if (!statusItem.fixed) {\n                        try {\n                            statusContainer.removeChild(statusItem.el);\n                            toBeRemoved.push(statusItem);\n                        } catch (e) {\n                            // just ignore.\n                        }\n                    }\n                }.bind(this)\n            );\n            this.statusMessages = this.statusMessages.filter(function (item) {\n                return toBeRemoved.indexOf(item) === -1;\n            });\n        }\n    },\n\n    setStatus: function (status, btn, fixed, key) {\n        if (\n            key &&\n            this.statusMessages.filter(function (item) {\n                return item.key === key;\n            }).length > 0\n        ) {\n            // Prevent two same status messages\n            return;\n        }\n\n        const el = utils.createElementFromHTML(this.statusTemplate({\n            label: status.label || \"\",\n            text: status.text,\n            type: status.type || \"warning\",\n        }));\n\n        if (btn) {\n            btn = $(btn)[0]; // support jquert + bare dom elements\n            el.appendChild(btn);\n        }\n\n        status = {\n            el: el,\n            fixed: fixed,\n            key: key, // to be used for filtering to prevent double status messages.\n        };\n\n        const statusContainer = this.$el[0].querySelector(\".fc-status-container\");\n        statusContainer.appendChild(status.el);\n        this.statusMessages.push(status);\n\n        return status;\n    },\n\n    render: async function () {\n        this.$el.append(this.toolbar.render().el);\n        if (this.wellView) {\n            this.$el.find(\"#btn-\" + this.wellView.id).after(this.wellView.render().el);\n        }\n        for (const form of this.forms) {\n            const id = $(form).attr(\"id\");\n            const $btn = this.$el.find(\"#btn-\" + id);\n            if($btn.closest('.btn-group').length){\n                $btn.closest('.btn-group').after(form);\n            }\n            else{\n                this.$el.find(\"#btn-\" + id).after(form);\n            }\n        }\n\n        this.$el.append(\n            utils.createElementFromHTML('<div class=\"fc-status-container\"></div>')\n        );\n        if (this.columnsView) {\n            this.$el\n                .find(\"#btn-\" + this.columnsView.id)\n                .after(this.columnsView.render().el);\n        }\n        if (this.rearrangeView) {\n            this.$el\n                .find(\"#btn-\" + this.rearrangeView.id)\n                .after(this.rearrangeView.render().el);\n        }\n        if (this.uploadView) {\n            this.$el\n                .find(\"#btn-\" + this.uploadView.id)\n                .after(this.uploadView.render().el);\n        }\n\n        await this.tableView.render();\n        this.$el.append(this.tableView.el);\n        this.$el.append(this.pagingView.render().el);\n\n        // Backdrop class\n        if (this.options.backdropSelector !== null) {\n            $(this.options.backdropSelector).addClass(\"ui-backdrop-element\");\n        } else {\n            this.$el.addClass(\"ui-backdrop-element\");\n        }\n\n        return this;\n    },\n\n    getCookieSetting: function (name, _default) {\n        if (_default === undefined) {\n            _default = null;\n        }\n        let val;\n        try {\n            val = Cookies.get(this.cookieSettingPrefix + name);\n            val = JSON.parse(val).value;\n        } catch (e) {\n            /* error parsing json, load default here now */\n            return _default;\n        }\n        if (val === undefined || val === null) {\n            return _default;\n        }\n        return val;\n    },\n\n    setCookieSetting: function (name, val) {\n        Cookies.set(\n            this.cookieSettingPrefix + name,\n            JSON.stringify({\n                value: val,\n            })\n        );\n    },\n\n    setAllCookieSettings: function () {\n        this.activeColumns = this.getCookieSetting(\n            this.activeColumnsCookie,\n            this.activeColumns\n        );\n        let perPage = this.getCookieSetting(\"perPage\", 15);\n        if (typeof perPage === \"string\") {\n            perPage = parseInt(perPage);\n        }\n        this.collection.howManyPer(perPage);\n    },\n});\n","/*globals Backbone:true, _:true, jQuery:true*/\nBackbone.Paginator = (function ( Backbone, _, $ ) {\n  \"use strict\";\n\n\n  var bbVer = _.map(Backbone.VERSION.split('.'), function(digit) {\n    return parseInt(digit, 10);\n  });\n\n  var Paginator = {};\n  Paginator.version = \"<%= pkg.version %>\";\n\n  // @name: clientPager\n  //\n  // @tagline: Paginator for client-side data\n  //\n  // @description:\n  // This paginator is responsible for providing pagination\n  // and sort capabilities for a single payload of data\n  // we wish to paginate by the UI for easier browsering.\n  //\n  Paginator.clientPager = Backbone.Collection.extend({\n\n    // DEFAULTS FOR SORTING & FILTERING\n    useDiacriticsPlugin: true, // use diacritics plugin if available\n    useLevenshteinPlugin: true, // use levenshtein plugin if available\n    sortColumn: \"\",\n    sortDirection: \"desc\",\n    lastSortColumn: \"\",\n    fieldFilterRules: [],\n    lastFieldFilterRules: [],\n    filterFields: \"\",\n    filterExpression: \"\",\n    lastFilterExpression: \"\",\n\n    //DEFAULT PAGINATOR UI VALUES\n    defaults_ui: {\n      firstPage: 0,\n      currentPage: 1,\n      perPage: 5,\n      totalPages: 10,\n      pagesInRange: 4\n    },\n\n    // Default values used when sorting and/or filtering.\n    initialize: function(){\n      //LISTEN FOR ADD & REMOVE EVENTS THEN REMOVE MODELS FROM ORGINAL MODELS\n      this.on('add', this.addModel, this);\n      this.on('remove', this.removeModel, this);\n\n      // SET DEFAULT VALUES (ALLOWS YOU TO POPULATE PAGINATOR MAUNALLY)\n      this.setDefaults();\n    },\n\n\n    setDefaults: function() {\n      // SET DEFAULT UI SETTINGS\n      var options = _.defaults(this.paginator_ui, this.defaults_ui);\n\n      //UPDATE GLOBAL UI SETTINGS\n      _.defaults(this, options);\n    },\n\n    addModel: function(model) {\n      this.origModels.push(model);\n    },\n\n    removeModel: function(model) {\n      var index = _.indexOf(this.origModels, model);\n\n      this.origModels.splice(index, 1);\n    },\n\n    sync: function ( method, model, options ) {\n      var self = this;\n\n      // SET DEFAULT VALUES\n      this.setDefaults();\n\n      // Some values could be functions, let's make sure\n      // to change their scope too and run them\n      var queryAttributes = {};\n      _.each(_.result(self, \"server_api\"), function(value, key){\n        if( _.isFunction(value) ) {\n          value = _.bind(value, self);\n          value = value();\n        }\n        queryAttributes[key] = value;\n      });\n\n      var queryOptions = _.clone(self.paginator_core);\n      _.each(queryOptions, function(value, key){\n        if( _.isFunction(value) ) {\n          value = _.bind(value, self);\n          value = value();\n        }\n        queryOptions[key] = value;\n      });\n\n      // Create default values if no others are specified\n      queryOptions = _.defaults(queryOptions, {\n        timeout: 25000,\n        cache: false,\n        type: 'GET',\n        dataType: 'jsonp'\n      });\n\n      queryOptions = _.extend(queryOptions, {\n        data: decodeURIComponent($.param(queryAttributes)),\n        processData: false,\n        url: _.result(queryOptions, 'url')\n      }, options);\n\n      var promiseSuccessFormat = !(bbVer[0] === 0 &&\n                                   bbVer[1] === 9 &&\n                                   bbVer[2] === 10);\n\n      var isBeforeBackbone_1_0 = bbVer[0] === 0;\n\n      var success = queryOptions.success;\n      queryOptions.success = function ( resp, status, xhr ) {\n        if ( success ) {\n          // This is to keep compatibility with Backbone 0.9.10\n          if (promiseSuccessFormat) {\n            success( resp, status, xhr );\n          } else {\n            success( model, resp, queryOptions );\n          }\n        }\n        if ( isBeforeBackbone_1_0 && model && model.trigger ) {\n          model.trigger( 'sync', model, resp, queryOptions );\n        }\n      };\n\n      var error = queryOptions.error;\n      queryOptions.error = function ( xhr ) {\n        if ( error ) {\n          error( xhr );\n        }\n        if ( isBeforeBackbone_1_0 && model && model.trigger ) {\n          model.trigger( 'error', model, xhr, queryOptions );\n        }\n      };\n\n      var xhr = queryOptions.xhr = Backbone.ajax( queryOptions );\n      if ( model && model.trigger ) {\n        model.trigger('request', model, xhr, queryOptions);\n      }\n      return xhr;\n    },\n\n    nextPage: function (options) {\n      if(this.currentPage < this.information.totalPages) {\n        this.currentPage = ++this.currentPage;\n        this.pager(options);\n      }\n    },\n\n    previousPage: function (options) {\n      if(this.currentPage > 1) {\n        this.currentPage = --this.currentPage;\n        this.pager(options);\n      }\n    },\n\n    goTo: function ( page, options ) {\n      if(page !== undefined){\n        this.currentPage = parseInt(page, 10);\n        this.pager(options);\n      }\n    },\n\n    howManyPer: function ( perPage ) {\n      if(perPage !== undefined){\n        var lastPerPage = this.perPage;\n        this.perPage = parseInt(perPage, 10);\n        this.currentPage = Math.ceil( ( lastPerPage * ( this.currentPage - 1 ) + 1 ) / perPage);\n        this.pager();\n      }\n    },\n\n\n    // setSort is used to sort the current model. After\n    // passing 'column', which is the model's field you want\n    // to filter and 'direction', which is the direction\n    // desired for the ordering ('asc' or 'desc'), pager()\n    // and info() will be called automatically.\n    setSort: function ( column, direction ) {\n      if(column !== undefined && direction !== undefined){\n        this.lastSortColumn = this.sortColumn;\n        this.sortColumn = column;\n        this.sortDirection = direction;\n        this.pager();\n        this.info();\n      }\n    },\n\n    // setFieldFilter is used to filter each value of each model\n    // according to `rules` that you pass as argument.\n    // Example: You have a collection of books with 'release year' and 'author'.\n    // You can filter only the books that were released between 1999 and 2003\n    // And then you can add another `rule` that will filter those books only to\n    // authors who's name start with 'A'.\n    setFieldFilter: function ( fieldFilterRules ) {\n      if( !_.isEmpty( fieldFilterRules ) ) {\n        this.lastFieldFilterRules = this.fieldFilterRules;\n        this.fieldFilterRules = fieldFilterRules;\n        this.pager();\n        this.info();\n        // if all the filters are removed, we should save the last filter\n        // and then let the list reset to it's original state.\n      } else {\n        this.lastFieldFilterRules = this.fieldFilterRules;\n        this.fieldFilterRules = '';\n        this.pager();\n        this.info();\n      }\n    },\n\n    // doFakeFieldFilter can be used to get the number of models that will remain\n    // after calling setFieldFilter with a filter rule(s)\n    doFakeFieldFilter: function ( rules ) {\n      if( !_.isEmpty( rules ) ) {\n        var testModels = this.origModels;\n        if (testModels === undefined) {\n          testModels = this.models;\n        }\n\n        testModels = this._fieldFilter(testModels, rules);\n\n        // To comply with current behavior, also filter by any previously defined setFilter rules.\n        if ( this.filterExpression !== \"\" ) {\n          testModels = this._filter(testModels, this.filterFields, this.filterExpression);\n        }\n\n        // Return size\n        return testModels.length;\n      }\n\n    },\n\n    // setFilter is used to filter the current model. After\n    // passing 'fields', which can be a string referring to\n    // the model's field, an array of strings representing\n    // each of the model's fields or an object with the name\n    // of the model's field(s) and comparing options (see docs)\n    // you wish to filter by and\n    // 'filter', which is the word or words you wish to\n    // filter by, pager() and info() will be called automatically.\n    setFilter: function ( fields, filter ) {\n      if( fields !== undefined && filter !== undefined ){\n        this.filterFields = fields;\n        this.lastFilterExpression = this.filterExpression;\n        this.filterExpression = filter;\n        this.pager();\n        this.info();\n      }\n    },\n\n    // doFakeFilter can be used to get the number of models that will\n    // remain after calling setFilter with a `fields` and `filter` args.\n    doFakeFilter: function ( fields, filter ) {\n      if( fields !== undefined && filter !== undefined ){\n        var testModels = this.origModels;\n        if (testModels === undefined) {\n          testModels = this.models;\n        }\n\n        // To comply with current behavior, first filter by any previously defined setFieldFilter rules.\n        if ( !_.isEmpty( this.fieldFilterRules ) ) {\n          testModels = this._fieldFilter(testModels, this.fieldFilterRules);\n        }\n\n        testModels = this._filter(testModels, fields, filter);\n\n        // Return size\n        return testModels.length;\n      }\n    },\n\n\n    // pager is used to sort, filter and show the data\n    // you expect the library to display.\n    pager: function (options) {\n      var self = this,\n      disp = this.perPage,\n      start = (self.currentPage - 1) * disp,\n      stop = start + disp;\n      // Saving the original models collection is important\n      // as we could need to sort or filter, and we don't want\n      // to loose the data we fetched from the server.\n      if (self.origModels === undefined) {\n        self.origModels = self.models;\n      }\n\n      self.models = self.origModels.slice();\n\n      // Check if sorting was set using setSort.\n      if ( this.sortColumn !== \"\" ) {\n        self.models = self._sort(self.models, this.sortColumn, this.sortDirection);\n      }\n\n      // Check if field-filtering was set using setFieldFilter\n      if ( !_.isEmpty( this.fieldFilterRules ) ) {\n        self.models = self._fieldFilter(self.models, this.fieldFilterRules);\n      }\n\n      // Check if filtering was set using setFilter.\n      if ( this.filterExpression !== \"\" ) {\n        self.models = self._filter(self.models, this.filterFields, this.filterExpression);\n      }\n\n      // If the sorting or the filtering was changed go to the first page\n      if ( this.lastSortColumn !== this.sortColumn || this.lastFilterExpression !== this.filterExpression || !_.isEqual(this.fieldFilterRules, this.lastFieldFilterRules) ) {\n        start = 0;\n        stop = start + disp;\n        self.currentPage = 1;\n\n        this.lastSortColumn = this.sortColumn;\n        this.lastFieldFilterRules = this.fieldFilterRules;\n        this.lastFilterExpression = this.filterExpression;\n      }\n\n      // We need to save the sorted and filtered models collection\n      // because we'll use that sorted and filtered collection in info().\n      self.sortedAndFilteredModels = self.models.slice();\n      self.info();\n      self.reset(self.models.slice(start, stop));\n\n      // This is somewhat of a hack to get all the nextPage, prevPage, and goTo methods\n      // to work with a success callback (as in the requestPager). Realistically there is no failure case here,\n      // but maybe we could catch exception and trigger a failure callback?\n      _.result(options, 'success');\n    },\n\n    // The actual place where the collection is sorted.\n    // Check setSort for arguments explicacion.\n    _sort: function ( models, sort, direction ) {\n      models = models.sort(function (a, b) {\n        var ac = a.get(sort),\n        bc = b.get(sort);\n\n        if ( _.isUndefined(ac) || _.isUndefined(bc) || ac === null || bc === null ) {\n          return 0;\n        } else {\n          /* Make sure that both ac and bc are lowercase strings.\n           * .toString() first so we don't have to worry if ac or bc\n           * have other String-only methods.\n           */\n          ac = ac.toString().toLowerCase();\n          bc = bc.toString().toLowerCase();\n        }\n\n        if (direction === 'desc') {\n\n          // We need to know if there aren't any non-number characters\n          // and that there are numbers-only characters and maybe a dot\n          // if we have a float.\n          // Oh, also a '-' for negative numbers!\n          if((!ac.match(/[^\\-\\d\\.]/) && ac.match(/-?[\\d\\.]+/)) &&\n               (!bc.match(/[^\\-\\d\\.]/) && bc.match(/-?[\\d\\.]+/))){\n\n            if( (ac - 0) < (bc - 0) ) {\n              return 1;\n            }\n            if( (ac - 0) > (bc - 0) ) {\n              return -1;\n            }\n          } else {\n            if (ac < bc) {\n              return 1;\n            }\n            if (ac > bc) {\n              return -1;\n            }\n          }\n\n        } else {\n\n          //Same as the regexp check in the 'if' part.\n          if((!ac.match(/[^\\-\\d\\.]/) && ac.match(/-?[\\d\\.]+/)) &&\n             (!bc.match(/[^\\-\\d\\.]/) && bc.match(/-?[\\d\\.]+/))){\n            if( (ac - 0) < (bc - 0) ) {\n              return -1;\n            }\n            if( (ac - 0) > (bc - 0) ) {\n              return 1;\n            }\n          } else {\n            if (ac < bc) {\n              return -1;\n            }\n            if (ac > bc) {\n              return 1;\n            }\n          }\n\n        }\n\n        if (a.cid && b.cid){\n          var aId = a.cid,\n          bId = b.cid;\n\n          if (aId < bId) {\n            return -1;\n          }\n          if (aId > bId) {\n            return 1;\n          }\n        }\n\n        return 0;\n      });\n\n      return models;\n    },\n\n    // The actual place where the collection is field-filtered.\n    // Check setFieldFilter for arguments explicacion.\n    _fieldFilter: function( models, rules ) {\n\n      // Check if there are any rules\n      if ( _.isEmpty(rules) ) {\n        return models;\n      }\n\n      var filteredModels = [];\n\n      // Iterate over each rule\n      _.each(models, function(model){\n\n        var should_push = true;\n\n        // Apply each rule to each model in the collection\n        _.each(rules, function(rule){\n\n          // Don't go inside the switch if we're already sure that the model won't be included in the results\n          if( !should_push ){\n            return false;\n          }\n\n          should_push = false;\n\n          // The field's value will be passed to a custom function, which should\n          // return true (if model should be included) or false (model should be ignored)\n          if(rule.type === \"function\"){\n            var f = _.wrap(rule.value, function(func){\n              return func( model.get(rule.field) );\n            });\n            if( f() ){\n              should_push = true;\n            }\n\n            // The field's value is required to be non-empty\n          }else if(rule.type === \"required\"){\n            if( !_.isEmpty( model.get(rule.field).toString() ) ) {\n              should_push = true;\n            }\n\n            // The field's value is required to be greater than N (numbers only)\n          }else if(rule.type === \"min\"){\n            if( !_.isNaN( Number( model.get(rule.field) ) ) &&\n               !_.isNaN( Number( rule.value ) ) &&\n                 Number( model.get(rule.field) ) >= Number( rule.value ) ) {\n              should_push = true;\n            }\n\n            // The field's value is required to be smaller than N (numbers only)\n          }else if(rule.type === \"max\"){\n            if( !_.isNaN( Number( model.get(rule.field) ) ) &&\n               !_.isNaN( Number( rule.value ) ) &&\n                 Number( model.get(rule.field) ) <= Number( rule.value ) ) {\n              should_push = true;\n            }\n\n            // The field's value is required to be between N and M (numbers only)\n          }else if(rule.type === \"range\"){\n            if( !_.isNaN( Number( model.get(rule.field) ) ) &&\n               _.isObject( rule.value ) &&\n                 !_.isNaN( Number( rule.value.min ) ) &&\n                   !_.isNaN( Number( rule.value.max ) ) &&\n                     Number( model.get(rule.field) ) >= Number( rule.value.min ) &&\n                       Number( model.get(rule.field) ) <= Number( rule.value.max ) ) {\n              should_push = true;\n            }\n\n            // The field's value is required to be more than N chars long\n          }else if(rule.type === \"minLength\"){\n            if( model.get(rule.field).toString().length >= rule.value ) {\n              should_push = true;\n            }\n\n            // The field's value is required to be no more than N chars long\n          }else if(rule.type === \"maxLength\"){\n            if( model.get(rule.field).toString().length <= rule.value ) {\n              should_push = true;\n            }\n\n            // The field's value is required to be more than N chars long and no more than M chars long\n          }else if(rule.type === \"rangeLength\"){\n            if( _.isObject( rule.value ) &&\n               !_.isNaN( Number( rule.value.min ) ) &&\n                 !_.isNaN( Number( rule.value.max ) ) &&\n                   model.get(rule.field).toString().length >= rule.value.min &&\n                     model.get(rule.field).toString().length <= rule.value.max ) {\n              should_push = true;\n            }\n\n            // The field's value is required to be equal to one of the values in rules.value\n          }else if(rule.type === \"oneOf\"){\n            if( _.isArray( rule.value ) &&\n               _.include( rule.value, model.get(rule.field) ) ) {\n              should_push = true;\n            }\n\n            // The field's value is required to be equal to the value in rules.value\n          }else if(rule.type === \"equalTo\"){\n            if( rule.value === model.get(rule.field) ) {\n              should_push = true;\n            }\n\n          }else if(rule.type === \"containsAllOf\"){\n            if( _.isArray( rule.value ) &&\n                _.isArray(model.get(rule.field)) &&\n                _.intersection( rule.value, model.get(rule.field)).length === rule.value.length) {\n              should_push = true;\n            }\n\n              // The field's value is required to match the regular expression\n          }else if(rule.type === \"pattern\"){\n            if( model.get(rule.field).toString().match(rule.value) ) {\n              should_push = true;\n            }\n\n            // The field's value will be applied to the model, which should\n            // return true (if model should be included) or false (model should be ignored)\n          }else if(rule.type === \"custom\"){\n            var attr = model.toJSON();\n            var cf = _.wrap(rule.value, function(func){\n              return func( attr );\n            });\n            if( cf() ){\n              should_push = true;\n            }\n\n            //Unknown type\n          }else{\n            should_push = false;\n          }\n\n        });\n\n        if( should_push ){\n          filteredModels.push(model);\n        }\n\n      });\n\n      return filteredModels;\n    },\n\n    // The actual place where the collection is filtered.\n    // Check setFilter for arguments explicacion.\n    _filter: function ( models, fields, filter ) {\n\n      //  For example, if you had a data model containing cars like { color: '', description: '', hp: '' },\n      //  your fields was set to ['color', 'description', 'hp'] and your filter was set\n      //  to \"Black Mustang 300\", the word \"Black\" will match all the cars that have black color, then\n      //  \"Mustang\" in the description and then the HP in the 'hp' field.\n      //  NOTE: \"Black Musta 300\" will return the same as \"Black Mustang 300\"\n\n      // We accept fields to be a string, an array or an object\n      // but if string or array is passed we need to convert it\n      // to an object.\n\n      var self = this;\n\n      var obj_fields = {};\n\n      if( _.isString( fields ) ) {\n        obj_fields[fields] = {cmp_method: 'regexp'};\n      }else if( _.isArray( fields ) ) {\n        _.each(fields, function(field){\n          obj_fields[field] = {cmp_method: 'regexp'};\n        });\n      }else{\n        _.each(fields, function( cmp_opts, field ) {\n          obj_fields[field] = _.defaults(cmp_opts, { cmp_method: 'regexp' });\n        });\n      }\n\n      fields = obj_fields;\n\n      //Remove diacritic characters if diacritic plugin is loaded\n      if( _.has(Backbone.Paginator, 'removeDiacritics') && self.useDiacriticsPlugin ){\n        filter = Backbone.Paginator.removeDiacritics(filter);\n      }\n\n      // 'filter' can be only a string.\n      // If 'filter' is string we need to convert it to\n      // a regular expression.\n      // For example, if 'filter' is 'black dog' we need\n      // to find every single word, remove duplicated ones (if any)\n      // and transform the result to '(black|dog)'\n      if( filter === '' || !_.isString(filter) ) {\n        return models;\n      } else {\n        var words = _.map(filter.match(/\\w+/ig), function(element) { return element.toLowerCase(); });\n        var pattern = \"(\" + _.uniq(words).join(\"|\") + \")\";\n        var regexp = new RegExp(pattern, \"igm\");\n      }\n\n      var filteredModels = [];\n\n      // We need to iterate over each model\n      _.each( models, function( model ) {\n\n        var matchesPerModel = [];\n\n        // and over each field of each model\n        _.each( fields, function( cmp_opts, field ) {\n\n          var value = model.get( field );\n\n          if( value ) {\n\n            // The regular expression we created earlier let's us detect if a\n            // given string contains each and all of the words in the regular expression\n            // or not, but in both cases match() will return an array containing all\n            // the words it matched.\n            var matchesPerField = [];\n\n            if( _.has(Backbone.Paginator, 'removeDiacritics') && self.useDiacriticsPlugin ){\n              value = Backbone.Paginator.removeDiacritics(value.toString());\n            }else{\n              value = value.toString();\n            }\n\n            // Levenshtein cmp\n            if( cmp_opts.cmp_method === 'levenshtein' && _.has(Backbone.Paginator, 'levenshtein') && self.useLevenshteinPlugin ) {\n              var distance = Backbone.Paginator.levenshtein(value, filter);\n\n              _.defaults(cmp_opts, { max_distance: 0 });\n\n              if( distance <= cmp_opts.max_distance ) {\n                matchesPerField = _.uniq(words);\n              }\n\n              // Default (RegExp) cmp\n            }else{\n              matchesPerField = value.match( regexp );\n            }\n\n            matchesPerField = _.map(matchesPerField, function(match) {\n              return match.toString().toLowerCase();\n            });\n\n            _.each(matchesPerField, function(match){\n              matchesPerModel.push(match);\n            });\n\n          }\n\n        });\n\n        // We just need to check if the returned array contains all the words in our\n        // regex, and if it does, it means that we have a match, so we should save it.\n        matchesPerModel = _.uniq( _.without(matchesPerModel, \"\") );\n\n        if(  _.isEmpty( _.difference(words, matchesPerModel) ) ) {\n          filteredModels.push(model);\n        }\n\n      });\n\n      return filteredModels;\n    },\n\n    // You shouldn't need to call info() as this method is used to\n    // calculate internal data as first/prev/next/last page...\n    info: function () {\n      var self = this,\n      info = {},\n      totalRecords = (self.sortedAndFilteredModels) ? self.sortedAndFilteredModels.length : self.length,\n      totalPages = Math.ceil(totalRecords / self.perPage);\n\n      info = {\n        totalUnfilteredRecords: self.origModels.length,\n        totalRecords: totalRecords,\n        currentPage: self.currentPage,\n        perPage: this.perPage,\n        totalPages: totalPages,\n        lastPage: totalPages,\n        previous: false,\n        next: false,\n        startRecord: totalRecords === 0 ? 0 : (self.currentPage - 1) * this.perPage + 1,\n        endRecord: Math.min(totalRecords, self.currentPage * this.perPage)\n      };\n\n      if (self.currentPage > 1) {\n        info.previous = self.currentPage - 1;\n      }\n\n      if (self.currentPage < info.totalPages) {\n        info.next = self.currentPage + 1;\n      }\n\n      info.pageSet = self.setPagination(info);\n\n      self.information = info;\n      return info;\n    },\n\n\n    // setPagination also is an internal function that shouldn't be called directly.\n    // It will create an array containing the pages right before and right after the\n    // actual page.\n    setPagination: function ( info ) {\n\n      var pages = [], i = 0, l = 0;\n\n      // How many adjacent pages should be shown on each side?\n      var ADJACENTx2 = this.pagesInRange * 2,\n      LASTPAGE = Math.ceil(info.totalRecords / info.perPage);\n\n      if (LASTPAGE > 1) {\n\n        // not enough pages to bother breaking it up\n        if (LASTPAGE <= (1 + ADJACENTx2)) {\n          for (i = 1, l = LASTPAGE; i <= l; i++) {\n            pages.push(i);\n          }\n        }\n\n        // enough pages to hide some\n        else {\n\n          //close to beginning; only hide later pages\n          if (info.currentPage <=  (this.pagesInRange + 1)) {\n            for (i = 1, l = 2 + ADJACENTx2; i < l; i++) {\n              pages.push(i);\n            }\n          }\n\n          // in middle; hide some front and some back\n          else if (LASTPAGE - this.pagesInRange > info.currentPage && info.currentPage > this.pagesInRange) {\n            for (i = info.currentPage - this.pagesInRange; i <= info.currentPage + this.pagesInRange; i++) {\n              pages.push(i);\n            }\n          }\n\n          // close to end; only hide early pages\n          else {\n            for (i = LASTPAGE - ADJACENTx2; i <= LASTPAGE; i++) {\n              pages.push(i);\n            }\n          }\n        }\n\n      }\n\n      return pages;\n\n    },\n\n    bootstrap: function(options) {\n      _.extend(this, options);\n      this.goTo(1);\n      this.info();\n      return this;\n    }\n\n  });\n\n  // function aliasing\n  Paginator.clientPager.prototype.prevPage = Paginator.clientPager.prototype.previousPage;\n\n  // Helper function to generate rejected Deferred\n  var reject = function () {\n    var response = new $.Deferred();\n    response.reject();\n    return response.promise();\n  };\n\n  // @name: requestPager\n  //\n  // Paginator for server-side data being requested from a backend/API\n  //\n  // @description:\n  // This paginator is responsible for providing pagination\n  // and sort capabilities for requests to a server-side\n  // data service (e.g an API)\n  //\n  Paginator.requestPager = Backbone.Collection.extend({\n\n    sync: function ( method, model, options ) {\n\n      var self = this;\n\n      self.setDefaults();\n\n      // Some values could be functions, let's make sure\n      // to change their scope too and run them\n      var queryAttributes = {};\n      _.each(_.result(self, \"server_api\"), function(value, key){\n        if( _.isFunction(value) ) {\n          value = _.bind(value, self);\n          value = value();\n        }\n        queryAttributes[key] = value;\n      });\n\n      var queryOptions = _.clone(self.paginator_core);\n      _.each(queryOptions, function(value, key){\n        if( _.isFunction(value) ) {\n          value = _.bind(value, self);\n          value = value();\n        }\n        queryOptions[key] = value;\n      });\n\n      // Create default values if no others are specified\n      queryOptions = _.defaults(queryOptions, {\n        timeout: 25000,\n        cache: false,\n        type: 'GET',\n        dataType: 'jsonp',\n        url: self.url\n      });\n\n      // Allows the passing in of {data: {foo: 'bar'}} at request time to overwrite server_api defaults\n      if( options.data ){\n        options.data = decodeURIComponent($.param(_.extend(queryAttributes,options.data)));\n      }else{\n        options.data = decodeURIComponent($.param(queryAttributes));\n      }\n\n      queryOptions = _.extend(queryOptions, {\n        data: decodeURIComponent($.param(queryAttributes)),\n        processData: false,\n        url: _.result(queryOptions, 'url')\n      }, options);\n\n      var promiseSuccessFormat = !(bbVer[0] === 0 &&\n                                   bbVer[1] === 9 &&\n                                   bbVer[2] === 10);\n\n      var isBeforeBackbone_1_0 = bbVer[0] === 0;\n\n      var success = queryOptions.success;\n      queryOptions.success = function ( resp, status, xhr ) {\n\n        if ( success ) {\n          // This is to keep compatibility with Backbone 0.9.10\n          if (promiseSuccessFormat) {\n            success( resp, status, xhr );\n          } else {\n            success( model, resp, queryOptions );\n          }\n        }\n        if (isBeforeBackbone_1_0 && model && model.trigger ) {\n          model.trigger( 'sync', model, resp, queryOptions );\n        }\n      };\n\n      var error = queryOptions.error;\n      queryOptions.error = function ( xhr ) {\n        if ( error ) {\n          error( xhr );\n        }\n        if ( isBeforeBackbone_1_0 && model && model.trigger ) {\n          model.trigger( 'error', model, xhr, queryOptions );\n        }\n      };\n\n      var xhr = queryOptions.xhr = Backbone.ajax( queryOptions );\n      if ( model && model.trigger ) {\n        model.trigger('request', model, xhr, queryOptions);\n      }\n      return xhr;\n    },\n\n    setDefaults: function() {\n      var self = this;\n\n      // Create default values if no others are specified\n      _.defaults(self.paginator_ui, {\n        firstPage: 0,\n        currentPage: 1,\n        perPage: 5,\n        totalPages: 10,\n        pagesInRange: 4\n      });\n\n      // Change scope of 'paginator_ui' object values\n      _.each(self.paginator_ui, function(value, key) {\n        if (_.isUndefined(self[key])) {\n          self[key] = self.paginator_ui[key];\n        }\n      });\n    },\n\n    requestNextPage: function ( options ) {\n      if ( this.currentPage !== undefined ) {\n        this.currentPage += 1;\n        return this.pager( options );\n      } else {\n        return reject();\n      }\n    },\n\n    requestPreviousPage: function ( options ) {\n      if ( this.currentPage !== undefined ) {\n        this.currentPage -= 1;\n        return this.pager( options );\n      } else {\n        return reject();\n      }\n    },\n\n    updateOrder: function ( column, options ) {\n      if (column !== undefined) {\n        this.sortField = column;\n        return this.pager( options );\n      } else {\n        return reject();\n      }\n    },\n\n    goTo: function ( page, options ) {\n      if ( page !== undefined ) {\n        this.currentPage = parseInt(page, 10);\n        return this.pager( options );\n      } else {\n        return reject();\n      }\n    },\n\n    howManyPer: function ( count, options ) {\n      if ( count !== undefined ) {\n        this.currentPage = this.firstPage;\n        this.perPage = count;\n        return this.pager( options );\n      } else {\n        return reject();\n      }\n    },\n\n    info: function () {\n\n      var info = {\n        // If parse() method is implemented and totalRecords is set to the length\n        // of the records returned, make it available. Else, default it to 0\n        totalRecords: this.totalRecords || 0,\n\n        currentPage: this.currentPage,\n        firstPage: this.firstPage,\n        totalPages: Math.ceil(this.totalRecords / this.perPage),\n        lastPage: this.totalPages, // should use totalPages in template\n        perPage: this.perPage,\n        previous:false,\n        next:false\n      };\n\n      if (this.currentPage > 1) {\n        info.previous = this.currentPage - 1;\n      }\n\n      if (this.currentPage < info.totalPages) {\n        info.next = this.currentPage + 1;\n      }\n\n      // left around for backwards compatibility\n      info.hasNext = info.next;\n      info.hasPrevious = info.next;\n\n      info.pageSet = this.setPagination(info);\n\n      this.information = info;\n      return info;\n    },\n\n    setPagination: function ( info ) {\n\n      var pages = [], i = 0, l = 0;\n\n      // How many adjacent pages should be shown on each side?\n      var ADJACENTx2 = this.pagesInRange * 2,\n      LASTPAGE = Math.ceil(info.totalRecords / info.perPage);\n\n      if (LASTPAGE > 1) {\n\n        // not enough pages to bother breaking it up\n        if (LASTPAGE <= (1 + ADJACENTx2)) {\n          for (i = 1, l = LASTPAGE; i <= l; i++) {\n            pages.push(i);\n          }\n        }\n\n        // enough pages to hide some\n        else {\n\n          //close to beginning; only hide later pages\n          if (info.currentPage <=  (this.pagesInRange + 1)) {\n            for (i = 1, l = 2 + ADJACENTx2; i < l; i++) {\n              pages.push(i);\n            }\n          }\n\n          // in middle; hide some front and some back\n          else if (LASTPAGE - this.pagesInRange > info.currentPage && info.currentPage > this.pagesInRange) {\n            for (i = info.currentPage - this.pagesInRange; i <= info.currentPage + this.pagesInRange; i++) {\n              pages.push(i);\n            }\n          }\n\n          // close to end; only hide early pages\n          else {\n            for (i = LASTPAGE - ADJACENTx2; i <= LASTPAGE; i++) {\n              pages.push(i);\n            }\n          }\n        }\n\n      }\n\n      return pages;\n\n    },\n\n    // fetches the latest results from the server\n    pager: function ( options ) {\n      if ( !_.isObject(options) ) {\n        options = {};\n      }\n      return this.fetch( options );\n    },\n\n    url: function(){\n      // Expose url parameter enclosed in this.paginator_core.url to properly\n      // extend Collection and allow Collection CRUD\n      if(this.paginator_core !== undefined && this.paginator_core.url !== undefined){\n        return this.paginator_core.url;\n      } else {\n        return null;\n      }\n    },\n\n    bootstrap: function(options) {\n      _.extend(this, options);\n      this.setDefaults();\n      this.info();\n      return this;\n    }\n  });\n\n  // function aliasing\n  Paginator.requestPager.prototype.nextPage = Paginator.requestPager.prototype.requestNextPage;\n  Paginator.requestPager.prototype.prevPage = Paginator.requestPager.prototype.requestPreviousPage;\n\n  return Paginator;\n\n}( Backbone, _, jQuery ));\n"],"names":["Backbone","isUIView","eventPrefix","template","idPrefix","appendInContainer","initialize","options","key","this","_t","render","applyTemplate","trigger","afterRender","id","$el","attr","serializedModel","data","$","_","html","propagateEvent","eventName","indexOf","eventId","split","uiEventTrigger","name","args","slice","call","arguments","BaseView","items","itemContainer","isOffsetParent","renderItems","bindEvents","addClass","$container","length","view","append","self","on","eventTarget","newName","newArgs","apply","undefined","get","add","item","push","ContainerView","tagName","className","disable","button","enable","context","attributes","href","extraClasses","tooltip","events","click","title","toLowerCase","replace","cid","klass","bind","icon","utils","iconMarkup","prepend","Tooltip","e","type","stopPropagation","handleClick","preventDefault","is","removeClass","menuOptions","url","category","css","modal","method","menu","model","app","result","pasteAllowed","is_folderish","pasteItem","inQueryMode","canMove","defaultPageTypes","portal_type","setDefaultPageUrl","selectAll","typeToViewAction","viewAction","openItem","getURL","editItem","defaults","review_state","uid","UID","selectedCollection","page","count","getPage","loading","show","collection","dataType","query","queryParser","searchPath","path","batch","JSON","stringify","size","queryHelper","done","parse","Result","total","hide","tableView","doAction","buttonName","successMsg","failMsg","buttons","selection","folder","_authenticator","msg","status","Title","pager","updateButtons","clearStatus","setStatus","text","cutClicked","copyClicked","pasteClicked","moveTopClicked","moveItem","moveBottomClicked","setDefaultPageClicked","getAjaxUrl","val","success","ajaxSuccessResponse","error","ajaxErrorResponse","ActionMenuTemplate","eventConstructor","definition","actions","menuOptionsCategorized","menuOption","idx","classes","Actions","actionmenu_generator","el","innerHTML","toJSON","header","iconSVG","dropdown","dropdownIcon","extend","registry","TableRowTemplate","table","now","Date","listenTo","expired","ExpirationDate","dt","ineffective","EffectiveDate","selected","findWhere","activeColumns","availableColumns","contenttype","thumb_scale","viewURL","convertColumnValue","attrs","contextInfo","defaultPage","moveUrl","ActionMenuView","column","value","dateColumns","includes","date","toString","toLocaleString","language","dateFormat","itemClicked","keyEvent","ctrlKey","setCurrentPath","goTo","information","firstPage","itemSelected","checkbox","checked","clone","removeResult","shiftKey","parentNode","lastCheckedIndex","index","thisIndex","parents","$tr","closest","existing","getByUID","TRANSITION_END","getSelector","element","selector","getAttribute","hrefAttr","startsWith","trim","isElement","obj","jquery","nodeType","getElement","document","querySelector","getjQuery","jQuery","window","body","hasAttribute","DOMContentLoadedCallbacks","execute","callback","executeAfterTransition","transitionElement","waitForTransition","emulatedDuration","transitionDuration","transitionDelay","getComputedStyle","floatTransitionDuration","Number","parseFloat","floatTransitionDelay","getTransitionDurationFromElement","called","handler","target","removeEventListener","addEventListener","setTimeout","dispatchEvent","Event","namespaceRegex","stripNameRegex","stripUidRegex","eventRegistry","uidEvent","customEvents","mouseenter","mouseleave","customEventsRegex","nativeEvents","Set","getUidEvent","getEvent","findHandler","delegationSelector","uidEventList","Object","keys","i","len","event","originalHandler","normalizeParams","originalTypeEvent","delegationFn","delegation","typeEvent","getTypeEvent","has","addHandler","oneOff","test","wrapFn","fn","relatedTarget","delegateTarget","contains","handlers","previousFn","domElements","querySelectorAll","EventHandler","off","bootstrapDelegationHandler","bootstrapHandler","removeHandler","Boolean","one","inNamespace","isNamespace","forEach","elementEvent","namespace","storeElementEvent","handlerKey","removeNamespacedHandlers","keyHandlers","isNative","jQueryEvent","bubbles","nativeDispatch","defaultPrevented","evt","isPropagationStopped","isImmediatePropagationStopped","isDefaultPrevented","createEvent","initEvent","CustomEvent","cancelable","defineProperty","elementMap","Map","set","instance","instanceMap","console","Array","from","remove","delete","constructor","_element","DATA_KEY","dispose","EVENT_KEY","getOwnPropertyNames","propertyName","_queueCallback","isAnimated","static","config","getInstance","VERSION","NAME","Error","Alert","close","classList","_destroyElement","each","getOrCreateInstance","TypeError","plugin","component","clickEvent","Node","ELEMENT_NODE","disabled","getElementFromSelector","enableDismissTrigger","JQUERY_NO_CONFLICT","jQueryInterface","Constructor","noConflict","readyState","TableTemplate","tableSortable","subsetIds","setContextInfo","crumbs","breadcrumbs","$crumbs","crumb","eq","datatables_options","order","aoColumnDefs","bSortable","aTargets","paging","searching","info","pathParts","getCurrentPath","container","map","col","hasOwnProperty","TableRowView","find","addReordering","storeOrder","settings","ordArr","dir","enableSort","btn","api","dataTable","draw","disableSort","breadcrumbClicked","parent","prevAll","reverse","part","prop","change","models","silent","toggleSelectAll","Sortable","createDragItem","pattern","$table","opacity","position","width","height","appendTo","drop","delta","PopoverTemplate","content","triggerView","triggerEvents","placement","opened","closeOnOutClick","backdrop","$backdrop","useBackdrop","backdropOptions","zIndex","classActiveName","closeOnEsc","closeOnClick","bindTriggerEvents","renderTitle","renderContent","keyCode","getTemplateOptions","empty","func","stopListening","getPosition","offsetWidth","offsetHeight","offset","getBodyClassName","popover","setBackdrop","tp","actualWidth","actualHeight","pos","$tip","top","left","applyPlacement","positionArrow","dimension","toggle","Backdrop","PopoverView","timeout","clearTimeout","ItemTemplate","itemRemoved","currentTarget","removeByUID","filterSelected","removeAll","reset","submitText","form","submitContext","setContent","closeText","applyButtonClicked","serializeArray","param","buttonClickEvent","dataUrl","cache","getSelectedUids","transitions","fail","originalContent","always","replaceWith","rearrangeProperties","rearrange","properties","$rearrangeOn","$reversed","rearrangeButtonClicked","confirm","rearrange_on","reversed","ButtonView","tplButton","PagingTemplate","maxPages","pages","getPages","totalPages","right","Math","max","floor","currentPage","min","concat","nextResultPage","requestNextPage","previousResultPage","requestPreviousPage","gotoFirst","gotoLast","gotoPage","changeCount","per","howManyPer","setCookieSetting","itemTemplate","sort","a","b","ca","cb","inp","activeColumnsCookie","popoverContent","term","timeoutId","keyupDelay","statusKeyFilter","statusKeySorting","setFilterStatusMessage","clear_btn","clearFilter","statusTextFilter","statusTextSorting","clearFilterStatusMessage","additionalCriterias","setTerm","set_input","term_el","encodeURIComponent","hasquery","qu","$queryString","setQuery","query_string","query_obj","clearTerm","queryString","QueryString","indexOptionsUrl","showPreviews","$sortOn","$sortOrder","filter","currentPathData","upload","currentPath","allowPathSelection","Upload","setPath","found","queryHelperAttributes","toolbar","sortOn","sort_on","sortOrder","sort_order","criteria","getCriterias","location","hash","substring","paginator_core","paginator_ui","perPage","server_api","batchSize","getBatch","response","baseSortIdx","totalRecords","results","entries","_sort","comparator","log","logging","statusTemplate","StatusTemplate","statusMessages","cookieSettingPrefix","textfilter","forms","Cookies","$popover","ResultCollection","collectionUrl","setAllCookieSettings","SelectedCollection","TableView","pagingView","PagingView","setupButtons","wellView","SelectionWellView","contextInfoUrl","history","pushState","doNotPushState","pushStateUrl","urlStructure","base","appended","traverseView","tmp","togglePasteBtn","uids","arg1","arg2","alert","columnsBtn","columnsView","ColumnsView","SelectionButtonView","rearrangeButton","rearrangeView","RearrangeView","uploadButton","uploadView","UploadView","buttonOptions","GenericPopover","err","ButtonGroup","TextFilterView","Toolbar","statusContainer","toBeRemoved","statusItem","removeChild","fixed","label","appendChild","after","$btn","backdropSelector","getCookieSetting","_default","parseInt","Paginator","bbVer","digit","clientPager","Collection","useDiacriticsPlugin","useLevenshteinPlugin","sortColumn","sortDirection","lastSortColumn","fieldFilterRules","lastFieldFilterRules","filterFields","filterExpression","lastFilterExpression","defaults_ui","pagesInRange","addModel","removeModel","setDefaults","origModels","splice","sync","queryAttributes","isFunction","queryOptions","decodeURIComponent","processData","promiseSuccessFormat","isBeforeBackbone_1_0","resp","xhr","ajax","nextPage","previousPage","lastPerPage","ceil","setSort","direction","setFieldFilter","isEmpty","doFakeFieldFilter","rules","testModels","_fieldFilter","_filter","setFilter","fields","doFakeFilter","disp","start","stop","isEqual","sortedAndFilteredModels","ac","bc","isUndefined","match","aId","bId","filteredModels","should_push","rule","wrap","field","f","isNaN","isObject","isArray","include","intersection","cf","obj_fields","isString","cmp_method","cmp_opts","removeDiacritics","words","uniq","join","regexp","RegExp","matchesPerModel","matchesPerField","distance","levenshtein","max_distance","without","difference","totalUnfilteredRecords","lastPage","previous","next","startRecord","endRecord","pageSet","setPagination","l","ADJACENTx2","LASTPAGE","bootstrap","prototype","prevPage","reject","Deferred","promise","requestPager","updateOrder","sortField","hasNext","hasPrevious","fetch"],"sourceRoot":""}