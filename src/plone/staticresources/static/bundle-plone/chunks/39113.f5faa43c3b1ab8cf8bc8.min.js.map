{"version":3,"file":"chunks/39113.f5faa43c3b1ab8cf8bc8.min.js","mappings":";sNAGe,MAAMA,EACjBC,YAAYC,GACRC,KAAKD,GAAKA,EACVC,KAAKC,qBAAuB,CAAC,uBAChC,CASDC,OACI,IAAIC,EAAOH,KACXI,IACI,qFAECC,OAAO,SACPC,OAAM,WACH,IAAIC,EAAOH,IAAEJ,MAAMQ,KAAK,QACxB,GACY,6BAARD,GACQ,0BAARA,EAEA,OAAO,EAEXH,IAAE,YAAYK,OACd,IAAIC,EAAON,IAAEJ,MAAMW,QAAQ,QAAQC,QAC/BC,EAAWH,EAAKC,QAAQ,YAAYC,QACpCE,EAAOJ,EAAKK,YAAc,IAAMR,EAAO,KACvCS,EAAMN,EAAKF,KAAK,UAOpB,OANAJ,IAAAA,KAAOY,EAAKF,GAAM,SAAUG,GACxB,IAAIC,EAAcd,IAAEa,GAAME,KAAK,IAAMN,EAASL,KAAK,OACnDK,EAASO,YAAYF,GACrBG,YACAjB,IAAE,YAAYkB,MACjB,KACM,CACV,IAELlB,IAAE,8EACGC,OAAO,SACPC,OAAM,SAAUiB,GAGb,IAFA,IAAIb,EAAON,IAAEJ,MAAMwB,SAASA,SACxBV,EAAOJ,EAAKK,YACPU,EAAI,EAAGA,EAAItB,EAAKF,qBAAqByB,OAAQD,IAClD,IAAoD,IAAhDX,EAAKa,QAAQxB,EAAKF,qBAAqBwB,IACvC,OAGRF,EAAEK,iBACF,IAAIZ,EAAMN,EAAKF,KAAK,UAAY,IAAMM,EAClCe,EAAkBzB,IAAE,YAAcY,EAAM,QAAQc,IAChD,UACA,QAEJD,EAAgBE,YAAY/B,MAC5B,IAAIgC,EAAAA,EAAMH,EAAiB,CACvBI,cAAe,CACXC,QAAQ,EACRC,oBAAoB,EACpBC,cAAe,WAEX,OAAOC,OAAOC,SAASC,IAC1B,KAGTV,EAAgBW,QAAQ,QAC3B,GACR,E","sources":["webpack://plone.staticresources/./node_modules/@plone/mockup/src/pat/controlpanels/contentrule-elements--implementation.js"],"sourcesContent":["import $ from \"jquery\";\nimport Modal from \"../modal/modal\";\n\nexport default class Contentrules {\n    constructor(el) {\n        this.el = el;\n        this.SKIP_OVERLAY_ACTIONS = [\"plone.actions.Delete\"];\n    }\n\n    /* global require */\n\n    // require([\n    //   'jquery',\n    //   'mockup-patterns-modal'\n    // ], function($, Modal) {\n    //   'use strict';\n    init() {\n        let self = this;\n        $(\n            \"#configure-conditions .rule-element input, #configure-actions .rule-element input\"\n        )\n            .unbind(\"click\")\n            .click(function () {\n                var name = $(this).attr(\"name\");\n                if (\n                    name == \"form.button.EditCondition\" ||\n                    name == \"form.button.EditAction\"\n                ) {\n                    return true;\n                }\n                $(\"#spinner\").show();\n                var form = $(this).parents(\"form\").first();\n                var fieldset = form.parents(\"fieldset\").first();\n                var data = form.serialize() + \"&\" + name + \"=1\";\n                var url = form.attr(\"action\");\n                $.post(url, data, function (html) {\n                    var newfieldset = $(html).find(\"#\" + fieldset.attr(\"id\"));\n                    fieldset.replaceWith(newfieldset);\n                    initforms();\n                    $(\"#spinner\").hide();\n                });\n                return false;\n            });\n\n        $('input[name=\"form.button.AddCondition\"],input[name=\"form.button.AddAction\"]')\n            .unbind(\"click\")\n            .click(function (e) {\n                var form = $(this).parent().parent();\n                var data = form.serialize();\n                for (var i = 0; i < self.SKIP_OVERLAY_ACTIONS.length; i++) {\n                    if (data.indexOf(self.SKIP_OVERLAY_ACTIONS[i]) !== -1) {\n                        return;\n                    }\n                }\n                e.preventDefault();\n                var url = form.attr(\"action\") + \"?\" + data;\n                var conditionAnchor = $('<a href=\"' + url + '\" />').css(\n                    \"display\",\n                    \"none\"\n                );\n                conditionAnchor.insertAfter(this);\n                new Modal(conditionAnchor, {\n                    actionOptions: {\n                        isForm: true,\n                        redirectOnResponse: true,\n                        redirectToUrl: function () {\n                            /* reload on submit */\n                            return window.location.href;\n                        },\n                    },\n                });\n                conditionAnchor.trigger(\"click\");\n            });\n    }\n}\n"],"names":["Contentrules","constructor","el","this","SKIP_OVERLAY_ACTIONS","init","self","$","unbind","click","name","attr","show","form","parents","first","fieldset","data","serialize","url","html","newfieldset","find","replaceWith","initforms","hide","e","parent","i","length","indexOf","preventDefault","conditionAnchor","css","insertAfter","Modal","actionOptions","isForm","redirectOnResponse","redirectToUrl","window","location","href","trigger"],"sourceRoot":""}