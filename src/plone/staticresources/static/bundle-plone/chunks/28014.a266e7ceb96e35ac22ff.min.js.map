{"version":3,"file":"chunks/28014.a266e7ceb96e35ac22ff.min.js","mappings":"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","sources":["webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/core/ui/views/base.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/core/ui/views/container.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/core/ui/views/toolbar.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/core/ui/views/buttongroup.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/core/ui/views/button.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/pat/structure/js/actionmenu.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/pat/structure/js/models/result.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/pat/structure/js/actions.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/pat/structure/js/views/actionmenu.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/pat/structure/js/views/tablerow.js","webpack://plone.staticresources/./node_modules/bootstrap/js/src/dom/data.js","webpack://plone.staticresources/./node_modules/bootstrap/js/src/util/index.js","webpack://plone.staticresources/./node_modules/bootstrap/js/src/dom/event-handler.js","webpack://plone.staticresources/./node_modules/bootstrap/js/src/dom/manipulator.js","webpack://plone.staticresources/./node_modules/bootstrap/js/src/util/config.js","webpack://plone.staticresources/./node_modules/bootstrap/js/src/base-component.js","webpack://plone.staticresources/./node_modules/bootstrap/js/src/dom/selector-engine.js","webpack://plone.staticresources/./node_modules/bootstrap/js/src/util/component-functions.js","webpack://plone.staticresources/./node_modules/bootstrap/js/src/alert.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/pat/structure/js/views/table.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/core/ui/views/popover.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/pat/structure/js/views/selectionwell.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/pat/structure/js/views/generic-popover.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/pat/structure/js/views/rearrange.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/pat/structure/js/views/selectionbutton.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/pat/structure/js/views/paging.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/pat/structure/js/views/columns.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/pat/structure/js/views/textfilter.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/pat/structure/js/views/upload.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/pat/structure/js/collections/selected.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/pat/structure/js/collections/result.js","webpack://plone.staticresources/./node_modules/@der-freitag/mockup/src/pat/structure/js/views/app.js"],"sourcesContent":["import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../i18n-wrapper\";\nimport Backbone from \"backbone\";\n\nexport default Backbone.View.extend({\n    isUIView: true,\n    eventPrefix: \"ui\",\n    template: null,\n    idPrefix: \"base-\",\n    appendInContainer: true,\n    initialize: function (options) {\n        this.options = options;\n        for (var key in this.options) {\n            this[key] = this.options[key];\n        }\n        this.options._t = _t;\n    },\n    render: function () {\n        this.applyTemplate();\n\n        this.trigger(\"render\", this);\n        this.afterRender();\n\n        if (this.options.id) {\n            // apply id to element\n            this.$el.attr(\"id\", this.idPrefix + this.options.id);\n        }\n        return this;\n    },\n    afterRender: function () {},\n    serializedModel: function () {\n        return this.options;\n    },\n    applyTemplate: function () {\n        if (this.template !== null) {\n            var data = $.extend({ _t: _t }, this.options, this.serializedModel());\n            var template = this.template;\n            if (typeof template === \"string\") {\n                template = _.template(template);\n            }\n            this.$el.html(template(data));\n        }\n    },\n    propagateEvent: function (eventName) {\n        if (eventName.indexOf(\":\") > 0) {\n            var eventId = eventName.split(\":\")[0];\n            if (this.eventPrefix !== \"\") {\n                if (\n                    eventId === this.eventPrefix ||\n                    eventId === this.eventPrefix + \".\" + this.id\n                ) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    },\n    uiEventTrigger: function (name) {\n        var args = [].slice.call(arguments, 0);\n\n        if (this.eventPrefix !== \"\") {\n            args[0] = this.eventPrefix + \":\" + name;\n            Backbone.View.prototype.trigger.apply(this, args);\n            if (this.id) {\n                args[0] = this.eventPrefix + \".\" + this.id + \":\" + name;\n                Backbone.View.prototype.trigger.apply(this, args);\n            }\n        }\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport BaseView from \"./base\";\n\nexport default BaseView.extend({\n    id: \"\",\n    items: [],\n    itemContainer: null,\n    isOffsetParent: true,\n    idPrefix: \"container-\",\n    render: function () {\n        if (this.options.id) {\n            this.$el.attr(\"id\", this.idPrefix + this.options.id);\n        }\n\n        this.applyTemplate();\n\n        this.renderItems();\n        this.bindEvents();\n\n        if (this.isOffsetParent) {\n            this.$el.addClass(\"ui-offset-parent\");\n        }\n\n        this.trigger(\"render\", this);\n\n        this.afterRender();\n\n        this.$el.data(\"component\", this);\n        return this;\n    },\n    renderItems: function () {\n        var $container;\n\n        if (this.itemContainer !== null) {\n            $container = $(this.itemContainer, this.$el);\n            if ($container.length === 0) {\n                throw \"Item Container element not found.\";\n            }\n        } else {\n            $container = this.$el;\n        }\n        _.each(\n            this.items,\n            function (view) {\n                if (view.appendInContainer === true) {\n                    $container.append(view.render().$el);\n                } else {\n                    view.render();\n                }\n            },\n            this\n        );\n    },\n    bindEvents: function () {\n        var self = this;\n        _.each(this.items, function (view) {\n            view.on(\"all\", function () {\n                var slice = [].slice;\n                var eventName = arguments[0];\n                var eventTarget;\n                var newName = self.id !== \"\" ? self.id + \".\" + eventName : eventName;\n                if (arguments.length > 1) {\n                    eventTarget = arguments[1];\n                }\n                if (newName !== eventName) {\n                    var newArgs = slice.call(arguments, 0);\n                    newArgs[0] = newName;\n                    self.trigger.apply(self, newArgs);\n                }\n                if (eventTarget !== undefined && eventTarget.isUIView === true) {\n                    if (eventTarget.propagateEvent(eventName) === true) {\n                        self.trigger.apply(self, arguments);\n                    }\n                }\n            });\n        });\n    },\n    get: function (id) {\n        // Remove the recursive part because it was confusing if two children had the\n        // same id\n        return _.findWhere(this.items, { id: id });\n    },\n    add: function (item) {\n        if (item.id !== undefined && this.get(item.id)) {\n            throw \"Another item with the same `id` already exists.\";\n        }\n        this.items.push(item);\n    },\n});\n","import ContainerView from \"./container\";\n\nexport default ContainerView.extend({\n    tagName: \"div\",\n    className: \"navbar\",\n    idPrefix: \"toolbar-\",\n});\n","import _ from \"underscore\";\nimport ContainerView from \"./container\";\n\nexport default ContainerView.extend({\n    tagName: \"div\",\n    className: \"btn-group\",\n    idPrefix: \"btngroup-\",\n    disable: function () {\n        _.each(this.items, function (button) {\n            button.disable();\n        });\n    },\n    enable: function () {\n        _.each(this.items, function (button) {\n            button.enable();\n        });\n    },\n});\n","import _ from \"underscore\";\nimport BaseView from \"./base\";\nimport Tooltip from \"@patternslib/patternslib/src/pat/tooltip/tooltip\";\nimport dom from \"@patternslib/patternslib/src/core/dom\";\nimport utils from \"../../utils\";\n\nexport default BaseView.extend({\n    tagName: \"a\",\n    className: \"btn\",\n    eventPrefix: \"button\",\n    context: \"outline-secondary\",\n    idPrefix: \"btn-\",\n    attributes: {\n        href: \"#\",\n    },\n    extraClasses: [],\n    tooltip: null,\n    template: \"<%= title %>\",\n    events: {\n        click: \"handleClick\",\n    },\n    initialize: function (options) {\n        if (!options.id) {\n            const title = options.title || \"\";\n            options.id = title !== \"\" ? title.toLowerCase().replace(\" \", \"-\") : this.cid; // prettier-ignore\n        }\n        BaseView.prototype.initialize.apply(this, [options]);\n\n        this.on(\n            \"render\",\n            async function () {\n                this.$el.attr(\"title\", this.options.title || \"\");\n                this.$el.attr(\n                    \"aria-label\",\n                    this.options.title || this.options.tooltip || \"\"\n                );\n                if (this.context !== null) {\n                    this.$el.addClass(\"btn-\" + this.context);\n                }\n                _.each(\n                    this.extraClasses,\n                    function (klass) {\n                        this.$el.addClass(klass);\n                    }.bind(this)\n                );\n\n                if (this.icon && typeof this.icon == \"string\") {\n                    const icon_markup = await utils.resolveIcon(this.icon);\n                    const icon_el = dom.create_from_string(icon_markup);\n                    if (icon_el) {\n                        this.$el.prepend(icon_el);\n                    }\n                }\n\n                if (this.tooltip !== null) {\n                    this.$el.attr(\"title\", this.tooltip);\n                    new Tooltip(this.$el);\n                    // XXX since tooltip triggers hidden\n                    // suppress so it plays nice with modals, backdrops, etc\n                    this.$el.on(\"hidden\", function (e) {\n                        if (e.type === \"hidden\") {\n                            e.stopPropagation();\n                        }\n                    });\n                }\n            },\n            this\n        );\n    },\n    handleClick: function (e) {\n        e.preventDefault();\n        if (!this.$el.is(\".disabled\")) {\n            this.uiEventTrigger(\"click\", this, e);\n        }\n    },\n    serializedModel: function () {\n        return _.extend({ icon: \"\", title: \"\" }, this.options);\n    },\n    disable: function () {\n        this.$el.addClass(\"disabled\");\n    },\n    enable: function () {\n        this.$el.removeClass(\"disabled\");\n    },\n});\n","import _t from \"../../../core/i18n-wrapper\";\n\nconst menuOptions = {\n    \"openItem\": {\n        url: \"#\",\n        title: _t(\"Open\"),\n        category: \"button\",\n        icon: \"plone-view\",\n        css: \"\",\n        modal: false,\n    },\n    \"editItem\": {\n        url: \"#\",\n        title: _t(\"Edit\"),\n        category: \"button\",\n        icon: \"plone-edit\",\n        css: \"\",\n        modal: false,\n    },\n    \"cutItem\": {\n        method: \"cutClicked\",\n        url: \"#\",\n        title: _t(\"Cut\"),\n        category: \"dropdown\",\n        icon: \"plone-cut\",\n        css: \"\",\n        modal: false,\n    },\n    \"copyItem\": {\n        method: \"copyClicked\",\n        url: \"#\",\n        title: _t(\"Copy\"),\n        category: \"dropdown\",\n        icon: \"plone-copy\",\n        css: \"\",\n        modal: false,\n    },\n    \"pasteItem\": {\n        method: \"pasteClicked\",\n        url: \"#\",\n        title: _t(\"Paste\"),\n        category: \"dropdown\",\n        icon: \"plone-paste\",\n        css: \"\",\n        modal: false,\n    },\n    \"move-top\": {\n        method: \"moveTopClicked\",\n        url: \"#\",\n        title: _t(\"Move to top of folder\"),\n        category: \"dropdown\",\n        icon: \"arrow-bar-up\",\n        css: \"\",\n        modal: false,\n    },\n    \"move-bottom\": {\n        method: \"moveBottomClicked\",\n        url: \"#\",\n        title: _t(\"Move to bottom of folder\"),\n        category: \"dropdown\",\n        icon: \"arrow-bar-down\",\n        css: \"\",\n        modal: false,\n    },\n    \"set-default-page\": {\n        method: \"setDefaultPageClicked\",\n        url: \"#\",\n        title: _t(\"Set as default page\"),\n        category: \"dropdown\",\n        icon: \"check-circle\",\n        css: \"\",\n        modal: false,\n    },\n    \"selectAll\": {\n        method: \"selectAll\",\n        url: \"#\",\n        title: _t(\"Select all contained items\"),\n        category: \"dropdown\",\n        icon: \"check-all\",\n        css: \"\",\n        modal: false,\n    },\n};\n\nconst ActionMenu = function (menu) {\n    // If an explicit menu was specified as an option to AppView, this\n    // constructor will not override that.\n    if (menu.app.menuOptions !== null) {\n        return menu.app.menuOptions;\n    }\n\n    const model = menu.model.attributes;\n    const app = menu.app;\n    const canMove = !!app.options.moveUrl;\n\n    const result = JSON.parse(JSON.stringify(menuOptions));\n    if (!(app.pasteAllowed() && model.is_folderish)) {\n        delete result.pasteItem;\n    }\n    if (app.inQueryMode() || canMove === false) {\n        delete result[\"move-top\"];\n        delete result[\"move-bottom\"];\n    }\n    if (\n        app.defaultPageTypes.indexOf(model.portal_type) === -1 ||\n        !app.setDefaultPageUrl\n    ) {\n        delete result[\"set-default-page\"];\n    }\n\n    if (!model.is_folderish) {\n        delete result.selectAll;\n    }\n\n    const typeToViewAction = app.options.typeToViewAction;\n    const viewAction = (typeToViewAction && typeToViewAction[model.portal_type]) || \"\";\n    result.openItem.url = model.getURL + viewAction;\n    result.editItem.url = model.getURL + \"/edit\";\n\n    return result;\n};\n\nexport default ActionMenu;\n","import Backbone from \"backbone\";\n\nexport default Backbone.Model.extend({\n    defaults: function () {\n        return {\n            is_folderish: false,\n            review_state: \"\",\n            getURL: \"\",\n        };\n    },\n\n    uid: function () {\n        return this.attributes.UID;\n    },\n});\n","import _t from \"../../../core/i18n-wrapper\";\nimport utils from \"../../../core/utils\";\nimport Backbone from \"backbone\";\nimport Result from \"./models/result\";\n\n// use a more primative class than Backbone.Model?\nexport default Backbone.Model.extend({\n    initialize: function (options) {\n        this.options = options;\n        this.app = options.app;\n        this.model = options.model;\n        this.selectedCollection = this.app.selectedCollection;\n    },\n\n    selectAll: async function (e) {\n        // This implementation is very specific to the default collection\n        // with the reliance on its queryParser and queryHelper.  Custom\n        // collection (PageableCollection implementation)\n        // will have to come up with their own action for this.\n        e.preventDefault();\n        let page = 1;\n        let count = 0;\n        const getPage = async () => {\n            this.app.loading.show();\n\n            const url = new URL(this.app.collection.url);\n            url.searchParams.append(\n                \"query\",\n                this.app.collection.queryParser({\n                    searchPath: this.model.attributes.path,\n                })\n            );\n            url.searchParams.append(\n                \"batch\",\n                JSON.stringify({\n                    page: page,\n                    size: 100,\n                })\n            );\n            url.searchParams.append(\n                \"attributes\",\n                JSON.stringify(this.app.collection.queryHelper.options.attributes)\n            );\n            const resp = await fetch(url, {\n                headers: {\n                    Accept: \"application/json\",\n                },\n            });\n            const data = await resp.json();\n\n            const items = this.app.collection.parse(data, count);\n            count += items.length;\n            for (const item of items) {\n                this.app.selectedCollection.add(new Result(item));\n            }\n            page += 1;\n            if (data.total > count) {\n                await getPage();\n            } else {\n                this.app.loading.hide();\n                await this.app.tableView.render();\n            }\n        };\n        await getPage();\n    },\n\n    doAction: async function (buttonName, successMsg, failMsg) {\n        const url = new URL(this.app.buttons.get(buttonName).options.url);\n        const resp = await fetch(url, {\n            headers: {\n                \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n            },\n            method: \"POST\",\n            body: new URLSearchParams({\n                selection: JSON.stringify([this.model.attributes.UID]),\n                folder: this.model.attributes.path,\n                _authenticator: utils.getAuthenticator(),\n            }),\n        });\n        const data = await resp.json();\n\n        let msg,\n            state_type = \"warning\";\n        if (data.status === \"success\") {\n            msg = _t(`${successMsg} \"${this.model.attributes.Title}\"`);\n            this.app.collection.fetch();\n            this.app.updateButtons();\n        } else {\n            msg = _t(\"Error\") + `: ${failMsg} \"${this.model.attributes.Title}\"`;\n            state_type = \"danger\";\n        }\n        this.app.clearStatus();\n        this.app.setStatus({\n            text: msg,\n            type: data.status || state_type,\n        });\n    },\n\n    cutClicked: function (e) {\n        e.preventDefault();\n        this.doAction(\"cut\", _t(\"Cut\"), _t(\"cutting\"));\n    },\n\n    copyClicked: function (e) {\n        e.preventDefault();\n        this.doAction(\"copy\", _t(\"Copied\"), _t(\"copying\"));\n    },\n\n    pasteClicked: function (e) {\n        e.preventDefault();\n        this.doAction(\"paste\", _t(\"Pasted into\"), _t(\"Error pasting into\"));\n    },\n\n    moveTopClicked: function (e) {\n        e.preventDefault();\n        this.app.moveItem(this.model.attributes.id, \"top\");\n    },\n\n    moveBottomClicked: function (e) {\n        e.preventDefault();\n        this.app.moveItem(this.model.attributes.id, \"bottom\");\n    },\n\n    setDefaultPageClicked: async function (e) {\n        e.preventDefault();\n        try {\n            const url = new URL(this.app.getAjaxUrl(this.app.setDefaultPageUrl));\n            const resp = await fetch(url, {\n                headers: {\n                    \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n                },\n                method: \"POST\",\n                body: new URLSearchParams({\n                    id: this.model.attributes.id,\n                    _authenticator: utils.getAuthenticator(),\n                }),\n            });\n            const data = await resp.json();\n            this.app.ajaxSuccessResponse.apply(this.app, [data]);\n        } catch (e) {\n            this.app.ajaxSuccessResponse.apply(this.app, [e]);\n        }\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport utils from \"../../../../core/utils\";\nimport registry from \"@patternslib/patternslib/src/core/registry\";\nimport BaseView from \"../../../../core/ui/views/base\";\nimport ActionMenuTemplate from \"../../templates/actionmenu.xml\";\nimport \"../../../modal/modal\";\nimport \"@patternslib/patternslib/src/pat/tooltip/tooltip\";\nimport actionmenu_generator from \"../actionmenu\";\nimport Actions from \"../actions\";\n\nexport default BaseView.extend({\n    className: \"btn-group actionmenu\",\n    template: _.template(ActionMenuTemplate),\n\n    // Static menu options\n    menuOptions: null,\n    // Dynamic menu options\n\n    generate_events: function () {\n        /* Backbone.view.events:\n         * refactored since Backbone 1.4.1 calls \"events\" before \"initialize\"\n         */\n        const result = {};\n\n        _.each(this.menuOptions, (menuOption, key) => {\n            // Create event handler and add it to the results object.\n            const method = menuOption.method;\n            if (!method || !this.actions[method]) {\n                return false;\n            }\n            result[`click a.${key}`] = this.actions[method].bind(this.actions);\n        });\n\n        return result;\n    },\n\n    initialize: function (options) {\n        this.actions = new Actions(options);\n        BaseView.prototype.initialize.apply(this, [options]);\n        this.options = options;\n        this.selectedCollection = this.app.selectedCollection;\n\n        this.menuOptions = actionmenu_generator(this);\n        // define events here and delegate them manually\n        this.events = this.generate_events();\n        // Backbone API\n        this.delegateEvents();\n    },\n\n    menuOptionsCategorized: async function () {\n        const result = {};\n\n        _.each(this.menuOptions, async (menuOption, key) => {\n            // set a unique identifier to uniquely bind the events.\n            menuOption.idx = utils.generateId();\n            menuOption.name = key; // we want to add the action's key as class name to the output.\n\n            const category = menuOption.category || \"dropdown\";\n            if (result[category] === undefined) {\n                result[category] = [];\n            }\n            result[category].push(menuOption);\n            menuOption.classes = [menuOption.name, menuOption.idx];\n            if (menuOption.css) {\n                menuOption.classes.push(menuOption.css);\n            }\n            if (menuOption.modal === true) {\n                // add standard pat-plone-modal.\n                // If you want another modal implementation, don't use modal=true but set the css option on action items.\n                menuOption.css += \" pat-plone-modal\";\n            }\n            if (menuOption.icon) {\n                menuOption.iconSVG = await utils.resolveIcon(menuOption.icon);\n            }\n        });\n\n        return result;\n    },\n\n    render: async function () {\n        this.el.innerHTML = \"\";\n\n        const data = this.model.toJSON();\n        data.header = this.options.header || null;\n        data.menuOptions = await this.menuOptionsCategorized();\n\n        this.el.innerHTML = this.template(\n            $.extend(\n                {\n                    dropdownIcon: await utils.resolveIcon(\"plone-settings\"),\n                    _t: _t,\n                    id: utils.generateId(),\n                },\n                data\n            )\n        );\n\n        if (this.options.className) {\n            this.$el.addClass(this.options.className);\n        }\n\n        registry.scan(this.$el);\n        return this.el;\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport { translate_plone as _tp } from \"../../../../core/i18n-wrapper\"; // eslint-disable-line\nimport utils from \"../../../../core/utils\";\nimport Backbone from \"backbone\";\n\nimport ActionMenuView from \"./actionmenu\";\nimport TableRowTemplate from \"../../templates/tablerow.xml\";\n\nexport default Backbone.View.extend({\n    tagName: \"tr\",\n    className: \"itemRow\",\n    template: _.template(TableRowTemplate),\n\n    events: {\n        \"change input\": \"itemSelected\",\n        \"click td.title a.manage\": \"itemClicked\",\n    },\n\n    initialize: function (options) {\n        this.options = options;\n        this.app = options.app;\n        this.selectedCollection = this.app.selectedCollection;\n        this.table = this.options.table;\n        this.now = new Date();\n        this.listenTo(this.table, \"context-info:set\", this.render);\n    },\n\n    expired: function (data) {\n        if (!data.attributes.ExpirationDate) {\n            return false;\n        }\n        const dt = new Date(data.attributes.ExpirationDate);\n        return this.now > dt;\n    },\n\n    ineffective: function (data) {\n        if (!data.attributes.EffectiveDate) {\n            return false;\n        }\n        const dt = new Date(data.attributes.EffectiveDate);\n        return this.now < dt;\n    },\n\n    render: async function () {\n        const data = this.model.toJSON();\n\n        data.selected = !!this.selectedCollection.findWhere({ UID: data.UID });\n        data.attributes = this.model.attributes;\n        data.activeColumns = this.app.activeColumns;\n        data.availableColumns = this.app.availableColumns;\n        data.portal_type = data.portal_type ? data.portal_type : \"\";\n        data.contenttype = data.portal_type.toLowerCase().replace(/\\.| /g, \"-\");\n        data._authenticator = utils.getAuthenticator();\n        data.thumb_scale = this.app.thumb_scale;\n        data.mimeIcon = await utils.resolveIcon(`contenttype/${data.contenttype}`);\n\n        const viewAction =\n            (this.app.typeToViewAction &&\n                this.app.typeToViewAction[data.attributes.portal_type]) ||\n            \"\";\n        data.viewURL = data.attributes.getURL + viewAction;\n\n        data._t = _t;\n        data.convertColumnValue = this.convertColumnValue.bind(this);\n        data.expired = this.expired(data);\n        data.ineffective = this.ineffective(data);\n        data.exclude_from_nav = data.exclude_from_nav || false;\n\n        this.$el.html(this.template(data));\n\n        const attrs = this.model.attributes;\n        this.$el.addClass([`state-${attrs.review_state}`, `type-${attrs.portal_type}`]);\n        this.$el.attr(\"data-path\", data.path);\n        this.$el.attr(\"data-UID\", data.UID);\n        this.$el.attr(\"data-id\", data.id);\n        this.$el.attr(\"data-type\", data.portal_type);\n        this.$el.attr(\"data-folderish\", data.is_folderish);\n        this.$el.toggleClass(\"folder\", data.is_folderish);\n        this.$el.toggleClass(\n            \"default-page\",\n            data.id === this.table.contextInfo?.defaultPage\n        );\n        this.$el.toggleClass(\"expired\", data.expired);\n        this.$el.toggleClass(\"ineffective\", data.ineffective);\n\n        this.el.model = this.model;\n\n        const menuview = new ActionMenuView({\n            app: this.app,\n            model: this.model,\n        });\n        $(\".actionmenu-container\", this.$el).append(await menuview.render());\n\n        return this;\n    },\n\n    /**\n     * Converts Column value in Human-Readable format\n     * @param {string} column\n     * @param {*} value\n     * @returns {string|*}\n     */\n    convertColumnValue: function (column, value) {\n        if (this.table.dateColumns.includes(column)) {\n            const date = new Date(value);\n            if (date instanceof Date && date.toString() === \"Invalid Date\") {\n                return value;\n            }\n            return date.toLocaleString(this.app.language, this.app.dateFormat);\n        }\n        if (this.table.translatableColumns.includes(column)) {\n            return _tp(value);\n        }\n        return value;\n    },\n\n    itemClicked: function (e) {\n        /* check if this should just be opened in new window */\n        const keyEvent = this.app.keyEvent;\n        // Resolve the correct handler based on these keys.\n        if ((keyEvent && keyEvent.ctrlKey) || !this.model.attributes.is_folderish) {\n            // middle/ctrl-click or not a folder content\n            // not yet implemented.\n            return null;\n        }\n\n        e.preventDefault();\n        // handler for folder, go down path and show in contents window.\n        this.app.setCurrentPath(this.model.attributes.path);\n        // also switch to fix page in batch\n        this.app.collection.getFirstPage();\n    },\n\n    itemSelected: function () {\n        const checkbox = this.$(\"input\")[0];\n        const selectedCollection = this.app.selectedCollection;\n        if (checkbox.checked) {\n            selectedCollection.add(this.model.clone());\n        } else {\n            selectedCollection.removeResult(this.model);\n        }\n\n        /* check for shift click now */\n        const keyEvent = this.app.keyEvent;\n        if (\n            keyEvent &&\n            keyEvent.shiftKey &&\n            this.app[\"last_selected\"] &&\n            this.app[\"last_selected\"].parentNode !== null\n        ) {\n            let $el = $(this.app[\"last_selected\"]);\n            const lastCheckedIndex = $el.index();\n            const thisIndex = this.$el.index();\n            for (const item of this.app.tableView.$('input[type=\"checkbox\"]')) {\n                $el = $(item);\n                const index = $el.parents(\"tr\").index();\n                if (\n                    (index > lastCheckedIndex && index < thisIndex) ||\n                    (index < lastCheckedIndex && index > thisIndex)\n                ) {\n                    this.checked = checkbox.checked;\n                    const $tr = $(this).closest(\"tr.itemRow\");\n                    if ($tr.length > 0) {\n                        const model = $tr[0].model;\n                        const existing = selectedCollection.getByUID(\n                            model.attributes.UID\n                        );\n                        if (this.checked) {\n                            if (!existing) {\n                                selectedCollection.add(model.clone());\n                            }\n                        } else if (existing) {\n                            selectedCollection.removeResult(existing);\n                        }\n                    }\n                }\n            }\n        }\n        this.app[\"last_selected\"] = this.el;\n    },\n});\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap dom/data.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n/**\n * Constants\n */\n\nconst elementMap = new Map()\n\nexport default {\n  set(element, key, instance) {\n    if (!elementMap.has(element)) {\n      elementMap.set(element, new Map())\n    }\n\n    const instanceMap = elementMap.get(element)\n\n    // make it clear we only want one instance per element\n    // can be removed later when multiple key/instances are fine to be used\n    if (!instanceMap.has(key) && instanceMap.size !== 0) {\n      // eslint-disable-next-line no-console\n      console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(instanceMap.keys())[0]}.`)\n      return\n    }\n\n    instanceMap.set(key, instance)\n  },\n\n  get(element, key) {\n    if (elementMap.has(element)) {\n      return elementMap.get(element).get(key) || null\n    }\n\n    return null\n  },\n\n  remove(element, key) {\n    if (!elementMap.has(element)) {\n      return\n    }\n\n    const instanceMap = elementMap.get(element)\n\n    instanceMap.delete(key)\n\n    // free up element references if there are no instances left for an element\n    if (instanceMap.size === 0) {\n      elementMap.delete(element)\n    }\n  }\n}\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap util/index.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nconst MAX_UID = 1_000_000\nconst MILLISECONDS_MULTIPLIER = 1000\nconst TRANSITION_END = 'transitionend'\n\n/**\n * Properly escape IDs selectors to handle weird IDs\n * @param {string} selector\n * @returns {string}\n */\nconst parseSelector = selector => {\n  if (selector && window.CSS && window.CSS.escape) {\n    // document.querySelector needs escaping to handle IDs (html5+) containing for instance /\n    selector = selector.replace(/#([^\\s\"#']+)/g, (match, id) => `#${CSS.escape(id)}`)\n  }\n\n  return selector\n}\n\n// Shout-out Angus Croll (https://goo.gl/pxwQGp)\nconst toType = object => {\n  if (object === null || object === undefined) {\n    return `${object}`\n  }\n\n  return Object.prototype.toString.call(object).match(/\\s([a-z]+)/i)[1].toLowerCase()\n}\n\n/**\n * Public Util API\n */\n\nconst getUID = prefix => {\n  do {\n    prefix += Math.floor(Math.random() * MAX_UID)\n  } while (document.getElementById(prefix))\n\n  return prefix\n}\n\nconst getTransitionDurationFromElement = element => {\n  if (!element) {\n    return 0\n  }\n\n  // Get transition-duration of the element\n  let { transitionDuration, transitionDelay } = window.getComputedStyle(element)\n\n  const floatTransitionDuration = Number.parseFloat(transitionDuration)\n  const floatTransitionDelay = Number.parseFloat(transitionDelay)\n\n  // Return 0 if element or transition duration is not found\n  if (!floatTransitionDuration && !floatTransitionDelay) {\n    return 0\n  }\n\n  // If multiple durations are defined, take the first\n  transitionDuration = transitionDuration.split(',')[0]\n  transitionDelay = transitionDelay.split(',')[0]\n\n  return (Number.parseFloat(transitionDuration) + Number.parseFloat(transitionDelay)) * MILLISECONDS_MULTIPLIER\n}\n\nconst triggerTransitionEnd = element => {\n  element.dispatchEvent(new Event(TRANSITION_END))\n}\n\nconst isElement = object => {\n  if (!object || typeof object !== 'object') {\n    return false\n  }\n\n  if (typeof object.jquery !== 'undefined') {\n    object = object[0]\n  }\n\n  return typeof object.nodeType !== 'undefined'\n}\n\nconst getElement = object => {\n  // it's a jQuery object or a node element\n  if (isElement(object)) {\n    return object.jquery ? object[0] : object\n  }\n\n  if (typeof object === 'string' && object.length > 0) {\n    return document.querySelector(parseSelector(object))\n  }\n\n  return null\n}\n\nconst isVisible = element => {\n  if (!isElement(element) || element.getClientRects().length === 0) {\n    return false\n  }\n\n  const elementIsVisible = getComputedStyle(element).getPropertyValue('visibility') === 'visible'\n  // Handle `details` element as its content may falsie appear visible when it is closed\n  const closedDetails = element.closest('details:not([open])')\n\n  if (!closedDetails) {\n    return elementIsVisible\n  }\n\n  if (closedDetails !== element) {\n    const summary = element.closest('summary')\n    if (summary && summary.parentNode !== closedDetails) {\n      return false\n    }\n\n    if (summary === null) {\n      return false\n    }\n  }\n\n  return elementIsVisible\n}\n\nconst isDisabled = element => {\n  if (!element || element.nodeType !== Node.ELEMENT_NODE) {\n    return true\n  }\n\n  if (element.classList.contains('disabled')) {\n    return true\n  }\n\n  if (typeof element.disabled !== 'undefined') {\n    return element.disabled\n  }\n\n  return element.hasAttribute('disabled') && element.getAttribute('disabled') !== 'false'\n}\n\nconst findShadowRoot = element => {\n  if (!document.documentElement.attachShadow) {\n    return null\n  }\n\n  // Can find the shadow root otherwise it'll return the document\n  if (typeof element.getRootNode === 'function') {\n    const root = element.getRootNode()\n    return root instanceof ShadowRoot ? root : null\n  }\n\n  if (element instanceof ShadowRoot) {\n    return element\n  }\n\n  // when we don't find a shadow root\n  if (!element.parentNode) {\n    return null\n  }\n\n  return findShadowRoot(element.parentNode)\n}\n\nconst noop = () => {}\n\n/**\n * Trick to restart an element's animation\n *\n * @param {HTMLElement} element\n * @return void\n *\n * @see https://www.charistheo.io/blog/2021/02/restart-a-css-animation-with-javascript/#restarting-a-css-animation\n */\nconst reflow = element => {\n  element.offsetHeight // eslint-disable-line no-unused-expressions\n}\n\nconst getjQuery = () => {\n  if (window.jQuery && !document.body.hasAttribute('data-bs-no-jquery')) {\n    return window.jQuery\n  }\n\n  return null\n}\n\nconst DOMContentLoadedCallbacks = []\n\nconst onDOMContentLoaded = callback => {\n  if (document.readyState === 'loading') {\n    // add listener on the first call when the document is in loading state\n    if (!DOMContentLoadedCallbacks.length) {\n      document.addEventListener('DOMContentLoaded', () => {\n        for (const callback of DOMContentLoadedCallbacks) {\n          callback()\n        }\n      })\n    }\n\n    DOMContentLoadedCallbacks.push(callback)\n  } else {\n    callback()\n  }\n}\n\nconst isRTL = () => document.documentElement.dir === 'rtl'\n\nconst defineJQueryPlugin = plugin => {\n  onDOMContentLoaded(() => {\n    const $ = getjQuery()\n    /* istanbul ignore if */\n    if ($) {\n      const name = plugin.NAME\n      const JQUERY_NO_CONFLICT = $.fn[name]\n      $.fn[name] = plugin.jQueryInterface\n      $.fn[name].Constructor = plugin\n      $.fn[name].noConflict = () => {\n        $.fn[name] = JQUERY_NO_CONFLICT\n        return plugin.jQueryInterface\n      }\n    }\n  })\n}\n\nconst execute = (possibleCallback, args = [], defaultValue = possibleCallback) => {\n  return typeof possibleCallback === 'function' ? possibleCallback(...args) : defaultValue\n}\n\nconst executeAfterTransition = (callback, transitionElement, waitForTransition = true) => {\n  if (!waitForTransition) {\n    execute(callback)\n    return\n  }\n\n  const durationPadding = 5\n  const emulatedDuration = getTransitionDurationFromElement(transitionElement) + durationPadding\n\n  let called = false\n\n  const handler = ({ target }) => {\n    if (target !== transitionElement) {\n      return\n    }\n\n    called = true\n    transitionElement.removeEventListener(TRANSITION_END, handler)\n    execute(callback)\n  }\n\n  transitionElement.addEventListener(TRANSITION_END, handler)\n  setTimeout(() => {\n    if (!called) {\n      triggerTransitionEnd(transitionElement)\n    }\n  }, emulatedDuration)\n}\n\n/**\n * Return the previous/next element of a list.\n *\n * @param {array} list    The list of elements\n * @param activeElement   The active element\n * @param shouldGetNext   Choose to get next or previous element\n * @param isCycleAllowed\n * @return {Element|elem} The proper element\n */\nconst getNextActiveElement = (list, activeElement, shouldGetNext, isCycleAllowed) => {\n  const listLength = list.length\n  let index = list.indexOf(activeElement)\n\n  // if the element does not exist in the list return an element\n  // depending on the direction and if cycle is allowed\n  if (index === -1) {\n    return !shouldGetNext && isCycleAllowed ? list[listLength - 1] : list[0]\n  }\n\n  index += shouldGetNext ? 1 : -1\n\n  if (isCycleAllowed) {\n    index = (index + listLength) % listLength\n  }\n\n  return list[Math.max(0, Math.min(index, listLength - 1))]\n}\n\nexport {\n  defineJQueryPlugin,\n  execute,\n  executeAfterTransition,\n  findShadowRoot,\n  getElement,\n  getjQuery,\n  getNextActiveElement,\n  getTransitionDurationFromElement,\n  getUID,\n  isDisabled,\n  isElement,\n  isRTL,\n  isVisible,\n  noop,\n  onDOMContentLoaded,\n  parseSelector,\n  reflow,\n  triggerTransitionEnd,\n  toType\n}\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap dom/event-handler.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { getjQuery } from '../util/index.js'\n\n/**\n * Constants\n */\n\nconst namespaceRegex = /[^.]*(?=\\..*)\\.|.*/\nconst stripNameRegex = /\\..*/\nconst stripUidRegex = /::\\d+$/\nconst eventRegistry = {} // Events storage\nlet uidEvent = 1\nconst customEvents = {\n  mouseenter: 'mouseover',\n  mouseleave: 'mouseout'\n}\n\nconst nativeEvents = new Set([\n  'click',\n  'dblclick',\n  'mouseup',\n  'mousedown',\n  'contextmenu',\n  'mousewheel',\n  'DOMMouseScroll',\n  'mouseover',\n  'mouseout',\n  'mousemove',\n  'selectstart',\n  'selectend',\n  'keydown',\n  'keypress',\n  'keyup',\n  'orientationchange',\n  'touchstart',\n  'touchmove',\n  'touchend',\n  'touchcancel',\n  'pointerdown',\n  'pointermove',\n  'pointerup',\n  'pointerleave',\n  'pointercancel',\n  'gesturestart',\n  'gesturechange',\n  'gestureend',\n  'focus',\n  'blur',\n  'change',\n  'reset',\n  'select',\n  'submit',\n  'focusin',\n  'focusout',\n  'load',\n  'unload',\n  'beforeunload',\n  'resize',\n  'move',\n  'DOMContentLoaded',\n  'readystatechange',\n  'error',\n  'abort',\n  'scroll'\n])\n\n/**\n * Private methods\n */\n\nfunction makeEventUid(element, uid) {\n  return (uid && `${uid}::${uidEvent++}`) || element.uidEvent || uidEvent++\n}\n\nfunction getElementEvents(element) {\n  const uid = makeEventUid(element)\n\n  element.uidEvent = uid\n  eventRegistry[uid] = eventRegistry[uid] || {}\n\n  return eventRegistry[uid]\n}\n\nfunction bootstrapHandler(element, fn) {\n  return function handler(event) {\n    hydrateObj(event, { delegateTarget: element })\n\n    if (handler.oneOff) {\n      EventHandler.off(element, event.type, fn)\n    }\n\n    return fn.apply(element, [event])\n  }\n}\n\nfunction bootstrapDelegationHandler(element, selector, fn) {\n  return function handler(event) {\n    const domElements = element.querySelectorAll(selector)\n\n    for (let { target } = event; target && target !== this; target = target.parentNode) {\n      for (const domElement of domElements) {\n        if (domElement !== target) {\n          continue\n        }\n\n        hydrateObj(event, { delegateTarget: target })\n\n        if (handler.oneOff) {\n          EventHandler.off(element, event.type, selector, fn)\n        }\n\n        return fn.apply(target, [event])\n      }\n    }\n  }\n}\n\nfunction findHandler(events, callable, delegationSelector = null) {\n  return Object.values(events)\n    .find(event => event.callable === callable && event.delegationSelector === delegationSelector)\n}\n\nfunction normalizeParameters(originalTypeEvent, handler, delegationFunction) {\n  const isDelegated = typeof handler === 'string'\n  // TODO: tooltip passes `false` instead of selector, so we need to check\n  const callable = isDelegated ? delegationFunction : (handler || delegationFunction)\n  let typeEvent = getTypeEvent(originalTypeEvent)\n\n  if (!nativeEvents.has(typeEvent)) {\n    typeEvent = originalTypeEvent\n  }\n\n  return [isDelegated, callable, typeEvent]\n}\n\nfunction addHandler(element, originalTypeEvent, handler, delegationFunction, oneOff) {\n  if (typeof originalTypeEvent !== 'string' || !element) {\n    return\n  }\n\n  let [isDelegated, callable, typeEvent] = normalizeParameters(originalTypeEvent, handler, delegationFunction)\n\n  // in case of mouseenter or mouseleave wrap the handler within a function that checks for its DOM position\n  // this prevents the handler from being dispatched the same way as mouseover or mouseout does\n  if (originalTypeEvent in customEvents) {\n    const wrapFunction = fn => {\n      return function (event) {\n        if (!event.relatedTarget || (event.relatedTarget !== event.delegateTarget && !event.delegateTarget.contains(event.relatedTarget))) {\n          return fn.call(this, event)\n        }\n      }\n    }\n\n    callable = wrapFunction(callable)\n  }\n\n  const events = getElementEvents(element)\n  const handlers = events[typeEvent] || (events[typeEvent] = {})\n  const previousFunction = findHandler(handlers, callable, isDelegated ? handler : null)\n\n  if (previousFunction) {\n    previousFunction.oneOff = previousFunction.oneOff && oneOff\n\n    return\n  }\n\n  const uid = makeEventUid(callable, originalTypeEvent.replace(namespaceRegex, ''))\n  const fn = isDelegated ?\n    bootstrapDelegationHandler(element, handler, callable) :\n    bootstrapHandler(element, callable)\n\n  fn.delegationSelector = isDelegated ? handler : null\n  fn.callable = callable\n  fn.oneOff = oneOff\n  fn.uidEvent = uid\n  handlers[uid] = fn\n\n  element.addEventListener(typeEvent, fn, isDelegated)\n}\n\nfunction removeHandler(element, events, typeEvent, handler, delegationSelector) {\n  const fn = findHandler(events[typeEvent], handler, delegationSelector)\n\n  if (!fn) {\n    return\n  }\n\n  element.removeEventListener(typeEvent, fn, Boolean(delegationSelector))\n  delete events[typeEvent][fn.uidEvent]\n}\n\nfunction removeNamespacedHandlers(element, events, typeEvent, namespace) {\n  const storeElementEvent = events[typeEvent] || {}\n\n  for (const [handlerKey, event] of Object.entries(storeElementEvent)) {\n    if (handlerKey.includes(namespace)) {\n      removeHandler(element, events, typeEvent, event.callable, event.delegationSelector)\n    }\n  }\n}\n\nfunction getTypeEvent(event) {\n  // allow to get the native events from namespaced events ('click.bs.button' --> 'click')\n  event = event.replace(stripNameRegex, '')\n  return customEvents[event] || event\n}\n\nconst EventHandler = {\n  on(element, event, handler, delegationFunction) {\n    addHandler(element, event, handler, delegationFunction, false)\n  },\n\n  one(element, event, handler, delegationFunction) {\n    addHandler(element, event, handler, delegationFunction, true)\n  },\n\n  off(element, originalTypeEvent, handler, delegationFunction) {\n    if (typeof originalTypeEvent !== 'string' || !element) {\n      return\n    }\n\n    const [isDelegated, callable, typeEvent] = normalizeParameters(originalTypeEvent, handler, delegationFunction)\n    const inNamespace = typeEvent !== originalTypeEvent\n    const events = getElementEvents(element)\n    const storeElementEvent = events[typeEvent] || {}\n    const isNamespace = originalTypeEvent.startsWith('.')\n\n    if (typeof callable !== 'undefined') {\n      // Simplest case: handler is passed, remove that listener ONLY.\n      if (!Object.keys(storeElementEvent).length) {\n        return\n      }\n\n      removeHandler(element, events, typeEvent, callable, isDelegated ? handler : null)\n      return\n    }\n\n    if (isNamespace) {\n      for (const elementEvent of Object.keys(events)) {\n        removeNamespacedHandlers(element, events, elementEvent, originalTypeEvent.slice(1))\n      }\n    }\n\n    for (const [keyHandlers, event] of Object.entries(storeElementEvent)) {\n      const handlerKey = keyHandlers.replace(stripUidRegex, '')\n\n      if (!inNamespace || originalTypeEvent.includes(handlerKey)) {\n        removeHandler(element, events, typeEvent, event.callable, event.delegationSelector)\n      }\n    }\n  },\n\n  trigger(element, event, args) {\n    if (typeof event !== 'string' || !element) {\n      return null\n    }\n\n    const $ = getjQuery()\n    const typeEvent = getTypeEvent(event)\n    const inNamespace = event !== typeEvent\n\n    let jQueryEvent = null\n    let bubbles = true\n    let nativeDispatch = true\n    let defaultPrevented = false\n\n    if (inNamespace && $) {\n      jQueryEvent = $.Event(event, args)\n\n      $(element).trigger(jQueryEvent)\n      bubbles = !jQueryEvent.isPropagationStopped()\n      nativeDispatch = !jQueryEvent.isImmediatePropagationStopped()\n      defaultPrevented = jQueryEvent.isDefaultPrevented()\n    }\n\n    const evt = hydrateObj(new Event(event, { bubbles, cancelable: true }), args)\n\n    if (defaultPrevented) {\n      evt.preventDefault()\n    }\n\n    if (nativeDispatch) {\n      element.dispatchEvent(evt)\n    }\n\n    if (evt.defaultPrevented && jQueryEvent) {\n      jQueryEvent.preventDefault()\n    }\n\n    return evt\n  }\n}\n\nfunction hydrateObj(obj, meta = {}) {\n  for (const [key, value] of Object.entries(meta)) {\n    try {\n      obj[key] = value\n    } catch {\n      Object.defineProperty(obj, key, {\n        configurable: true,\n        get() {\n          return value\n        }\n      })\n    }\n  }\n\n  return obj\n}\n\nexport default EventHandler\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap dom/manipulator.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nfunction normalizeData(value) {\n  if (value === 'true') {\n    return true\n  }\n\n  if (value === 'false') {\n    return false\n  }\n\n  if (value === Number(value).toString()) {\n    return Number(value)\n  }\n\n  if (value === '' || value === 'null') {\n    return null\n  }\n\n  if (typeof value !== 'string') {\n    return value\n  }\n\n  try {\n    return JSON.parse(decodeURIComponent(value))\n  } catch {\n    return value\n  }\n}\n\nfunction normalizeDataKey(key) {\n  return key.replace(/[A-Z]/g, chr => `-${chr.toLowerCase()}`)\n}\n\nconst Manipulator = {\n  setDataAttribute(element, key, value) {\n    element.setAttribute(`data-bs-${normalizeDataKey(key)}`, value)\n  },\n\n  removeDataAttribute(element, key) {\n    element.removeAttribute(`data-bs-${normalizeDataKey(key)}`)\n  },\n\n  getDataAttributes(element) {\n    if (!element) {\n      return {}\n    }\n\n    const attributes = {}\n    const bsKeys = Object.keys(element.dataset).filter(key => key.startsWith('bs') && !key.startsWith('bsConfig'))\n\n    for (const key of bsKeys) {\n      let pureKey = key.replace(/^bs/, '')\n      pureKey = pureKey.charAt(0).toLowerCase() + pureKey.slice(1, pureKey.length)\n      attributes[pureKey] = normalizeData(element.dataset[key])\n    }\n\n    return attributes\n  },\n\n  getDataAttribute(element, key) {\n    return normalizeData(element.getAttribute(`data-bs-${normalizeDataKey(key)}`))\n  }\n}\n\nexport default Manipulator\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap util/config.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Manipulator from '../dom/manipulator.js'\nimport { isElement, toType } from './index.js'\n\n/**\n * Class definition\n */\n\nclass Config {\n  // Getters\n  static get Default() {\n    return {}\n  }\n\n  static get DefaultType() {\n    return {}\n  }\n\n  static get NAME() {\n    throw new Error('You have to implement the static method \"NAME\", for each component!')\n  }\n\n  _getConfig(config) {\n    config = this._mergeConfigObj(config)\n    config = this._configAfterMerge(config)\n    this._typeCheckConfig(config)\n    return config\n  }\n\n  _configAfterMerge(config) {\n    return config\n  }\n\n  _mergeConfigObj(config, element) {\n    const jsonConfig = isElement(element) ? Manipulator.getDataAttribute(element, 'config') : {} // try to parse\n\n    return {\n      ...this.constructor.Default,\n      ...(typeof jsonConfig === 'object' ? jsonConfig : {}),\n      ...(isElement(element) ? Manipulator.getDataAttributes(element) : {}),\n      ...(typeof config === 'object' ? config : {})\n    }\n  }\n\n  _typeCheckConfig(config, configTypes = this.constructor.DefaultType) {\n    for (const [property, expectedTypes] of Object.entries(configTypes)) {\n      const value = config[property]\n      const valueType = isElement(value) ? 'element' : toType(value)\n\n      if (!new RegExp(expectedTypes).test(valueType)) {\n        throw new TypeError(\n          `${this.constructor.NAME.toUpperCase()}: Option \"${property}\" provided type \"${valueType}\" but expected type \"${expectedTypes}\".`\n        )\n      }\n    }\n  }\n}\n\nexport default Config\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap base-component.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport Data from './dom/data.js'\nimport EventHandler from './dom/event-handler.js'\nimport Config from './util/config.js'\nimport { executeAfterTransition, getElement } from './util/index.js'\n\n/**\n * Constants\n */\n\nconst VERSION = '5.3.3'\n\n/**\n * Class definition\n */\n\nclass BaseComponent extends Config {\n  constructor(element, config) {\n    super()\n\n    element = getElement(element)\n    if (!element) {\n      return\n    }\n\n    this._element = element\n    this._config = this._getConfig(config)\n\n    Data.set(this._element, this.constructor.DATA_KEY, this)\n  }\n\n  // Public\n  dispose() {\n    Data.remove(this._element, this.constructor.DATA_KEY)\n    EventHandler.off(this._element, this.constructor.EVENT_KEY)\n\n    for (const propertyName of Object.getOwnPropertyNames(this)) {\n      this[propertyName] = null\n    }\n  }\n\n  _queueCallback(callback, element, isAnimated = true) {\n    executeAfterTransition(callback, element, isAnimated)\n  }\n\n  _getConfig(config) {\n    config = this._mergeConfigObj(config, this._element)\n    config = this._configAfterMerge(config)\n    this._typeCheckConfig(config)\n    return config\n  }\n\n  // Static\n  static getInstance(element) {\n    return Data.get(getElement(element), this.DATA_KEY)\n  }\n\n  static getOrCreateInstance(element, config = {}) {\n    return this.getInstance(element) || new this(element, typeof config === 'object' ? config : null)\n  }\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get DATA_KEY() {\n    return `bs.${this.NAME}`\n  }\n\n  static get EVENT_KEY() {\n    return `.${this.DATA_KEY}`\n  }\n\n  static eventName(name) {\n    return `${name}${this.EVENT_KEY}`\n  }\n}\n\nexport default BaseComponent\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap dom/selector-engine.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { isDisabled, isVisible, parseSelector } from '../util/index.js'\n\nconst getSelector = element => {\n  let selector = element.getAttribute('data-bs-target')\n\n  if (!selector || selector === '#') {\n    let hrefAttribute = element.getAttribute('href')\n\n    // The only valid content that could double as a selector are IDs or classes,\n    // so everything starting with `#` or `.`. If a \"real\" URL is used as the selector,\n    // `document.querySelector` will rightfully complain it is invalid.\n    // See https://github.com/twbs/bootstrap/issues/32273\n    if (!hrefAttribute || (!hrefAttribute.includes('#') && !hrefAttribute.startsWith('.'))) {\n      return null\n    }\n\n    // Just in case some CMS puts out a full URL with the anchor appended\n    if (hrefAttribute.includes('#') && !hrefAttribute.startsWith('#')) {\n      hrefAttribute = `#${hrefAttribute.split('#')[1]}`\n    }\n\n    selector = hrefAttribute && hrefAttribute !== '#' ? hrefAttribute.trim() : null\n  }\n\n  return selector ? selector.split(',').map(sel => parseSelector(sel)).join(',') : null\n}\n\nconst SelectorEngine = {\n  find(selector, element = document.documentElement) {\n    return [].concat(...Element.prototype.querySelectorAll.call(element, selector))\n  },\n\n  findOne(selector, element = document.documentElement) {\n    return Element.prototype.querySelector.call(element, selector)\n  },\n\n  children(element, selector) {\n    return [].concat(...element.children).filter(child => child.matches(selector))\n  },\n\n  parents(element, selector) {\n    const parents = []\n    let ancestor = element.parentNode.closest(selector)\n\n    while (ancestor) {\n      parents.push(ancestor)\n      ancestor = ancestor.parentNode.closest(selector)\n    }\n\n    return parents\n  },\n\n  prev(element, selector) {\n    let previous = element.previousElementSibling\n\n    while (previous) {\n      if (previous.matches(selector)) {\n        return [previous]\n      }\n\n      previous = previous.previousElementSibling\n    }\n\n    return []\n  },\n  // TODO: this is now unused; remove later along with prev()\n  next(element, selector) {\n    let next = element.nextElementSibling\n\n    while (next) {\n      if (next.matches(selector)) {\n        return [next]\n      }\n\n      next = next.nextElementSibling\n    }\n\n    return []\n  },\n\n  focusableChildren(element) {\n    const focusables = [\n      'a',\n      'button',\n      'input',\n      'textarea',\n      'select',\n      'details',\n      '[tabindex]',\n      '[contenteditable=\"true\"]'\n    ].map(selector => `${selector}:not([tabindex^=\"-\"])`).join(',')\n\n    return this.find(focusables, element).filter(el => !isDisabled(el) && isVisible(el))\n  },\n\n  getSelectorFromElement(element) {\n    const selector = getSelector(element)\n\n    if (selector) {\n      return SelectorEngine.findOne(selector) ? selector : null\n    }\n\n    return null\n  },\n\n  getElementFromSelector(element) {\n    const selector = getSelector(element)\n\n    return selector ? SelectorEngine.findOne(selector) : null\n  },\n\n  getMultipleElementsFromSelector(element) {\n    const selector = getSelector(element)\n\n    return selector ? SelectorEngine.find(selector) : []\n  }\n}\n\nexport default SelectorEngine\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap util/component-functions.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport EventHandler from '../dom/event-handler.js'\nimport SelectorEngine from '../dom/selector-engine.js'\nimport { isDisabled } from './index.js'\n\nconst enableDismissTrigger = (component, method = 'hide') => {\n  const clickEvent = `click.dismiss${component.EVENT_KEY}`\n  const name = component.NAME\n\n  EventHandler.on(document, clickEvent, `[data-bs-dismiss=\"${name}\"]`, function (event) {\n    if (['A', 'AREA'].includes(this.tagName)) {\n      event.preventDefault()\n    }\n\n    if (isDisabled(this)) {\n      return\n    }\n\n    const target = SelectorEngine.getElementFromSelector(this) || this.closest(`.${name}`)\n    const instance = component.getOrCreateInstance(target)\n\n    // Method argument is left, for Alert and only, as it doesn't implement the 'hide' method\n    instance[method]()\n  })\n}\n\nexport {\n  enableDismissTrigger\n}\n","/**\n * --------------------------------------------------------------------------\n * Bootstrap alert.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component.js'\nimport EventHandler from './dom/event-handler.js'\nimport { enableDismissTrigger } from './util/component-functions.js'\nimport { defineJQueryPlugin } from './util/index.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'alert'\nconst DATA_KEY = 'bs.alert'\nconst EVENT_KEY = `.${DATA_KEY}`\n\nconst EVENT_CLOSE = `close${EVENT_KEY}`\nconst EVENT_CLOSED = `closed${EVENT_KEY}`\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\n\n/**\n * Class definition\n */\n\nclass Alert extends BaseComponent {\n  // Getters\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  close() {\n    const closeEvent = EventHandler.trigger(this._element, EVENT_CLOSE)\n\n    if (closeEvent.defaultPrevented) {\n      return\n    }\n\n    this._element.classList.remove(CLASS_NAME_SHOW)\n\n    const isAnimated = this._element.classList.contains(CLASS_NAME_FADE)\n    this._queueCallback(() => this._destroyElement(), this._element, isAnimated)\n  }\n\n  // Private\n  _destroyElement() {\n    this._element.remove()\n    EventHandler.trigger(this._element, EVENT_CLOSED)\n    this.dispose()\n  }\n\n  // Static\n  static jQueryInterface(config) {\n    return this.each(function () {\n      const data = Alert.getOrCreateInstance(this)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (data[config] === undefined || config.startsWith('_') || config === 'constructor') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config](this)\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nenableDismissTrigger(Alert, 'close')\n\n/**\n * jQuery\n */\n\ndefineJQueryPlugin(Alert)\n\nexport default Alert\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport events from \"@patternslib/patternslib/src/core/events\";\nimport registry from \"@patternslib/patternslib/src/core/registry\";\nimport BaseView from \"../../../../core/ui/views/base\";\nimport TableRowView from \"./tablerow\";\nimport TableTemplate from \"../../templates/table.xml\";\nimport Sortable from \"../../../sortable/sortable\";\nimport \"../../../datatables/datatables\";\nimport \"bootstrap/js/src/alert\";\nimport utils from \"../../../../core/utils\";\nimport patternslib_utils from \"@patternslib/patternslib/src/core/utils\";\n\nexport default BaseView.extend({\n    tagName: \"div\",\n    template: _.template(TableTemplate),\n    tableSortable: null,\n\n    initialize: function (options) {\n        var self = this;\n        BaseView.prototype.initialize.apply(self, [options]);\n        self.collection = self.app.collection;\n        self.selectedCollection = self.app.selectedCollection;\n        self.subsetIds = [];\n        self.contextInfo = null;\n        self.tableSortable = null;\n\n        // init events\n        self.listenTo(self.collection, \"sync\", self.render);\n        self.listenTo(self.selectedCollection, \"remove\", self.render);\n        self.listenTo(self.selectedCollection, \"reset\", self.render);\n\n        $(\"body\").on(\"context-info-loaded\", (event, data) => {\n            self.contextInfo = data;\n            /* set default page info */\n            self.setContextInfo();\n        });\n\n        self.dateColumns = [\n            \"ModificationDate\",\n            \"EffectiveDate\",\n            \"CreationDate\",\n            \"ExpirationDate\",\n            \"start\",\n            \"end\",\n            \"last_comment_date\",\n        ];\n\n        self.translatableColumns = [\"review_state\"];\n    },\n\n    events: {\n        \"click .fc-breadcrumbs a\": \"breadcrumbClicked\",\n        \"change .select-all\": \"selectAll\",\n    },\n\n    setContextInfo: function () {\n        const data = this.contextInfo;\n        /* set breadcrumb title info */\n        const crumbs = data && data.breadcrumbs;\n        if (crumbs && crumbs.length) {\n            const $crumbs = this.$(\".fc-breadcrumbs a.crumb\");\n            _.each(crumbs, (crumb, idx) => {\n                $crumbs.eq(idx).html(patternslib_utils.escape_html(crumb.title));\n            });\n        }\n        this.trigger(\"context-info:set\");\n    },\n\n    render: async function () {\n        // By default do not start sorted by any column\n        // Ignore first column and the last one (activeColumns.length + 1)\n        // Do not show paginator, search or information, we only want column sorting\n        const datatables_options = {\n            order: [0, \"asc\"],\n            columnDefs: [\n                {\n                    orderable: false,\n                    targets: [0, this.app.activeColumns.length + 1],\n                },\n            ],\n            paging: false,\n            searching: false,\n            info: false,\n            ...this.app.options.datatables_options,\n        };\n\n        this.$el.html(\n            this.template({\n                _t: _t,\n                homeIcon: await utils.resolveIcon(\"house\"),\n                pathParts: this.app\n                    .getCurrentPath()\n                    .split(\"/\")\n                    .slice(1)\n                    .filter((val) => {\n                        return val.length > 0;\n                    }),\n                activeColumns: this.app.activeColumns,\n                availableColumns: this.app.availableColumns,\n                datatables_options: JSON.stringify(datatables_options),\n            })\n        );\n\n        if (this.collection.length) {\n            const container = $(\"tbody\", this.$el);\n\n            const collection_length = this.collection.length;\n            let collection_cnt = 0;\n\n            this.collection.each(async (result) => {\n                this.dateColumns.map((col) => {\n                    // empty column instead of displaying \"None\".\n                    if (\n                        Object.prototype.hasOwnProperty.call(result.attributes, col) &&\n                        (result.attributes[col] === \"None\" || !result.attributes[col])\n                    ) {\n                        result.attributes[col] = \"\";\n                    }\n                });\n\n                const view = new TableRowView({\n                    model: result,\n                    app: this.app,\n                    table: this,\n                });\n                await view.render();\n                container.append(view.el);\n\n                // Throw the ``table_row_rendering_finished`` event after all table rows have finished rendering.\n                collection_cnt++;\n                if (collection_cnt === collection_length) {\n                    this.el.dispatchEvent(new Event(\"table_row_rendering_finished\"));\n                }\n            });\n\n            // NOTE: this is based on the concept of awaiting an event.\n            // See this Stackoverflow answer here:\n\n            // https://stackoverflow.com/a/44746691/1337474\n            // When the last table row has finished rendering, throw an event.\n            // For this \"table_row_rendering_finished\" event we're a-waiting for.\n            // And after that we can scan the table.\n            const table_row_rendering_finished = () =>\n                new Promise((resolve) =>\n                    events.add_event_listener(\n                        this.el,\n                        \"table_row_rendering_finished\",\n                        \"table_row_rendering_finished__listener\",\n                        resolve,\n                        { once: true }\n                    )\n                );\n\n            await table_row_rendering_finished();\n            events.remove_event_listener = (this.el, \"table_row_rendering_finished__listener\"); // prettier-ignore\n            registry.scan(this.$el);\n        }\n\n        this.$el\n            .find(\"table\")\n            .on(\"init.dt\", () => {\n                // Add reordering action by drag and drop\n                if (this.app.options.moveUrl) {\n                    this.addReordering();\n                }\n                // store Order of nativ sorting for move action\n                this.storeOrder();\n            })\n            .on(\"order.dt\", (e, settings, ordArr) => {\n                // prevent message from showing for nativ order\n                if (ordArr.length === 1) {\n                    const order = ordArr[0];\n                    if (order.col === 0 && order.dir === \"asc\") {\n                        if (this.tableSortable) {\n                            this.tableSortable.enableSort();\n                        }\n                        // Clear the status message\n                        this.app.clearStatus(\"sorting_dndreordering_disabled\");\n                        return;\n                    }\n                }\n                const e_target = e.target;\n                const btn = $(\n                    '<button type=\"button\" class=\"btn btn-danger btn-sm\"></button>'\n                )\n                    .text(_t(\"Reset column sorting\"))\n                    .on(\"click\", () => {\n                        // Use column 0 to restore ordering and then empty list so it doesn't\n                        // show the icon in the column header\n                        const api = $(e_target).dataTable().api();\n                        api.order([0, \"asc\"]);\n                        api.draw();\n                    });\n                this.app.setStatus(\n                    {\n                        text: _t(\"Notice: Drag and drop reordering is disabled when viewing the contents sorted by a column.\"), // prettier-ignore\n                        type: \"warning\",\n                    },\n                    btn,\n                    false,\n                    \"sorting_dndreordering_disabled\"\n                );\n                if (this.tableSortable) {\n                    this.tableSortable.disableSort();\n                }\n                this.$el.removeClass(\"order-support\");\n            });\n\n        return this;\n    },\n\n    breadcrumbClicked: function (e) {\n        e.preventDefault();\n        let $el = $(e.target);\n        if ($el[0].tagName !== \"A\") {\n            $el = $el.parent(\"a\");\n        }\n        let path = \"\";\n        for (const item of $($el.prevAll(\"a\").get().reverse())) {\n            let part = $(item).attr(\"data-path\");\n            path += part;\n            if (part !== \"/\") {\n                path += \"/\";\n            }\n        }\n        path += $el.attr(\"data-path\");\n        this.app.setCurrentPath(path);\n        this.app.collection.getPage(this.app.collection.state.firstPage);\n    },\n\n    selectAll: function (e) {\n        if ($(e.target).is(\":checked\")) {\n            $('input[type=\"checkbox\"]', this.$(\"tbody\")).prop(\"checked\", true).trigger(\"change\");\n        } else {\n            /* delaying the re-rendering is much faster in this case */\n            this.selectedCollection.remove(this.collection.models, {\n                silent: true,\n            });\n            this.selectedCollection.trigger(\"remove\");\n        }\n        this.setContextInfo();\n    },\n    toggleSelectAll: function (e) {\n        const $el = $(e.target);\n        if (!$el.is(\":checked\")) {\n            this.$(\".select-all\").prop(\"checked\", false);\n        }\n    },\n\n    addReordering: function () {\n        // if we have a custom query going on, we do not allow sorting.\n        if (this.app.inQueryMode()) {\n            this.$el.removeClass(\"order-support\");\n            return;\n        }\n        this.$el.addClass(\"order-support\");\n        this.tableSortable = new Sortable(this.$(\"tbody\"), {\n            selector: \"tr\",\n            createDragItem: (pattern, $el) => {\n                const $tr = $el.clone();\n                const $table = $(\"<table><tbody></tbody></table>\");\n                $(\"tbody\", $table).append($tr);\n                $table\n                    .addClass(\"structure-dragging\")\n                    .css({ opacity: 0.85, position: \"absolute\" });\n                $table.width($el.width());\n                $table.height($el.height());\n                $table.appendTo(document.body);\n                return $table;\n            },\n            drop: ($el, delta) => {\n                if (delta !== 0) {\n                    this.app.moveItem($el.attr(\"data-id\"), delta, this.subsetIds);\n                    this.storeOrder();\n                }\n            },\n        });\n    },\n\n    storeOrder: function () {\n        const subsetIds = [];\n        this.$(\"tbody tr.itemRow\").each(function () {\n            subsetIds.push($(this).attr(\"data-id\"));\n        });\n        this.subsetIds = subsetIds;\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport ContainerView from \"./container\";\nimport Backdrop from \"../../../pat/backdrop/backdrop\";\nimport PopoverTemplate from \"../templates/popover.xml\";\n\nexport default ContainerView.extend({\n    tagName: \"div\",\n    className: \"popover\",\n    eventPrefix: \"popover\",\n    template: PopoverTemplate,\n    content: null,\n    title: null,\n    triggerView: null,\n    idPrefix: \"popover-\",\n    triggerEvents: {\n        \"button:click\": \"toggle\",\n    },\n    placement: \"bottom\",\n    events: {},\n    opened: false,\n    closeOnOutClick: true,\n    appendInContainer: true,\n    backdrop: undefined,\n    $backdrop: null,\n    useBackdrop: true,\n    backdropOptions: {\n        zIndex: \"1009\",\n        opacity: \"0.4\",\n        className: \"backdrop backdrop-popover\",\n        classActiveName: \"backdrop-active\",\n        closeOnEsc: false,\n        closeOnClick: true,\n    },\n    initialize: function (options) {\n        var self = this;\n        ContainerView.prototype.initialize.apply(this, [options]);\n        this.bindTriggerEvents();\n\n        this.on(\n            \"render\",\n            function () {\n                this.$el.attr(\"role\", \"tooltip\").attr(\"aria-hidden\", \"false\");\n                this.renderTitle();\n                this.renderContent();\n            },\n            this\n        );\n\n        this.$el.on(\"keyup\", function (e) {\n            if (e.keyCode === 27) {\n                self.hide();\n            }\n        });\n    },\n    afterRender: function () {},\n    getTemplateOptions: function () {\n        return this.options;\n    },\n    renderTitle: function () {\n        var title = this.title;\n        if (typeof title === \"function\") {\n            title = title(this.getTemplateOptions());\n        }\n        this.$(\".popover-title\").empty().append(title);\n    },\n    renderContent: function () {\n        this.$(\".popover-content\")\n            .empty()\n            .append(this.content(this.getTemplateOptions()));\n    },\n    bindTriggerEvents: function () {\n        if (this.triggerView) {\n            _.each(\n                this.triggerEvents,\n                function (func, event) {\n                    var method = this[func];\n                    if (!method) {\n                        $.error(\"Function not found.\");\n                    }\n                    this.stopListening(this.triggerView, event);\n                    this.listenTo(this.triggerView, event, method);\n                },\n                this\n            );\n        }\n    },\n\n    getPosition: function () {\n        var $el = this.triggerView.$el;\n        return $.extend(\n            {},\n            {\n                width: $el[0].offsetWidth,\n                height: $el[0].offsetHeight,\n            },\n            $el.offset()\n        );\n    },\n\n    getBodyClassName: function () {\n        var name = \"popover-\";\n        if (this.options.id) {\n            name += this.options.id + \"-\";\n        }\n        name += \"active\";\n        return name;\n    },\n\n    show: function () {\n        /* hide existing */\n        $(\".popover:visible\").each(function () {\n            var popover = $(this).data(\"component\");\n            if (popover) {\n                popover.hide();\n            }\n        });\n\n        this.position();\n\n        this.setBackdrop();\n        if (this.useBackdrop === true) {\n            this.backdrop.show();\n        }\n\n        this.opened = true;\n\n        if (this.triggerView) {\n            this.triggerView.$el.addClass(\"active\");\n        }\n\n        this.uiEventTrigger(\"show\", this);\n        this.$el.attr(\"aria-hidden\", \"false\");\n        $(\"body\").addClass(this.getBodyClassName());\n    },\n\n    position: function () {\n        var pos = this.getPosition();\n        var $tip = this.$el,\n            tp,\n            placement,\n            actualWidth,\n            actualHeight;\n\n        placement = this.placement;\n\n        $tip.css({ top: 0, left: 0 }).addClass(\"active\");\n\n        actualWidth = $tip[0].offsetWidth;\n        actualHeight = $tip[0].offsetHeight;\n\n        switch (placement) {\n            case \"bottom-right\":\n                tp = {\n                    top: pos.top + pos.height,\n                    left: pos.left + pos.width - 40,\n                };\n                break;\n            case \"bottom\":\n                tp = {\n                    top: pos.top + pos.height,\n                    left: pos.left + pos.width / 2 - actualWidth / 2,\n                };\n                break;\n            case \"top\":\n                tp = {\n                    top: pos.top - actualHeight,\n                    left: pos.left + pos.width / 2 - actualWidth / 2,\n                };\n                break;\n            case \"left\":\n                tp = {\n                    top: pos.top + pos.height / 2 - actualHeight / 2,\n                    left: pos.left - actualWidth,\n                };\n                break;\n            case \"right\":\n                tp = {\n                    top: pos.top + pos.height / 2 - actualHeight / 2,\n                    left: pos.left + pos.width,\n                };\n                break;\n        }\n\n        this.applyPlacement(tp, placement);\n    },\n\n    applyPlacement: function (offset, placement) {\n        var $el = this.$el,\n            $tip = this.$el,\n            width = $tip[0].offsetWidth,\n            height = $tip[0].offsetHeight,\n            actualWidth,\n            actualHeight,\n            delta,\n            replace;\n\n        $el.removeClass(placement);\n\n        $el.offset(offset).addClass(placement).addClass(\"active\");\n\n        actualWidth = $tip[0].offsetWidth;\n        actualHeight = $tip[0].offsetHeight;\n\n        if (placement === \"top\" && actualHeight !== height) {\n            offset.top = offset.top + height - actualHeight;\n            replace = true;\n        }\n\n        if (placement === \"bottom\" || placement === \"top\") {\n            delta = 0;\n\n            if (offset.left < 0) {\n                delta = offset.left * -2;\n                offset.left = 0;\n                $el.removeClass(placement);\n                $el.offset(offset).addClass(placement);\n                actualWidth = $tip[0].offsetWidth;\n                actualHeight = $tip[0].offsetHeight;\n            }\n\n            this.positionArrow(delta - width + actualWidth, actualWidth, \"left\");\n        } else if (placement !== \"bottom-right\") {\n            // If placement is bottom-right, don't override left position for the arrow that is defined in css to 20px.\n            this.positionArrow(actualHeight - height, actualHeight, \"top\");\n        }\n\n        if (replace) {\n            $el.offset(offset);\n        }\n    },\n    positionArrow: function (delta, dimension, position) {\n        var $arrow = this.$(\".arrow\");\n        $arrow.css(position, delta ? 50 * (1 - delta / dimension) + \"%\" : \"\");\n    },\n    hide: function () {\n        this.opened = false;\n        this.$el.removeClass(\"active\");\n        if (this.triggerView) {\n            this.triggerView.$el.removeClass(\"active\");\n            this.triggerView.$el.attr(\"aria-hidden\", \"true\");\n        }\n        this.uiEventTrigger(\"hide\", this);\n        this.$el.attr(\"aria-hidden\", \"true\");\n        $(\"body\").removeClass(this.getBodyClassName());\n    },\n    // eslint-disable-next-line no-unused-vars\n    toggle: function (button, e) {\n        if (this.opened) {\n            this.hide();\n        } else {\n            this.show();\n        }\n    },\n    setBackdrop: function () {\n        if (this.useBackdrop === true && this.backdrop === undefined) {\n            var self = this;\n            this.$backdrop = this.$el.closest(\".ui-backdrop-element\");\n            if (this.$backdrop.length === 0) {\n                this.$backdrop = $(\"body\");\n            }\n\n            this.backdrop = new Backdrop(this.$backdrop, this.backdropOptions);\n            this.backdrop.$el.on(\"hidden.backdrop.patterns\", function (e) {\n                if (e.namespace === \"backdrop.patterns\") {\n                    e.stopPropagation();\n                    if (self.opened === true) {\n                        self.hide();\n                    }\n                }\n            });\n            this.on(\n                \"popover:hide\",\n                function () {\n                    this.backdrop.hide();\n                },\n                this\n            );\n        }\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport PopoverView from \"../../../../core/ui/views/popover\";\nimport utils from \"../../../../core/utils\";\nimport ItemTemplate from \"../../templates/selection_item.xml\";\n\nexport default PopoverView.extend({\n    className: \"popover selected-items\",\n\n    title: _.template(\n        '<input type=\"text\" class=\"filter\" placeholder=\"<%- _t(\"Filter\") %>\" />' +\n            '<a href=\"#\" class=\" remove-all\">' +\n            '<%= removeIcon %> <%- _t(\"remove all\") %></a>'\n    ),\n\n    content: _.template(\n        \"<% collection.each(function(item) { %>\" +\n            \"<%= item_template($.extend({'removeIcon': removeIcon}, item.toJSON())) %>\" +\n            \"<% }); %>\"\n    ),\n\n    events: {\n        \"click a.remove\": \"itemRemoved\",\n        \"keyup input.filter\": \"filterSelected\",\n        \"click .remove-all\": \"removeAll\",\n    },\n\n    initialize: function (options) {\n        PopoverView.prototype.initialize.apply(this, [options]);\n        let timeout = 0;\n        this.listenTo(this.collection, \"reset all add remove\", () => {\n            clearTimeout(timeout);\n            timeout = setTimeout(() => {\n                this.render();\n            }, 50);\n        });\n        this.options[\"item_template\"] = _.template(ItemTemplate);\n    },\n\n    render: async function () {\n        this.options[\"removeIcon\"] = await utils.resolveIcon(\"x-circle\");\n        PopoverView.prototype.render.call(this);\n        if (this.collection.length === 0) {\n            this.$el.removeClass(\"active\");\n        }\n        return this;\n    },\n\n    itemRemoved: function (e) {\n        e.preventDefault();\n        const uid = $(e.currentTarget).data(\"uid\");\n        this.collection.removeByUID(uid);\n        if (this.collection.length !== 0) {\n            // re-rendering causes it to close, reopen\n            this.show();\n        }\n    },\n\n    filterSelected: function (e) {\n        const val = $(e.target).val().toLowerCase();\n        for (const item of $(\".selected-item\", this.$el)) {\n            const $el = $(item);\n            if ($el.text().toLowerCase().indexOf(val) === -1) {\n                $el.hide();\n            } else {\n                $el.show();\n            }\n        }\n    },\n\n    removeAll: function (e) {\n        e.preventDefault();\n        this.collection.reset();\n        this.hide();\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport PopoverView from \"../../../../core/ui/views/popover\";\nimport registry from \"@patternslib/patternslib/src/core/registry\";\nimport utils from \"@patternslib/patternslib/src/core/utils\";\n\nexport default PopoverView.extend({\n    events: {\n        \"click button.applyBtn\": \"applyButtonClicked\",\n        \"click button.closeBtn\": \"toggle\",\n    },\n    submitText: _t(\"Apply\"),\n\n    initialize: function (options) {\n        this.app = options.app;\n        this.className = \"popover \" + options.id;\n        this.title = options.form.title || options.title;\n        this.submitText = options.form.submitText || _t(\"Apply\");\n        this.submitContext = options.form.submitContext || \"primary\";\n        this.data = {};\n\n        this.options = options;\n        this.setContent(options.form.template);\n\n        PopoverView.prototype.initialize.apply(this, [options]);\n    },\n\n    setContent: function (content) {\n        let html = \"<form>\" + content + \"</form>\";\n        html +=\n            '<button class=\"btn btn-block btn-' +\n            this.submitContext +\n            ' applyBtn\">' +\n            this.submitText +\n            \" </button>\";\n        if (this.options.form.closeText) {\n            html +=\n                '<button class=\"btn btn-block btn-secondary closeBtn\">' +\n                this.options.form.closeText +\n                \" </button>\";\n        }\n        this.content = _.template(html);\n    },\n\n    getTemplateOptions: function () {\n        const items = [];\n        for (const item of this.app.selectedCollection.models) {\n            let _json = item.toJSON();\n            _json[\"Title\"] = utils.escape_html(_json[\"Title\"]);\n            items.push(_json);\n        }\n        return $.extend({}, true, this.options, {\n            items: items,\n            data: this.data,\n        });\n    },\n\n    applyButtonClicked: function () {\n        const data = {};\n        for (const param of this.$el.find(\"form\").serializeArray()) {\n            if (param.name in data) {\n                data[param.name] += \",\" + param.value;\n            } else {\n                data[param.name] = param.value;\n            }\n        }\n\n        this.app.buttonClickEvent(this.triggerView, data);\n        this.hide();\n    },\n\n    afterRender: function () {\n        if (this.options.form.dataUrl) {\n            this.$(\".popover-content\").html(_t(\"Loading...\"));\n            this.app.loading.show();\n            const url = this.app.getAjaxUrl(this.options.form.dataUrl);\n            $.ajax({\n                url: url,\n                dataType: \"json\",\n                type: \"POST\",\n                cache: false,\n                data: {\n                    selection: JSON.stringify(this.app.getSelectedUids()),\n                    transitions: true,\n                    render: \"yes\",\n                },\n            })\n                .done((result) => {\n                    this.data = result.data || result;\n                    this.renderContent();\n                    registry.scan(this.$el);\n                })\n                .fail(() => {\n                    /* we temporarily set original html to a value here so we can\n             render the updated content and then put the original back */\n                    const originalContent = this.content;\n                    this.setContent(\n                        \"<p>\" + _t(\"Error loading popover from server.\") + \"</p>\",\n                        false\n                    );\n                    this.renderContent();\n                    this.content = originalContent;\n                })\n                .always(() => {\n                    this.app.loading.hide();\n                    this.position();\n                });\n        } else {\n            registry.scan(this.$el);\n            this.position();\n        }\n    },\n\n    toggle: function (button, e) {\n        PopoverView.prototype.toggle.apply(this, [button, e]);\n        if (!this.opened) {\n            return;\n        }\n        this.$el.replaceWith(this.render().el);\n        this.position();\n    },\n});\n","import _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport PopoverView from \"../../../../core/ui/views/popover\";\n\nexport default PopoverView.extend({\n    className: \"popover rearrange\",\n    title: _.template('<%- _t(\"Rearrange items in this folder\") %>'),\n    content: _.template(\n        '<div class=\"form-group\">' +\n            '<label><%- _t(\"What to rearrange on\") %></label>' +\n            '<select name=\"rearrange_on\" class=\"form-select\">' +\n            \"<% _.each(rearrangeProperties, function(title, property) { %>\" +\n            '<option value=\"<%- property %>\"><%- title %></option>' +\n            \"<% }); %>\" +\n            \"</select>\" +\n            '<p class=\"help-block\">' +\n            '<b><%- _t(\"This permanently changes the order of items in this folder. This operation may take a long time depending on the size of the folder.\") %></b>' + // prettier-ignore\n            \"</p>\" +\n            \"</div>\" +\n            '<div class=\"form-check\">' +\n            '<input class=\"form-check-input\" type=\"checkbox\" name=\"reversed\" />' +\n            '<label class=\"form-check-label\"><%- _t(\"Reverse\") %></label>' +\n            \"</div>\" +\n            '<button class=\"btn btn-block btn-primary btn-sm\"><%- _t(\"Rearrange\") %></button>'\n    ),\n\n    events: {\n        \"click button\": \"rearrangeButtonClicked\",\n    },\n\n    initialize: function (options) {\n        this.app = options.app;\n        PopoverView.prototype.initialize.apply(this, [options]);\n        this.options.rearrangeProperties = this.app.options.rearrange.properties;\n    },\n\n    render: function () {\n        PopoverView.prototype.render.call(this);\n        this.$rearrangeOn = this.$('[name=\"rearrange_on\"]');\n        this.$reversed = this.$('[name=\"reversed\"]');\n        return this;\n    },\n\n    rearrangeButtonClicked: function () {\n        if (this.app.collection.getCurrentPath() === \"/\") {\n            if (\n                !window.confirm(\n                    _t(\"Sorting the content on the base of the site could affect your navigation order. Are you certain you want to do this?\") // prettier-ignore\n                )\n            ) {\n                return;\n            }\n        }\n        const data = {\n            rearrange_on: this.$rearrangeOn.val(),\n            reversed: false,\n        };\n        if (this.$reversed[0].checked) {\n            data.reversed = true;\n        }\n        this.app.buttonClickEvent(this.triggerView, data);\n        this.hide();\n    },\n});\n","import ButtonView from \"../../../../core/ui/views/button\";\nimport tplButton from \"../../templates/selection_button.xml\";\n\nexport default ButtonView.extend({\n    collection: null,\n    template: tplButton,\n\n    initialize: function (options) {\n        ButtonView.prototype.initialize.apply(this, [options]);\n        this.timeout = 0;\n        if (this.collection !== null) {\n            this.collection.on(\n                \"add remove reset\",\n                () => {\n                    /* delay it */\n                    clearTimeout(this.timeout);\n                    this.timeout = setTimeout(() => {\n                        this.render();\n                        if (this.collection.length === 0) {\n                            this.$el.removeClass(\"active\");\n                        }\n                    }, 50);\n                },\n                this\n            );\n        }\n    },\n\n    serializedModel: function () {\n        const obj = {\n            icon: \"\",\n            title: this.options.title,\n            length: 0,\n        };\n        if (this.collection !== null) {\n            obj.length = this.collection.length;\n        }\n        return obj;\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport Backbone from \"backbone\";\nimport PagingTemplate from \"../../templates/paging.xml\";\nimport logging from \"@patternslib/patternslib/src/core/logging\";\n\nconst log = logging.getLogger(\"pat-structure/table\");\nlog.setLevel(\"DEBUG\");\n\nexport default Backbone.View.extend({\n    events: {\n        \"click a.servernext\": \"nextResultPage\",\n        \"click a.serverprevious\": \"previousResultPage\",\n        \"click a.serverlast\": \"gotoLast\",\n        \"click a.page\": \"gotoPage\",\n        \"click a.serverfirst\": \"gotoFirst\",\n        \"click a.serverpage\": \"gotoPage\",\n        \"click .serverhowmany a\": \"changeCount\",\n    },\n\n    tagName: \"aside\",\n    template: _.template(PagingTemplate),\n    maxPages: 7,\n\n    initialize: function (options) {\n        this.options = options;\n        this.app = this.options.app;\n        this.collection = this.app.collection;\n        this.listenTo(this.collection, \"reset\", this.render);\n        this.listenTo(this.collection, \"sync\", this.render);\n    },\n\n    render: function () {\n        const data = this.collection.state;\n        data.pages = this.getPages(data);\n        const html = this.template(\n            $.extend(\n                {\n                    _t: _t,\n                },\n                data\n            )\n        );\n\n        this.$el.html(html);\n        return this;\n    },\n\n    getPages: function (data) {\n        const totalPages = data.totalPages;\n        if (!totalPages) {\n            return [];\n        }\n        let left = 1;\n        let right = totalPages;\n        if (totalPages > this.maxPages) {\n            left = Math.max(1, Math.floor(data.currentPage - this.maxPages / 2));\n            right = Math.min(left + this.maxPages, totalPages);\n            if (right - left < this.maxPages) {\n                left = left - Math.floor(this.maxPages / 2);\n            }\n        }\n        let pages = [];\n        for (let i = left; i <= right; i = i + 1) {\n            pages.push(i);\n        }\n\n        /* add before and after */\n        if (pages[0] > 1) {\n            if (pages[0] > 2) {\n                pages = [\"...\"].concat(pages);\n            }\n            pages = [1].concat(pages);\n        }\n        if (pages[pages.length - 1] < totalPages - 1) {\n            if (pages[pages.length - 2] < totalPages - 2) {\n                pages.push(\"...\");\n            }\n            pages.push(totalPages);\n        }\n        return pages;\n    },\n\n    nextResultPage: function (e) {\n        e.preventDefault();\n        this.app.clearStatus();\n        this.collection.getNextPage();\n    },\n\n    previousResultPage: function (e) {\n        e.preventDefault();\n        this.app.clearStatus();\n        this.collection.getPreviousPage();\n    },\n\n    gotoFirst: function (e) {\n        e.preventDefault();\n        this.app.clearStatus();\n        this.collection.getPage(this.collection.state.firstPage);\n    },\n\n    gotoLast: function (e) {\n        e.preventDefault();\n        this.app.clearStatus();\n        this.collection.getPage(this.collection.state.totalPages);\n    },\n\n    gotoPage: function (e) {\n        e.preventDefault();\n        this.app.clearStatus();\n        const page = parseInt($(e.target).text());\n        this.collection.getPage(page);\n    },\n\n    changeCount: function (e) {\n        e.preventDefault();\n        this.app.clearStatus();\n        const size = parseInt($(e.target).text());\n        this.collection.setPageSize(size, { first: true });\n        this.app.setCookieSetting(\"pageSize\", size);\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport PopoverView from \"../../../../core/ui/views/popover\";\nimport Sortable from \"../../../sortable/sortable\";\n\nexport default PopoverView.extend({\n    className: \"popover attribute-columns\",\n    title: _.template('<%- _t(\"Columns\") %>'),\n    content: _.template(`\n        <label>\n            <%- _t(\"Select columns to show, drag and drop to reorder\") %>\n        </label>\n        <ul>\n        </ul>\n        <button class=\"btn btn-block btn-primary btn-sm\"><%- _t(\"Save\") %></button>`),\n    itemTemplate: _.template(`\n        <li>\n            <label>\n                <input type=\"checkbox\" value=\"<%- id %>\"/>\n                <%- title %>\n            </label>\n        </li>`),\n    events: {\n        \"click button\": \"applyButtonClicked\",\n    },\n\n    initialize: function (options) {\n        this.app = options.app;\n        PopoverView.prototype.initialize.apply(this, [options]);\n    },\n\n    afterRender: function () {\n        const objKeySortCmp = (a, b) => {\n            // object key sort compare function\n            const ca = this.app.availableColumns[a];\n            const cb = this.app.availableColumns[b];\n            if (ca < cb) {\n                return -1;\n            } else if (ca == cb) {\n                return 0;\n            } else {\n                return 1;\n            }\n        };\n\n        this.$container = this.$(\"ul\");\n\n        for (const id of this.app.activeColumns) {\n            const $el = $(\n                this.itemTemplate({\n                    title: this.app.availableColumns[id],\n                    id: id,\n                })\n            );\n            $el.find(\"input\")[0].checked = true;\n            this.$container.append($el);\n        }\n\n        const availableKeys = _.keys(\n            _.omit(this.app.availableColumns, this.app.activeColumns)\n        ).sort(objKeySortCmp);\n        for (const id of availableKeys) {\n            const $el = $(\n                this.itemTemplate({\n                    title: this.app.availableColumns[id],\n                    id: id,\n                })\n            );\n            this.$container.append($el);\n        }\n\n        new Sortable(this.$container, {\n            selector: \"li\",\n        });\n        return this;\n    },\n\n    async applyButtonClicked() {\n        this.hide();\n        this.app.activeColumns = [];\n        for (const inp of this.$(\"input:checked\")) {\n            this.app.activeColumns.push($(inp).val());\n        }\n        this.app.setCookieSetting(this.app.activeColumnsCookie, this.app.activeColumns);\n        await this.app.tableView.render();\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport QueryString from \"../../../querystring/querystring\";\nimport BaseView from \"../../../../core/ui/views/base\";\nimport ButtonView from \"../../../../core/ui/views/button\";\nimport PopoverView from \"../../../../core/ui/views/popover\";\n\nexport default BaseView.extend({\n    tagName: \"div\",\n    className: \"navbar-search form-search ui-offset-parent\",\n    template: _.template(\n        '<div class=\"input-group\">' +\n            '<input id=\"textFilterInput\" type=\"text\" class=\"form-control search-query\" aria-label=\"<%- _t(\"Search\") %>\" placeholder=\"<%- _t(\"Search\") %>\">' +\n            \"</div>\"\n    ),\n    popoverContent: _.template('<input class=\"pat-querystring\" />'),\n    events: {\n        \"keyup .search-query\": \"filter\",\n    },\n    term: null,\n    timeoutId: null,\n    keyupDelay: 300,\n    statusKeyFilter: \"textfilter_status_message_filter\",\n    statusKeySorting: \"textfilter_status_message_sorting\",\n\n    initialize: function (options) {\n        BaseView.prototype.initialize.apply(this, [options]);\n        this.app = this.options.app;\n    },\n\n    setFilterStatusMessage: function () {\n        const clear_btn = $(\n            '<button type=\"button\" class=\"btn btn-primary btn-sm\"></button>'\n        )\n            .text(_t(\"Clear\"))\n            .on(\"click\", () => this.clearFilter());\n\n        const statusTextFilter = _t(\"This listing has filters applied. Not all items are shown.\"); // prettier-ignore\n        this.app.setStatus(\n            {\n                text: statusTextFilter,\n                type: \"success\",\n            },\n            clear_btn,\n            true,\n            this.statusKeyFilter\n        );\n\n        const statusTextSorting = _t(\"Drag and drop reordering is disabled while filters are applied.\"); // prettier-ignore\n        this.app.setStatus(\n            {\n                text: statusTextSorting,\n                type: \"warning\",\n            },\n            null,\n            true,\n            this.statusKeySorting\n        );\n    },\n\n    clearFilterStatusMessage: function () {\n        if (!this.term && !this.app.additionalCriterias.length) {\n            this.app.clearStatus(this.statusKeyFilter);\n            this.app.clearStatus(this.statusKeySorting);\n        }\n    },\n\n    setTerm: function (term, set_input) {\n        const term_el = this.$el[0].querySelector(\".search-query\");\n        this.term = encodeURIComponent(term);\n        if (set_input) {\n            term_el.value = term;\n        }\n        this.app.collection.currentPage = 1;\n        this.app.collection.fetch();\n\n        if (term) {\n            term_el.classList.add(\"has-filter\");\n            this.setFilterStatusMessage();\n        } else {\n            let hasquery = false;\n            try {\n                const qu = this.$queryString.val();\n                if (qu && JSON.parse(qu).length > 0) {\n                    hasquery = true;\n                }\n            } finally {\n                if (!hasquery) {\n                    term_el.classList.remove(\"has-filter\");\n                    this.clearFilterStatusMessage();\n                }\n            }\n        }\n    },\n\n    setQuery: function (query, set_input) {\n        let query_string = null;\n        let query_obj = null;\n        try {\n            if (typeof query === \"string\") {\n                query_obj = JSON.parse(query);\n                query_string = query;\n            } else {\n                query_string = JSON.stringify(query);\n                query_obj = query;\n            }\n        } catch (e) {\n            query_obj = [];\n            query_string = \"[]\";\n        }\n\n        if (set_input) {\n            this.$queryString.val(query_string);\n            // TODO clear query string form\n            // this.queryString._init();\n        }\n        this.app.additionalCriterias = query_obj;\n        this.app.collection.currentPage = 1;\n        this.app.collection.fetch();\n        if (query_obj.length) {\n            this.button.$el[0].classList.add(\"has-filter\");\n            this.setFilterStatusMessage();\n        } else if (!this.term) {\n            this.button.$el[0].classList.remove(\"has-filter\");\n            this.clearFilterStatusMessage();\n        }\n    },\n\n    clearTerm: function () {\n        this.setTerm(\"\", true);\n    },\n\n    clearFilter: function () {\n        this.setTerm(\"\", true);\n        this.setQuery([], true);\n    },\n\n    render: function () {\n        this.$el.html(this.template({ _t: _t }));\n        this.button = new ButtonView({\n            title: _t(\"Filter\"),\n            icon: \"filter\",\n            extraClasses: [\"btn-queryfilter\"],\n        });\n        this.popover = new PopoverView({\n            triggerView: this.button,\n            id: \"structure-query\",\n            title: _.template(_t(\"Filter\")),\n            content: this.popoverContent,\n            placement: \"left\",\n        });\n        this.$el.find(\".input-group\").append(this.button.render().el);\n        this.$el.append(this.popover.render().el);\n        this.popover.$el.addClass(\"query\");\n        this.$queryString = this.popover.$(\"input.pat-querystring\");\n        this.queryString = new QueryString(this.$queryString, {\n            indexOptionsUrl: this.app.options.indexOptionsUrl,\n            showPreviews: false,\n        });\n        this.queryString.$el.on(\"change\", () => {\n            if (this.timeoutId) {\n                clearTimeout(this.timeoutId);\n            }\n            this.timeoutId = setTimeout(() => {\n                this.setQuery(this.$queryString.val(), false);\n            }, this.keyupDelay);\n        });\n        this.queryString.$el.on(\"initialized\", () => {\n            this.queryString.$sortOn.on(\"change\", () => {\n                this.app[\"sort_on\"] = this.queryString.$sortOn.val();\n                this.app.collection.currentPage = 1;\n                this.app.collection.fetch();\n            });\n            this.queryString.$sortOrder.change(() => {\n                if (this.queryString.$sortOrder[0].checked) {\n                    this.app[\"sort_order\"] = \"reverse\";\n                } else {\n                    this.app[\"sort_order\"] = \"ascending\";\n                }\n                this.app.collection.currentPage = 1;\n                this.app.collection.fetch();\n            });\n        });\n        return this;\n    },\n\n    filter: function (event) {\n        if (this.timeoutId) {\n            clearTimeout(this.timeoutId);\n        }\n        this.timeoutId = setTimeout(() => {\n            const term_el = $(event.currentTarget);\n            this.setTerm(term_el.val(), false);\n        }, this.keyupDelay);\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport PopoverView from \"../../../../core/ui/views/popover\";\nimport Upload from \"../../../upload/upload\";\n\nexport default PopoverView.extend({\n    className: \"popover upload\",\n    title: _.template('<%- _t(\"Upload files\") %>'),\n    content: _.template(\n        '<input type=\"text\" name=\"upload\" style=\"display:none\" />' +\n            '<div class=\"uploadify-me\"></div>'\n    ),\n\n    initialize(options) {\n        this.app = options.app;\n        PopoverView.prototype.initialize.apply(this, [options]);\n        this.currentPathData = null;\n        $(\"body\").on(\"context-info-loaded\", (event, data) => {\n            this.currentPathData = data;\n        });\n    },\n\n    render() {\n        PopoverView.prototype.render.call(this);\n        var options = this.app.options.upload;\n        options.success = () => {\n            this.app.collection.fetch();\n        };\n        options.currentPath = this.app.getCurrentPath();\n        options.allowPathSelection = false;\n        this.upload = new Upload(\n            this.$(\".uploadify-me\").addClass(\"pat-upload\"),\n            options\n        );\n        return this;\n    },\n\n    toggle(button, e) {\n        /* we need to be able to change the current default upload directory */\n        PopoverView.prototype.toggle.apply(this, [button, e]);\n        if (!this.opened) {\n            return;\n        }\n        var currentPath = this.app.getCurrentPath();\n        if (this.currentPathData && currentPath !== this.upload.currentPath) {\n            this.upload.setPath(currentPath);\n        }\n    },\n});\n","import Backbone from \"backbone\";\nimport Result from \"../models/result\";\n\nexport default Backbone.Collection.extend({\n    model: Result,\n\n    removeResult: function (model) {\n        return this.removeByUID(model.uid());\n    },\n\n    removeByUID: function (uid) {\n        var found = this.getByUID(uid);\n        if (found) {\n            this.remove(found);\n        }\n        return found;\n    },\n\n    getByUID: function (uid) {\n        return this.findWhere({ UID: uid });\n    },\n});\n","import Backbone from \"backbone\";\nimport Result from \"../models/result\";\nimport utils from \"../../../../core/utils\";\nimport \"backbone.paginator\";\n\nexport default Backbone.PageableCollection.extend({\n    model: Result,\n    mode: \"server\",\n\n    initialize: function (models, options) {\n        this.options = options;\n        this.view = options.view;\n        this.url = options.url;\n\n        this.queryHelper = utils.QueryHelper({\n            attributes: this.view.options.queryHelperAttributes,\n            ...this.view.options,\n        });\n\n        this.queryParser = function (options) {\n            if (options === undefined) {\n                options = {};\n            }\n            const term = this.view?.toolbar?.get?.(\"filter\")?.term || null;\n            const sortOn = this.view?.sort_on || \"getObjPositionInParent\";\n            const sortOrder = this.view.sort_order;\n\n            return JSON.stringify({\n                criteria: this.queryHelper.getCriterias(term, {\n                    additionalCriterias: this.view.additionalCriterias,\n                    ...options,\n                }),\n                sort_on: sortOn,\n                sort_order: sortOrder,\n            });\n        };\n\n        // check and see if a hash is provided for initial path\n        if (window.location.hash.substring(0, 2) === \"#/\") {\n            this.queryHelper.currentPath = window.location.hash.substring(1);\n        }\n\n        Backbone.PageableCollection.prototype.initialize.apply(this, [models, options]);\n    },\n\n    getCurrentPath: function () {\n        return this.queryHelper.getCurrentPath();\n    },\n\n    setCurrentPath: function (path) {\n        this.queryHelper.currentPath = path;\n    },\n\n    // query parameters passed directly (currently GET\n    // parameters).  These are currently generated using following\n    // functions.\n    queryParams: {\n        query: function () {\n            return this.queryParser();\n        },\n        batch: function () {\n            this.queryHelper.options.batchSize = this.state.pageSize;\n            return JSON.stringify(this.queryHelper.getBatch(this.state.currentPage));\n        },\n        attributes: function () {\n            return JSON.stringify(this.queryHelper.options.attributes);\n        },\n    },\n\n    parseState: function (response, queryParams, state, options) {  // eslint-disable-line\n        this.state.totalRecords = response.total;\n        this.state.totalPages = Math.ceil(response.total / state.pageSize);\n    },\n\n    parseRecords: function (response, options) {  // eslint-disable-line\n        const results = response.results;\n        // Manually set sort order here since backbone will otherwise do arbitrary sorting\n        results.forEach((item, idx) => {\n            item._sort = idx;\n        });\n        return results;\n    },\n});\n","import $ from \"jquery\";\nimport _ from \"underscore\";\nimport _t from \"../../../../core/i18n-wrapper\";\nimport dom from \"@patternslib/patternslib/src/core/dom\";\nimport utils from \"../../../../core/utils\";\nimport logging from \"@patternslib/patternslib/src/core/logging\";\nimport Cookies from \"js-cookie\";\n\nimport Toolbar from \"../../../../core/ui/views/toolbar\";\nimport ButtonGroup from \"../../../../core/ui/views/buttongroup\";\nimport ButtonView from \"../../../../core/ui/views/button\";\nimport BaseView from \"../../../../core/ui/views/base\";\n\nimport TableView from \"./table\";\nimport SelectionWellView from \"./selectionwell\";\nimport GenericPopover from \"./generic-popover\";\nimport RearrangeView from \"./rearrange\";\nimport SelectionButtonView from \"./selectionbutton\";\nimport PagingView from \"./paging\";\nimport ColumnsView from \"./columns\";\nimport TextFilterView from \"./textfilter\";\nimport UploadView from \"./upload\";\nimport SelectedCollection from \"../collections/selected\";\nimport StatusTemplate from \"../../templates/status.xml\";\n\nimport ResultCollection from \"../collections/result\";\n\nconst log = logging.getLogger(\"pat-structure/app\");\n\nexport default BaseView.extend({\n    tagName: \"div\",\n    statusTemplate: _.template(StatusTemplate),\n    statusMessages: [],\n    sort_on: \"getObjPositionInParent\",\n    sort_order: \"ascending\",\n    additionalCriterias: [],\n    cookieSettingPrefix: \"_fc_\",\n\n    buttons: null,\n    textfilter: null,\n    forms: [],\n\n    pasteAllowed: function () {\n        return !!Cookies.get(\"__cp\");\n    },\n\n    initialize: function (options) {\n        BaseView.prototype.initialize.apply(this, [options]);\n        this.loading = new utils.Loading();\n        this.loading.show();\n\n        /* close popovers when clicking away */\n        $(document).on(\"click\", (e) => {\n            const $el = $(e.target);\n            if (\n                !$el.is(\":visible\") ||\n                $el.css(\"visibility\") === \"hidden\" ||\n                $el.css(\"opacity\") === \"0\"\n            ) {\n                // ignore this, fake event trigger to element that is not visible\n                return;\n            }\n            if ($el.is(\"a\") || $el.parent().is(\"a\") || $el.hasClass(\"popover-structure-query-active\")) {\n                // elements that should not close\n                // NOTE: \"popover-structure-query-active\" is set on body when\n                // select2 elements are clicked inside the structure filter\n                // -> Firefox gets a bubbled click event and would close the popover\n                return;\n            }\n            const $popover = $(\".popover:visible\");\n            if ($popover.length > 0 && !$.contains($popover[0], $el[0])) {\n                const popover = $popover.data(\"component\");\n                if (popover) {\n                    popover.hide();\n                }\n            }\n        });\n\n        this.collection = new ResultCollection([], {\n            // Due to default implementation need to poke at things in here,\n            // view is passed.\n            view: this,\n            url: this.options.collectionUrl,\n        });\n\n        this.activeColumns = this.getCookieSetting(\n            this.activeColumnsCookie,\n            this.activeColumns\n        );\n\n        this.selectedCollection = new SelectedCollection();\n        this.pagingView = new PagingView({ app: this });\n        this.tableView = new TableView({ app: this });\n\n        // set initial pageSize\n        this.collection.state.pageSize = this.getCookieSetting(\"pageSize\", 15);\n\n        // fetch results from collection\n        // NOTE: this also calls this.tableView.render() and\n        // this.pagingView.render()\n        this.collection.fetch();\n\n        // initialize buttons\n        this.setupButtons();\n\n        this.wellView = new SelectionWellView({\n            collection: this.selectedCollection,\n            triggerView: this.toolbar.get(\"selected-items\"),\n            app: this,\n            id: \"selected-items\",\n        });\n\n        this.toolbar.get(\"selected-items\").disable();\n        this.buttons.disable();\n\n        let timeout = 0;\n        this.selectedCollection.on(\n            \"add remove reset\",\n            (/*modal, collection*/) => {\n                /* delay rendering since this can happen in batching */\n                clearTimeout(timeout);\n                timeout = setTimeout(() => {\n                    this.updateButtons();\n                }, 100);\n            },\n            this\n        );\n\n        this.collection.on(\"sync\", () => {\n            if (this.contextInfoUrl) {\n                $.ajax({\n                    url: this.getAjaxUrl(this.contextInfoUrl),\n                    dataType: \"json\",\n                    success: (data) => {\n                        $(\"body\").trigger(\"context-info-loaded\", [data]);\n                    },\n                    error: (response) => {\n                        // XXX handle error?\n                        if (response.status === 404) {\n                            log.info(\"context info url not found\");\n                        }\n                    },\n                });\n            }\n\n            // undo the flag set by popState to prevent the push state\n            // from being triggered here, and early abort out of the\n            // function to not execute the folowing pushState logic.\n            if (this.doNotPushState) {\n                this.doNotPushState = false;\n                return;\n            }\n\n            this.loading.show();\n            this.updateButtons();\n\n            let path = this.getCurrentPath();\n            let url;\n            if (path === \"/\") {\n                path = \"\";\n            }\n            /* maintain history here */\n            if (this.options.pushStateUrl) {\n                // permit an extra slash in pattern, but strip that if there\n                // as path always will be prefixed with a `/`\n                const pushStateUrl = this.options.pushStateUrl.replace(\n                    \"/{path}\",\n                    \"{path}\"\n                );\n                url = pushStateUrl.replace(\"{path}\", path);\n                window.history.pushState(null, null, url);\n            } else if (this.options.urlStructure) {\n                // fallback to urlStructure specification\n                url =\n                    this.options.urlStructure.base +\n                    path +\n                    this.options.urlStructure.appended;\n                window.history.pushState(null, null, url);\n            }\n\n            if (this.options.traverseView) {\n                // flag specifies that the context view implements a traverse\n                // view (i.e. IPublishTraverse) and the path is a virtual path\n                // of some kind - use the base object instead for that by not\n                // specifying a path.\n                path = \"\";\n                // TODO figure out whether the following event after this is\n                // needed at all.\n            }\n            $(\"body\").trigger(\"structure-url-changed\", [path]);\n\n            this.loading.hide();\n        });\n\n        if (\n            (this.options.pushStateUrl || this.options.urlStructure) &&\n            utils.featureSupport.history()\n        ) {\n            $(window).on(\"popstate\", () => {\n                /* normalize this url first... */\n                const win = utils.getWindow();\n                let url = win.location.href;\n                let base, appended;\n                if (url.indexOf(\"?\") !== -1) {\n                    url = url.split(\"?\")[0];\n                }\n                if (url.indexOf(\"#\") !== -1) {\n                    url = url.split(\"#\")[0];\n                }\n                if (this.options.pushStateUrl) {\n                    const tmp = this.options.pushStateUrl.split(\"{path}\");\n                    base = tmp[0];\n                    appended = tmp[1];\n                } else {\n                    base = this.options.urlStructure.base;\n                    appended = this.options.urlStructure.appended;\n                }\n                // take off the base url\n                let path = url.substring(base.length);\n                if (path.substring(path.length - appended.length) === appended) {\n                    /* check that it ends with appended value */\n                    path = path.substring(0, path.length - appended.length);\n                }\n                if (!path) {\n                    path = \"/\";\n                }\n                this.setCurrentPath(path);\n                $(\"body\").trigger(\"structure-url-changed\", [path]);\n                // since this next call causes state to be pushed...\n                this.doNotPushState = true;\n                this.collection.getPage(this.collection.state.firstPage);\n            });\n            /* detect key events */\n            $(document).on(\"keyup keydown\", (e) => {\n                this.keyEvent = e;\n            });\n        }\n\n        this.togglePasteBtn();\n    },\n\n    updateButtons: function () {\n        if (this.selectedCollection.length) {\n            this.toolbar.get(\"selected-items\").enable();\n            this.buttons.enable();\n        } else {\n            this.toolbar.get(\"selected-items\").disable();\n            this.buttons.disable();\n        }\n\n        this.togglePasteBtn();\n    },\n\n    togglePasteBtn: function () {\n        if (\n            _.find(this.buttons.items, (btn) => {\n                return btn.id === \"paste\";\n            })\n        ) {\n            if (this.pasteAllowed()) {\n                this.buttons.get(\"paste\").enable();\n            } else {\n                this.buttons.get(\"paste\").disable();\n            }\n        }\n    },\n\n    inQueryMode: function () {\n        if (this.toolbar) {\n            if (this.toolbar.get(\"filter\").term) {\n                return true;\n            }\n        }\n        if (this.additionalCriterias.length > 0) {\n            return true;\n        }\n        if (this.sort_on && this.sort_on !== \"getObjPositionInParent\") {\n            return true;\n        }\n        if (this.sort_order !== \"ascending\") {\n            return true;\n        }\n        return false;\n    },\n\n    getSelectedUids: function (collection) {\n        if (collection === undefined) {\n            collection = this.selectedCollection;\n        }\n        const uids = [];\n        collection.each(function (item) {\n            uids.push(item.uid());\n        });\n        return uids;\n    },\n\n    getCurrentPath: function () {\n        return this.collection.getCurrentPath();\n    },\n\n    setCurrentPath: function (path) {\n        this.collection.setCurrentPath(path);\n        // this.textfilter.clearTerm();\n        this.clearStatus();\n    },\n\n    getAjaxUrl: function (url) {\n        return url.replace(\"{path}\", this.getCurrentPath());\n    },\n\n    buttonClickEvent: function (button) {\n        let data = null;\n        let callback = null;\n\n        if (button.url) {\n            this.loading.show();\n            // handle ajax now\n\n            if (arguments.length > 1) {\n                const arg1 = arguments[1];\n                if (!arg1.preventDefault) {\n                    data = arg1;\n                }\n            }\n            if (arguments.length > 2) {\n                const arg2 = arguments[2];\n                if (typeof arg2 === \"function\") {\n                    callback = arg2;\n                }\n            }\n            if (data === null) {\n                data = {};\n            }\n            if (data.selection === undefined) {\n                // if selection is overridden by another mechanism\n                data.selection = JSON.stringify(this.getSelectedUids());\n            }\n            data._authenticator = utils.getAuthenticator();\n            if (data.folder === undefined) {\n                data.folder = this.getCurrentPath();\n            }\n\n            const url = this.getAjaxUrl(button.url);\n            $.ajax(\n                {\n                    url: url,\n                    type: \"POST\",\n                    data: data,\n                    success: (data) => {\n                        this.ajaxSuccessResponse.apply(this, [data, callback]);\n                        this.loading.hide();\n                    },\n                    error: (response) => {\n                        this.ajaxErrorResponse.apply(this, [response, url]);\n                        this.loading.hide();\n                    },\n                },\n                this\n            );\n        }\n    },\n\n    ajaxSuccessResponse: function (data, callback) {\n        this.clearStatus();\n        this.selectedCollection.reset();\n        if (data.status === \"success\") {\n            this.collection.reset();\n        }\n        if (data.msg) {\n            // give status message somewhere...\n            this.setStatus({\n                text: data.msg,\n                type: data.status || \"warning\",\n            });\n        }\n        if (callback !== null && callback !== undefined) {\n            callback(data);\n        }\n        this.collection.fetch();\n    },\n\n    ajaxErrorResponse: function (response, url) {\n        if (response.status === 404) {\n            window.alert(_t(\"operation url ${url} is not valid\", { url: url }));\n        } else {\n            window.alert(_t(\"there was an error performing the action\"));\n        }\n    },\n\n    setupButtons: function () {\n        const items = [];\n\n        const columnsBtn = new ButtonView({\n            id: \"structure-columns\",\n            tooltip: _t(\"Configure displayed columns\"),\n            icon: \"plone-three-dots\",\n        });\n\n        this.columnsView = new ColumnsView({\n            app: this,\n            triggerView: columnsBtn,\n            id: \"structure-columns\",\n            placement: \"bottom-right\",\n        });\n        items.push(columnsBtn);\n\n        items.push(\n            new SelectionButtonView({\n                title: _t(\"Selected\"),\n                id: \"selected-items\",\n                tooltip: _t(\"Manage selection\"),\n                collection: this.selectedCollection,\n                icon: \"plone-selection\",\n            })\n        );\n\n        if (this.options.rearrange) {\n            const rearrangeButton = new ButtonView({\n                id: \"structure-rearrange\",\n                title: _t(\"Rearrange\"),\n                icon: \"plone-rearrange\",\n                tooltip: _t(\"Rearrange folder contents\"),\n                url: this.options.rearrange.url,\n            });\n            this.rearrangeView = new RearrangeView({\n                triggerView: rearrangeButton,\n                app: this,\n                id: \"structure-rearrange\",\n            });\n            items.push(rearrangeButton);\n        }\n        if (\n            this.options.upload &&\n            utils.featureSupport.dragAndDrop() &&\n            utils.featureSupport.fileApi()\n        ) {\n            const uploadButton = new ButtonView({\n                id: \"upload\",\n                title: _t(\"Upload\"),\n                tooltip: _t(\"Upload files\"),\n                icon: \"upload\",\n            });\n            this.uploadView = new UploadView({\n                triggerView: uploadButton,\n                app: this,\n                id: \"upload\",\n            });\n            items.push(uploadButton);\n        }\n\n        const buttons = [];\n        for (const buttonOptions of this.options.buttons) {\n            try {\n                const button = new ButtonView(buttonOptions);\n                buttons.push(button);\n\n                if (button.form) {\n                    buttonOptions.triggerView = button;\n                    buttonOptions.app = this;\n                    const view = new GenericPopover(buttonOptions);\n                    this.forms.push(view.el);\n                } else {\n                    button.on(\"button:click\", () => this.buttonClickEvent(button), this);\n                }\n            } catch (err) {\n                log.error(\n                    `Error initializing button ${\n                        buttonOptions.title || buttonOptions.id\n                    } ${err}`\n                );\n            }\n        }\n        this.buttons = new ButtonGroup({\n            items: buttons,\n            id: \"mainbuttons\",\n            app: this,\n        });\n        items.push(this.buttons);\n\n        this.textfilter = new TextFilterView({\n            id: \"filter\",\n            app: this,\n        });\n        items.push(this.textfilter);\n\n        this.toolbar = new Toolbar({\n            items: items,\n        });\n    },\n\n    moveItem: function (id, delta, subsetIds) {\n        $.ajax({\n            url: this.getAjaxUrl(this.options.moveUrl),\n            type: \"POST\",\n            data: {\n                delta: delta,\n                id: id,\n                _authenticator: utils.getAuthenticator(),\n                subsetIds: JSON.stringify(subsetIds),\n            },\n            dataType: \"json\",\n            success: (data) => {\n                this.clearStatus();\n                if (data.msg) {\n                    this.setStatus({ text: data.msg });\n                } else if (data.status !== \"success\") {\n                    // XXX handle error here with something?\n                    this.setStatus({\n                        text: _t(\"Error moving item\"),\n                        type: \"danger\",\n                    });\n                }\n                this.collection.fetch(); // reload it all\n            },\n            error: () => {\n                this.clearStatus();\n                this.setStatus({\n                    text: _t(\"Error moving item\"),\n                    type: \"danger\",\n                });\n            },\n        });\n    },\n\n    clearStatus: function (key) {\n        const statusContainer = this.$el[0].querySelector(\".fc-status-container\");\n        let toBeRemoved = [];\n        if (key) {\n            // remove specific status, even if marked with ``fixed``.\n            toBeRemoved = this.statusMessages.filter(function (item) {\n                return item.key === key;\n            });\n            toBeRemoved.forEach(function (statusItem) {\n                try {\n                    statusContainer.removeChild(statusItem.el);\n                } catch (e) {\n                    // just ignore.\n                }\n            });\n            this.statusMessages = this.statusMessages.filter(function (item) {\n                return item.key !== key;\n            });\n        } else {\n            // remove all status messages except those marked with ``fixed``.\n            this.statusMessages.forEach(\n                function (statusItem) {\n                    if (!statusItem.fixed) {\n                        try {\n                            statusContainer.removeChild(statusItem.el);\n                            toBeRemoved.push(statusItem);\n                        } catch (e) {\n                            // just ignore.\n                        }\n                    }\n                }.bind(this)\n            );\n            this.statusMessages = this.statusMessages.filter(function (item) {\n                return toBeRemoved.indexOf(item) === -1;\n            });\n        }\n    },\n\n    setStatus: function (status, btn, fixed, key) {\n        if (\n            key &&\n            this.statusMessages.filter(function (item) {\n                return item.key === key;\n            }).length > 0\n        ) {\n            // Prevent two same status messages\n            return;\n        }\n\n        const el = dom.create_from_string(\n            this.statusTemplate({\n                label: status.label || \"\",\n                text: status.text,\n                type: status.type || \"warning\",\n            })\n        ).lastChild;\n\n        if (btn) {\n            btn = $(btn)[0]; // support jquert + bare dom elements\n            el.appendChild(btn);\n        }\n\n        status = {\n            el: el,\n            fixed: fixed,\n            key: key, // to be used for filtering to prevent double status messages.\n        };\n\n        const statusContainer = this.$el[0].querySelector(\".fc-status-container\");\n        statusContainer.appendChild(status.el);\n        this.statusMessages.push(status);\n\n        return status;\n    },\n\n    render: async function () {\n        this.$el.append(this.toolbar.render().el);\n        if (this.wellView) {\n            this.$el\n                .find(\"#btn-\" + this.wellView.id)\n                .after((await this.wellView.render()).el);\n        }\n        for (const form of this.forms) {\n            const id = $(form).attr(\"id\");\n            const $btn = this.$el.find(\"#btn-\" + id);\n            if ($btn.closest(\".btn-group\").length) {\n                $btn.closest(\".btn-group\").after(form);\n            } else {\n                this.$el.find(\"#btn-\" + id).after(form);\n            }\n        }\n        this.$el.append(\n            dom.create_from_string('<div class=\"fc-status-container\"></div>')\n        );\n        if (this.columnsView) {\n            this.$el\n                .find(\"#btn-\" + this.columnsView.id)\n                .after(this.columnsView.render().el);\n        }\n        if (this.rearrangeView) {\n            this.$el\n                .find(\"#btn-\" + this.rearrangeView.id)\n                .after(this.rearrangeView.render().el);\n        }\n        if (this.uploadView) {\n            this.$el\n                .find(\"#btn-\" + this.uploadView.id)\n                .after(this.uploadView.render().el);\n        }\n\n        // NOTE: tableView and pagingView get rendered on\n        // this.collection.fetch() on initialization so we simply\n        // append the rendered output to the template once here\n        this.$el.append(this.tableView.el);\n        this.$el.append(this.pagingView.el);\n\n        // Backdrop class\n        if (this.options.backdropSelector !== null) {\n            $(this.options.backdropSelector).addClass(\"ui-backdrop-element\");\n        } else {\n            this.$el.addClass(\"ui-backdrop-element\");\n        }\n\n        return this;\n    },\n\n    getCookieSetting: function (name, _default) {\n        if (_default === undefined) {\n            _default = null;\n        }\n        let val;\n        try {\n            val = Cookies.get(this.cookieSettingPrefix + name);\n            val = JSON.parse(val).value;\n        } catch (e) {\n            /* error parsing json, load default here now */\n            return _default;\n        }\n        if (val === undefined || val === null) {\n            return _default;\n        }\n        return val;\n    },\n\n    setCookieSetting: function (name, val) {\n        Cookies.set(\n            this.cookieSettingPrefix + name,\n            JSON.stringify({\n                value: val,\n            })\n        );\n    },\n});\n"],"names":["extend","isUIView","eventPrefix","template","idPrefix","appendInContainer","initialize","options","key","this","_t","render","applyTemplate","trigger","afterRender","id","$el","attr","serializedModel","data","html","propagateEvent","eventName","indexOf","eventId","split","uiEventTrigger","name","args","slice","call","arguments","prototype","apply","items","itemContainer","isOffsetParent","renderItems","bindEvents","addClass","$container","length","view","append","self","on","eventTarget","newName","newArgs","undefined","get","add","item","push","tagName","className","disable","button","enable","context","attributes","href","extraClasses","tooltip","events","click","title","toLowerCase","replace","cid","async","klass","bind","icon","icon_markup","utils","resolveIcon","icon_el","dom","create_from_string","prepend","e","type","stopPropagation","handleClick","preventDefault","is","removeClass","menuOptions","url","category","css","modal","method","menu","app","model","canMove","moveUrl","result","JSON","parse","stringify","pasteAllowed","is_folderish","pasteItem","inQueryMode","defaultPageTypes","portal_type","setDefaultPageUrl","selectAll","typeToViewAction","viewAction","openItem","getURL","editItem","defaults","review_state","uid","UID","selectedCollection","page","count","getPage","loading","show","URL","collection","searchParams","queryParser","searchPath","path","size","queryHelper","resp","fetch","headers","Accept","json","total","hide","tableView","doAction","buttonName","successMsg","failMsg","buttons","body","URLSearchParams","selection","folder","_authenticator","getAuthenticator","msg","state_type","status","Title","updateButtons","clearStatus","setStatus","text","cutClicked","copyClicked","pasteClicked","moveTopClicked","moveItem","moveBottomClicked","setDefaultPageClicked","getAjaxUrl","ajaxSuccessResponse","generate_events","menuOption","actions","actionmenu","delegateEvents","menuOptionsCategorized","idx","generateId","classes","iconSVG","el","innerHTML","toJSON","header","dropdownIcon","registry","scan","table","now","Date","listenTo","expired","ExpirationDate","dt","ineffective","EffectiveDate","selected","findWhere","activeColumns","availableColumns","contenttype","thumb_scale","mimeIcon","viewURL","convertColumnValue","exclude_from_nav","attrs","toggleClass","contextInfo","defaultPage","menuview","column","value","dateColumns","includes","date","toString","toLocaleString","language","dateFormat","translatableColumns","itemClicked","keyEvent","ctrlKey","setCurrentPath","getFirstPage","itemSelected","checkbox","$","checked","clone","removeResult","shiftKey","parentNode","lastCheckedIndex","index","thisIndex","parents","$tr","closest","existing","getByUID","elementMap","Map","set","element","instance","has","instanceMap","console","error","Array","from","keys","remove","delete","TRANSITION_END","parseSelector","selector","window","CSS","escape","match","isElement","object","jquery","nodeType","getElement","document","querySelector","isDisabled","Node","ELEMENT_NODE","classList","contains","disabled","hasAttribute","getAttribute","getjQuery","jQuery","DOMContentLoadedCallbacks","execute","possibleCallback","defaultValue","executeAfterTransition","callback","transitionElement","waitForTransition","emulatedDuration","transitionDuration","transitionDelay","getComputedStyle","floatTransitionDuration","Number","parseFloat","floatTransitionDelay","MILLISECONDS_MULTIPLIER","getTransitionDurationFromElement","called","handler","target","removeEventListener","addEventListener","setTimeout","dispatchEvent","Event","namespaceRegex","stripNameRegex","stripUidRegex","eventRegistry","uidEvent","customEvents","mouseenter","mouseleave","nativeEvents","Set","makeEventUid","getElementEvents","findHandler","callable","delegationSelector","Object","values","find","event","normalizeParameters","originalTypeEvent","delegationFunction","isDelegated","typeEvent","getTypeEvent","addHandler","oneOff","wrapFunction","fn","relatedTarget","delegateTarget","handlers","previousFunction","domElements","querySelectorAll","domElement","hydrateObj","EventHandler","off","bootstrapDelegationHandler","bootstrapHandler","removeHandler","Boolean","removeNamespacedHandlers","namespace","storeElementEvent","handlerKey","entries","one","inNamespace","isNamespace","startsWith","elementEvent","keyHandlers","jQueryEvent","bubbles","nativeDispatch","defaultPrevented","isPropagationStopped","isImmediatePropagationStopped","isDefaultPrevented","evt","cancelable","obj","meta","defineProperty","configurable","normalizeData","decodeURIComponent","normalizeDataKey","chr","setDataAttribute","setAttribute","removeDataAttribute","removeAttribute","getDataAttributes","bsKeys","dataset","filter","pureKey","charAt","getDataAttribute","Default","DefaultType","NAME","Error","_getConfig","config","_mergeConfigObj","_configAfterMerge","_typeCheckConfig","jsonConfig","constructor","configTypes","property","expectedTypes","valueType","RegExp","test","TypeError","toUpperCase","super","_element","_config","DATA_KEY","dispose","EVENT_KEY","propertyName","getOwnPropertyNames","_queueCallback","isAnimated","getInstance","getOrCreateInstance","VERSION","getSelector","hrefAttribute","trim","map","sel","join","SelectorEngine","documentElement","concat","Element","findOne","children","child","matches","ancestor","prev","previous","previousElementSibling","next","nextElementSibling","focusableChildren","focusables","getClientRects","elementIsVisible","getPropertyValue","closedDetails","summary","isVisible","getSelectorFromElement","getElementFromSelector","getMultipleElementsFromSelector","EVENT_CLOSE","EVENT_CLOSED","Alert","close","_destroyElement","jQueryInterface","each","plugin","component","clickEvent","enableDismissTrigger","JQUERY_NO_CONFLICT","Constructor","noConflict","readyState","tableSortable","subsetIds","setContextInfo","crumbs","breadcrumbs","$crumbs","crumb","eq","escape_html","datatables_options","order","columnDefs","orderable","targets","paging","searching","info","homeIcon","pathParts","getCurrentPath","val","container","collection_length","collection_cnt","col","hasOwnProperty","table_row_rendering_finished","Promise","resolve","add_event_listener","once","remove_event_listener","addReordering","storeOrder","settings","ordArr","dir","enableSort","e_target","btn","api","dataTable","draw","disableSort","breadcrumbClicked","parent","prevAll","reverse","part","state","firstPage","prop","models","silent","toggleSelectAll","createDragItem","pattern","$table","opacity","position","width","height","appendTo","drop","delta","content","triggerView","triggerEvents","placement","opened","closeOnOutClick","backdrop","$backdrop","useBackdrop","backdropOptions","zIndex","classActiveName","closeOnEsc","closeOnClick","bindTriggerEvents","renderTitle","renderContent","keyCode","getTemplateOptions","empty","func","stopListening","getPosition","offsetWidth","offsetHeight","offset","getBodyClassName","popover","setBackdrop","tp","actualWidth","actualHeight","pos","$tip","top","left","applyPlacement","positionArrow","dimension","toggle","timeout","clearTimeout","itemRemoved","currentTarget","removeByUID","filterSelected","removeAll","reset","submitText","form","submitContext","setContent","closeText","_json","applyButtonClicked","param","serializeArray","buttonClickEvent","dataUrl","dataType","cache","getSelectedUids","transitions","done","fail","originalContent","always","replaceWith","rearrangeProperties","rearrange","properties","$rearrangeOn","$reversed","rearrangeButtonClicked","confirm","rearrange_on","reversed","logging","getLogger","setLevel","maxPages","pages","getPages","totalPages","right","Math","max","floor","currentPage","min","i","nextResultPage","getNextPage","previousResultPage","getPreviousPage","gotoFirst","gotoLast","gotoPage","parseInt","changeCount","setPageSize","first","setCookieSetting","itemTemplate","availableKeys","sort","a","b","ca","cb","inp","activeColumnsCookie","popoverContent","term","timeoutId","keyupDelay","statusKeyFilter","statusKeySorting","setFilterStatusMessage","clear_btn","clearFilter","statusTextFilter","statusTextSorting","clearFilterStatusMessage","additionalCriterias","setTerm","set_input","term_el","encodeURIComponent","hasquery","qu","$queryString","setQuery","query","query_string","query_obj","clearTerm","queryString","indexOptionsUrl","showPreviews","$sortOn","$sortOrder","change","currentPathData","upload","success","currentPath","allowPathSelection","setPath","found","mode","QueryHelper","queryHelperAttributes","toolbar","sortOn","sort_on","sortOrder","sort_order","criteria","getCriterias","location","hash","substring","queryParams","batch","batchSize","pageSize","getBatch","parseState","response","totalRecords","ceil","parseRecords","results","forEach","_sort","statusTemplate","statusMessages","cookieSettingPrefix","textfilter","forms","Loading","hasClass","$popover","collectionUrl","getCookieSetting","pagingView","setupButtons","wellView","contextInfoUrl","doNotPushState","pushStateUrl","history","pushState","urlStructure","base","appended","traverseView","featureSupport","getWindow","tmp","togglePasteBtn","uids","arg1","arg2","ajaxErrorResponse","alert","columnsBtn","columnsView","rearrangeButton","rearrangeView","dragAndDrop","fileApi","uploadButton","uploadView","buttonOptions","err","statusContainer","toBeRemoved","statusItem","removeChild","fixed","label","lastChild","appendChild","after","$btn","backdropSelector","_default"],"sourceRoot":""}